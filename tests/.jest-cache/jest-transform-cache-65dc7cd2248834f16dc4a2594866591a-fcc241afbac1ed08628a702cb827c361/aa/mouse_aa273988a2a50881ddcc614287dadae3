c4648c15e934345fc52a14fbacd0cd11
'use strict';

require("../../event/behavior/click.js");
require("../../event/behavior/cut.js");
require("../../event/behavior/keydown.js");
require("../../event/behavior/keypress.js");
require("../../event/behavior/keyup.js");
require("../../event/behavior/paste.js");
require('@testing-library/dom');
require("../../utils/dataTransfer/Clipboard.js");
var isDisabled = require("../../utils/misc/isDisabled.js");
var getTreeDiff = require("../../utils/misc/getTreeDiff.js");
var focus = require("../../event/focus.js");
var setSelectionPerMouse = require("../../event/selection/setSelectionPerMouse.js");
var modifySelectionPerMouse = require("../../event/selection/modifySelectionPerMouse.js");
var buttons = require("./buttons.js");
var shared = require("./shared.js");
function _define_property(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
/**
 * This object is the single "virtual" mouse that might be controlled by multiple different pointer devices.
 */
class Mouse {
  move(instance, position, /** Whether `preventDefault()` has been called on the `pointerdown` event */isPrevented) {
    const prevPosition = this.position;
    const prevTarget = this.getTarget(instance);
    this.position = position;
    if (!shared.isDifferentPointerPosition(prevPosition, position)) {
      return;
    }
    const nextTarget = this.getTarget(instance);
    const init = this.getEventInit('mousemove');
    const [leave, enter] = getTreeDiff.getTreeDiff(prevTarget, nextTarget);
    return {
      leave: () => {
        if (prevTarget !== nextTarget) {
          instance.dispatchUIEvent(prevTarget, 'mouseout', init);
          leave.forEach(el => instance.dispatchUIEvent(el, 'mouseleave', init));
        }
      },
      enter: () => {
        if (prevTarget !== nextTarget) {
          instance.dispatchUIEvent(nextTarget, 'mouseover', init);
          enter.forEach(el => instance.dispatchUIEvent(el, 'mouseenter', init));
        }
      },
      move: () => {
        if (isPrevented) {
          return;
        }
        instance.dispatchUIEvent(nextTarget, 'mousemove', init);
        this.modifySelecting(instance);
      }
    };
  }
  down(instance, keyDef, /** Whether `preventDefault()` has been called on the `pointerdown` event */isPrevented) {
    const button = this.buttons.down(keyDef);
    if (button === undefined) {
      return;
    }
    const target = this.getTarget(instance);
    this.buttonDownTarget[button] = target;
    const init = this.getEventInit('mousedown', keyDef.button);
    const disabled = isDisabled.isDisabled(target);
    if (!isPrevented && (disabled || instance.dispatchUIEvent(target, 'mousedown', init))) {
      this.startSelecting(instance, init.detail);
      focus.focusElement(target);
    }
    if (!disabled && buttons.getMouseEventButton(keyDef.button) === 2) {
      instance.dispatchUIEvent(target, 'contextmenu', this.getEventInit('contextmenu', keyDef.button));
    }
  }
  up(instance, keyDef, /** Whether `preventDefault()` has been called on the `pointerdown` event */isPrevented) {
    const button = this.buttons.up(keyDef);
    if (button === undefined) {
      return;
    }
    const target = this.getTarget(instance);
    if (!isDisabled.isDisabled(target)) {
      if (!isPrevented) {
        const mouseUpInit = this.getEventInit('mouseup', keyDef.button);
        instance.dispatchUIEvent(target, 'mouseup', mouseUpInit);
        this.endSelecting();
      }
      const clickTarget = getTreeDiff.getTreeDiff(this.buttonDownTarget[button], target)[2][0];
      if (clickTarget) {
        const init = this.getEventInit('click', keyDef.button);
        if (init.detail) {
          instance.dispatchUIEvent(clickTarget, init.button === 0 ? 'click' : 'auxclick', init);
          if (init.button === 0 && init.detail === 2) {
            instance.dispatchUIEvent(clickTarget, 'dblclick', {
              ...this.getEventInit('dblclick', keyDef.button),
              detail: init.detail
            });
          }
        }
      }
    }
  }
  resetClickCount() {
    this.clickCount.reset();
  }
  getEventInit(type, button) {
    const init = {
      ...this.position.coords
    };
    init.button = buttons.getMouseEventButton(button);
    init.buttons = this.buttons.getButtons();
    if (type === 'mousedown') {
      init.detail = this.clickCount.getOnDown(init.button);
    } else if (type === 'mouseup') {
      init.detail = this.clickCount.getOnUp(init.button);
    } else if (type === 'click' || type === 'auxclick') {
      init.detail = this.clickCount.incOnClick(init.button);
    }
    return init;
  }
  getTarget(instance) {
    var _this_position_target;
    return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;
  }
  startSelecting(instance, clickCount) {
    var _this_position_caret, _this_position_caret1;
    // TODO: support extending range (shift)
    this.selecting = setSelectionPerMouse.setSelectionPerMouseDown({
      document: instance.config.document,
      target: this.getTarget(instance),
      node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
      offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset,
      clickCount
    });
  }
  modifySelecting(instance) {
    var _this_position_caret, _this_position_caret1;
    if (!this.selecting) {
      return;
    }
    modifySelectionPerMouse.modifySelectionPerMouseMove(this.selecting, {
      document: instance.config.document,
      target: this.getTarget(instance),
      node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,
      offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset
    });
  }
  endSelecting() {
    this.selecting = undefined;
  }
  constructor() {
    _define_property(this, "position", {});
    _define_property(this, "buttons", new buttons.Buttons());
    _define_property(this, "selecting", undefined);
    _define_property(this, "buttonDownTarget", {});
    // According to spec the `detail` on click events should be the number
    // of *consecutive* clicks with a specific button.
    // On `mousedown` and `mouseup` it should be this number increased by one.
    // But the browsers don't implement it this way.
    // If another button is pressed,
    //   in Webkit: the `mouseup` on the previously pressed button has `detail: 0` and no `click`/`auxclick`.
    //   in Gecko: the `mouseup` and click events have the same detail as the `mousedown`.
    // If there is a delay while a button is pressed,
    // the `mouseup` and `click` are normal, but a following `mousedown` starts a new click count.
    // We'll follow the minimal implementation of Webkit.
    _define_property(this, "clickCount", new class {
      incOnClick(button) {
        const current = this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;
        this.count = this.count[button] === undefined ? {} : {
          [button]: Number(this.count[button]) + 1
        };
        return current;
      }
      getOnDown(button) {
        var _this_count_button;
        this.down = {
          [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== undefined ? _this_count_button : 0
        };
        var _this_count_button1;
        this.count = {
          [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== undefined ? _this_count_button1 : 0
        };
        return Number(this.count[button]) + 1;
      }
      getOnUp(button) {
        return this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;
      }
      reset() {
        this.count = {};
      }
      constructor() {
        _define_property(this, "down", {});
        _define_property(this, "count", {});
      }
    }());
  }
}
exports.Mouse = Mouse;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiaXNEaXNhYmxlZCIsImdldFRyZWVEaWZmIiwiZm9jdXMiLCJzZXRTZWxlY3Rpb25QZXJNb3VzZSIsIm1vZGlmeVNlbGVjdGlvblBlck1vdXNlIiwiYnV0dG9ucyIsInNoYXJlZCIsIl9kZWZpbmVfcHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiTW91c2UiLCJtb3ZlIiwiaW5zdGFuY2UiLCJwb3NpdGlvbiIsImlzUHJldmVudGVkIiwicHJldlBvc2l0aW9uIiwicHJldlRhcmdldCIsImdldFRhcmdldCIsImlzRGlmZmVyZW50UG9pbnRlclBvc2l0aW9uIiwibmV4dFRhcmdldCIsImluaXQiLCJnZXRFdmVudEluaXQiLCJsZWF2ZSIsImVudGVyIiwiZGlzcGF0Y2hVSUV2ZW50IiwiZm9yRWFjaCIsImVsIiwibW9kaWZ5U2VsZWN0aW5nIiwiZG93biIsImtleURlZiIsImJ1dHRvbiIsInVuZGVmaW5lZCIsInRhcmdldCIsImJ1dHRvbkRvd25UYXJnZXQiLCJkaXNhYmxlZCIsInN0YXJ0U2VsZWN0aW5nIiwiZGV0YWlsIiwiZm9jdXNFbGVtZW50IiwiZ2V0TW91c2VFdmVudEJ1dHRvbiIsInVwIiwibW91c2VVcEluaXQiLCJlbmRTZWxlY3RpbmciLCJjbGlja1RhcmdldCIsInJlc2V0Q2xpY2tDb3VudCIsImNsaWNrQ291bnQiLCJyZXNldCIsInR5cGUiLCJjb29yZHMiLCJnZXRCdXR0b25zIiwiZ2V0T25Eb3duIiwiZ2V0T25VcCIsImluY09uQ2xpY2siLCJfdGhpc19wb3NpdGlvbl90YXJnZXQiLCJjb25maWciLCJkb2N1bWVudCIsImJvZHkiLCJfdGhpc19wb3NpdGlvbl9jYXJldCIsIl90aGlzX3Bvc2l0aW9uX2NhcmV0MSIsInNlbGVjdGluZyIsInNldFNlbGVjdGlvblBlck1vdXNlRG93biIsIm5vZGUiLCJjYXJldCIsIm9mZnNldCIsIm1vZGlmeVNlbGVjdGlvblBlck1vdXNlTW92ZSIsImNvbnN0cnVjdG9yIiwiQnV0dG9ucyIsImN1cnJlbnQiLCJOdW1iZXIiLCJjb3VudCIsIl90aGlzX2NvdW50X2J1dHRvbiIsIl90aGlzX2NvdW50X2J1dHRvbjEiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsibW91c2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuLi8uLi9ldmVudC9iZWhhdmlvci9jbGljay5qcycpO1xucmVxdWlyZSgnLi4vLi4vZXZlbnQvYmVoYXZpb3IvY3V0LmpzJyk7XG5yZXF1aXJlKCcuLi8uLi9ldmVudC9iZWhhdmlvci9rZXlkb3duLmpzJyk7XG5yZXF1aXJlKCcuLi8uLi9ldmVudC9iZWhhdmlvci9rZXlwcmVzcy5qcycpO1xucmVxdWlyZSgnLi4vLi4vZXZlbnQvYmVoYXZpb3Iva2V5dXAuanMnKTtcbnJlcXVpcmUoJy4uLy4uL2V2ZW50L2JlaGF2aW9yL3Bhc3RlLmpzJyk7XG5yZXF1aXJlKCdAdGVzdGluZy1saWJyYXJ5L2RvbScpO1xucmVxdWlyZSgnLi4vLi4vdXRpbHMvZGF0YVRyYW5zZmVyL0NsaXBib2FyZC5qcycpO1xudmFyIGlzRGlzYWJsZWQgPSByZXF1aXJlKCcuLi8uLi91dGlscy9taXNjL2lzRGlzYWJsZWQuanMnKTtcbnZhciBnZXRUcmVlRGlmZiA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL21pc2MvZ2V0VHJlZURpZmYuanMnKTtcbnZhciBmb2N1cyA9IHJlcXVpcmUoJy4uLy4uL2V2ZW50L2ZvY3VzLmpzJyk7XG52YXIgc2V0U2VsZWN0aW9uUGVyTW91c2UgPSByZXF1aXJlKCcuLi8uLi9ldmVudC9zZWxlY3Rpb24vc2V0U2VsZWN0aW9uUGVyTW91c2UuanMnKTtcbnZhciBtb2RpZnlTZWxlY3Rpb25QZXJNb3VzZSA9IHJlcXVpcmUoJy4uLy4uL2V2ZW50L3NlbGVjdGlvbi9tb2RpZnlTZWxlY3Rpb25QZXJNb3VzZS5qcycpO1xudmFyIGJ1dHRvbnMgPSByZXF1aXJlKCcuL2J1dHRvbnMuanMnKTtcbnZhciBzaGFyZWQgPSByZXF1aXJlKCcuL3NoYXJlZC5qcycpO1xuXG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHRoZSBzaW5nbGUgXCJ2aXJ0dWFsXCIgbW91c2UgdGhhdCBtaWdodCBiZSBjb250cm9sbGVkIGJ5IG11bHRpcGxlIGRpZmZlcmVudCBwb2ludGVyIGRldmljZXMuXG4gKi8gY2xhc3MgTW91c2Uge1xuICAgIG1vdmUoaW5zdGFuY2UsIHBvc2l0aW9uLCAvKiogV2hldGhlciBgcHJldmVudERlZmF1bHQoKWAgaGFzIGJlZW4gY2FsbGVkIG9uIHRoZSBgcG9pbnRlcmRvd25gIGV2ZW50ICovIGlzUHJldmVudGVkKSB7XG4gICAgICAgIGNvbnN0IHByZXZQb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIGNvbnN0IHByZXZUYXJnZXQgPSB0aGlzLmdldFRhcmdldChpbnN0YW5jZSk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgaWYgKCFzaGFyZWQuaXNEaWZmZXJlbnRQb2ludGVyUG9zaXRpb24ocHJldlBvc2l0aW9uLCBwb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zdCBpbml0ID0gdGhpcy5nZXRFdmVudEluaXQoJ21vdXNlbW92ZScpO1xuICAgICAgICBjb25zdCBbbGVhdmUsIGVudGVyXSA9IGdldFRyZWVEaWZmLmdldFRyZWVEaWZmKHByZXZUYXJnZXQsIG5leHRUYXJnZXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVhdmU6ICgpPT57XG4gICAgICAgICAgICAgICAgaWYgKHByZXZUYXJnZXQgIT09IG5leHRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KHByZXZUYXJnZXQsICdtb3VzZW91dCcsIGluaXQpO1xuICAgICAgICAgICAgICAgICAgICBsZWF2ZS5mb3JFYWNoKChlbCk9Pmluc3RhbmNlLmRpc3BhdGNoVUlFdmVudChlbCwgJ21vdXNlbGVhdmUnLCBpbml0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudGVyOiAoKT0+e1xuICAgICAgICAgICAgICAgIGlmIChwcmV2VGFyZ2V0ICE9PSBuZXh0VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmRpc3BhdGNoVUlFdmVudChuZXh0VGFyZ2V0LCAnbW91c2VvdmVyJywgaW5pdCk7XG4gICAgICAgICAgICAgICAgICAgIGVudGVyLmZvckVhY2goKGVsKT0+aW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KGVsLCAnbW91c2VlbnRlcicsIGluaXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW92ZTogKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kaXNwYXRjaFVJRXZlbnQobmV4dFRhcmdldCwgJ21vdXNlbW92ZScsIGluaXQpO1xuICAgICAgICAgICAgICAgIHRoaXMubW9kaWZ5U2VsZWN0aW5nKGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZG93bihpbnN0YW5jZSwga2V5RGVmLCAvKiogV2hldGhlciBgcHJldmVudERlZmF1bHQoKWAgaGFzIGJlZW4gY2FsbGVkIG9uIHRoZSBgcG9pbnRlcmRvd25gIGV2ZW50ICovIGlzUHJldmVudGVkKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuYnV0dG9ucy5kb3duKGtleURlZik7XG4gICAgICAgIGlmIChidXR0b24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KGluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5idXR0b25Eb3duVGFyZ2V0W2J1dHRvbl0gPSB0YXJnZXQ7XG4gICAgICAgIGNvbnN0IGluaXQgPSB0aGlzLmdldEV2ZW50SW5pdCgnbW91c2Vkb3duJywga2V5RGVmLmJ1dHRvbik7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNEaXNhYmxlZC5pc0Rpc2FibGVkKHRhcmdldCk7XG4gICAgICAgIGlmICghaXNQcmV2ZW50ZWQgJiYgKGRpc2FibGVkIHx8IGluc3RhbmNlLmRpc3BhdGNoVUlFdmVudCh0YXJnZXQsICdtb3VzZWRvd24nLCBpbml0KSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRTZWxlY3RpbmcoaW5zdGFuY2UsIGluaXQuZGV0YWlsKTtcbiAgICAgICAgICAgIGZvY3VzLmZvY3VzRWxlbWVudCh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGlzYWJsZWQgJiYgYnV0dG9ucy5nZXRNb3VzZUV2ZW50QnV0dG9uKGtleURlZi5idXR0b24pID09PSAyKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5kaXNwYXRjaFVJRXZlbnQodGFyZ2V0LCAnY29udGV4dG1lbnUnLCB0aGlzLmdldEV2ZW50SW5pdCgnY29udGV4dG1lbnUnLCBrZXlEZWYuYnV0dG9uKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXAoaW5zdGFuY2UsIGtleURlZiwgLyoqIFdoZXRoZXIgYHByZXZlbnREZWZhdWx0KClgIGhhcyBiZWVuIGNhbGxlZCBvbiB0aGUgYHBvaW50ZXJkb3duYCBldmVudCAqLyBpc1ByZXZlbnRlZCkge1xuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmJ1dHRvbnMudXAoa2V5RGVmKTtcbiAgICAgICAgaWYgKGJ1dHRvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoaW5zdGFuY2UpO1xuICAgICAgICBpZiAoIWlzRGlzYWJsZWQuaXNEaXNhYmxlZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBpZiAoIWlzUHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW91c2VVcEluaXQgPSB0aGlzLmdldEV2ZW50SW5pdCgnbW91c2V1cCcsIGtleURlZi5idXR0b24pO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLmRpc3BhdGNoVUlFdmVudCh0YXJnZXQsICdtb3VzZXVwJywgbW91c2VVcEluaXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kU2VsZWN0aW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjbGlja1RhcmdldCA9IGdldFRyZWVEaWZmLmdldFRyZWVEaWZmKHRoaXMuYnV0dG9uRG93blRhcmdldFtidXR0b25dLCB0YXJnZXQpWzJdWzBdO1xuICAgICAgICAgICAgaWYgKGNsaWNrVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdCA9IHRoaXMuZ2V0RXZlbnRJbml0KCdjbGljaycsIGtleURlZi5idXR0b24pO1xuICAgICAgICAgICAgICAgIGlmIChpbml0LmRldGFpbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5kaXNwYXRjaFVJRXZlbnQoY2xpY2tUYXJnZXQsIGluaXQuYnV0dG9uID09PSAwID8gJ2NsaWNrJyA6ICdhdXhjbGljaycsIGluaXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdC5idXR0b24gPT09IDAgJiYgaW5pdC5kZXRhaWwgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmRpc3BhdGNoVUlFdmVudChjbGlja1RhcmdldCwgJ2RibGNsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0RXZlbnRJbml0KCdkYmxjbGljaycsIGtleURlZi5idXR0b24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogaW5pdC5kZXRhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2V0Q2xpY2tDb3VudCgpIHtcbiAgICAgICAgdGhpcy5jbGlja0NvdW50LnJlc2V0KCk7XG4gICAgfVxuICAgIGdldEV2ZW50SW5pdCh0eXBlLCBidXR0b24pIHtcbiAgICAgICAgY29uc3QgaW5pdCA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMucG9zaXRpb24uY29vcmRzXG4gICAgICAgIH07XG4gICAgICAgIGluaXQuYnV0dG9uID0gYnV0dG9ucy5nZXRNb3VzZUV2ZW50QnV0dG9uKGJ1dHRvbik7XG4gICAgICAgIGluaXQuYnV0dG9ucyA9IHRoaXMuYnV0dG9ucy5nZXRCdXR0b25zKCk7XG4gICAgICAgIGlmICh0eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgICAgICAgaW5pdC5kZXRhaWwgPSB0aGlzLmNsaWNrQ291bnQuZ2V0T25Eb3duKGluaXQuYnV0dG9uKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbW91c2V1cCcpIHtcbiAgICAgICAgICAgIGluaXQuZGV0YWlsID0gdGhpcy5jbGlja0NvdW50LmdldE9uVXAoaW5pdC5idXR0b24pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdjbGljaycgfHwgdHlwZSA9PT0gJ2F1eGNsaWNrJykge1xuICAgICAgICAgICAgaW5pdC5kZXRhaWwgPSB0aGlzLmNsaWNrQ291bnQuaW5jT25DbGljayhpbml0LmJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluaXQ7XG4gICAgfVxuICAgIGdldFRhcmdldChpbnN0YW5jZSkge1xuICAgICAgICB2YXIgX3RoaXNfcG9zaXRpb25fdGFyZ2V0O1xuICAgICAgICByZXR1cm4gKF90aGlzX3Bvc2l0aW9uX3RhcmdldCA9IHRoaXMucG9zaXRpb24udGFyZ2V0KSAhPT0gbnVsbCAmJiBfdGhpc19wb3NpdGlvbl90YXJnZXQgIT09IHVuZGVmaW5lZCA/IF90aGlzX3Bvc2l0aW9uX3RhcmdldCA6IGluc3RhbmNlLmNvbmZpZy5kb2N1bWVudC5ib2R5O1xuICAgIH1cbiAgICBzdGFydFNlbGVjdGluZyhpbnN0YW5jZSwgY2xpY2tDb3VudCkge1xuICAgICAgICB2YXIgX3RoaXNfcG9zaXRpb25fY2FyZXQsIF90aGlzX3Bvc2l0aW9uX2NhcmV0MTtcbiAgICAgICAgLy8gVE9ETzogc3VwcG9ydCBleHRlbmRpbmcgcmFuZ2UgKHNoaWZ0KVxuICAgICAgICB0aGlzLnNlbGVjdGluZyA9IHNldFNlbGVjdGlvblBlck1vdXNlLnNldFNlbGVjdGlvblBlck1vdXNlRG93bih7XG4gICAgICAgICAgICBkb2N1bWVudDogaW5zdGFuY2UuY29uZmlnLmRvY3VtZW50LFxuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmdldFRhcmdldChpbnN0YW5jZSksXG4gICAgICAgICAgICBub2RlOiAoX3RoaXNfcG9zaXRpb25fY2FyZXQgPSB0aGlzLnBvc2l0aW9uLmNhcmV0KSA9PT0gbnVsbCB8fCBfdGhpc19wb3NpdGlvbl9jYXJldCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogX3RoaXNfcG9zaXRpb25fY2FyZXQubm9kZSxcbiAgICAgICAgICAgIG9mZnNldDogKF90aGlzX3Bvc2l0aW9uX2NhcmV0MSA9IHRoaXMucG9zaXRpb24uY2FyZXQpID09PSBudWxsIHx8IF90aGlzX3Bvc2l0aW9uX2NhcmV0MSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogX3RoaXNfcG9zaXRpb25fY2FyZXQxLm9mZnNldCxcbiAgICAgICAgICAgIGNsaWNrQ291bnRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vZGlmeVNlbGVjdGluZyhpbnN0YW5jZSkge1xuICAgICAgICB2YXIgX3RoaXNfcG9zaXRpb25fY2FyZXQsIF90aGlzX3Bvc2l0aW9uX2NhcmV0MTtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1vZGlmeVNlbGVjdGlvblBlck1vdXNlLm1vZGlmeVNlbGVjdGlvblBlck1vdXNlTW92ZSh0aGlzLnNlbGVjdGluZywge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGluc3RhbmNlLmNvbmZpZy5kb2N1bWVudCxcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy5nZXRUYXJnZXQoaW5zdGFuY2UpLFxuICAgICAgICAgICAgbm9kZTogKF90aGlzX3Bvc2l0aW9uX2NhcmV0ID0gdGhpcy5wb3NpdGlvbi5jYXJldCkgPT09IG51bGwgfHwgX3RoaXNfcG9zaXRpb25fY2FyZXQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IF90aGlzX3Bvc2l0aW9uX2NhcmV0Lm5vZGUsXG4gICAgICAgICAgICBvZmZzZXQ6IChfdGhpc19wb3NpdGlvbl9jYXJldDEgPSB0aGlzLnBvc2l0aW9uLmNhcmV0KSA9PT0gbnVsbCB8fCBfdGhpc19wb3NpdGlvbl9jYXJldDEgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IF90aGlzX3Bvc2l0aW9uX2NhcmV0MS5vZmZzZXRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuZFNlbGVjdGluZygpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RpbmcgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJwb3NpdGlvblwiLCB7fSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJidXR0b25zXCIsIG5ldyBidXR0b25zLkJ1dHRvbnMoKSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJzZWxlY3RpbmdcIiwgdW5kZWZpbmVkKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcImJ1dHRvbkRvd25UYXJnZXRcIiwge30pO1xuICAgICAgICAvLyBBY2NvcmRpbmcgdG8gc3BlYyB0aGUgYGRldGFpbGAgb24gY2xpY2sgZXZlbnRzIHNob3VsZCBiZSB0aGUgbnVtYmVyXG4gICAgICAgIC8vIG9mICpjb25zZWN1dGl2ZSogY2xpY2tzIHdpdGggYSBzcGVjaWZpYyBidXR0b24uXG4gICAgICAgIC8vIE9uIGBtb3VzZWRvd25gIGFuZCBgbW91c2V1cGAgaXQgc2hvdWxkIGJlIHRoaXMgbnVtYmVyIGluY3JlYXNlZCBieSBvbmUuXG4gICAgICAgIC8vIEJ1dCB0aGUgYnJvd3NlcnMgZG9uJ3QgaW1wbGVtZW50IGl0IHRoaXMgd2F5LlxuICAgICAgICAvLyBJZiBhbm90aGVyIGJ1dHRvbiBpcyBwcmVzc2VkLFxuICAgICAgICAvLyAgIGluIFdlYmtpdDogdGhlIGBtb3VzZXVwYCBvbiB0aGUgcHJldmlvdXNseSBwcmVzc2VkIGJ1dHRvbiBoYXMgYGRldGFpbDogMGAgYW5kIG5vIGBjbGlja2AvYGF1eGNsaWNrYC5cbiAgICAgICAgLy8gICBpbiBHZWNrbzogdGhlIGBtb3VzZXVwYCBhbmQgY2xpY2sgZXZlbnRzIGhhdmUgdGhlIHNhbWUgZGV0YWlsIGFzIHRoZSBgbW91c2Vkb3duYC5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBkZWxheSB3aGlsZSBhIGJ1dHRvbiBpcyBwcmVzc2VkLFxuICAgICAgICAvLyB0aGUgYG1vdXNldXBgIGFuZCBgY2xpY2tgIGFyZSBub3JtYWwsIGJ1dCBhIGZvbGxvd2luZyBgbW91c2Vkb3duYCBzdGFydHMgYSBuZXcgY2xpY2sgY291bnQuXG4gICAgICAgIC8vIFdlJ2xsIGZvbGxvdyB0aGUgbWluaW1hbCBpbXBsZW1lbnRhdGlvbiBvZiBXZWJraXQuXG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJjbGlja0NvdW50XCIsIG5ldyBjbGFzcyB7XG4gICAgICAgICAgICBpbmNPbkNsaWNrKGJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmRvd25bYnV0dG9uXSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogTnVtYmVyKHRoaXMuZG93bltidXR0b25dKSArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IHRoaXMuY291bnRbYnV0dG9uXSA9PT0gdW5kZWZpbmVkID8ge30gOiB7XG4gICAgICAgICAgICAgICAgICAgIFtidXR0b25dOiBOdW1iZXIodGhpcy5jb3VudFtidXR0b25dKSArIDFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0T25Eb3duKGJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpc19jb3VudF9idXR0b247XG4gICAgICAgICAgICAgICAgdGhpcy5kb3duID0ge1xuICAgICAgICAgICAgICAgICAgICBbYnV0dG9uXTogKF90aGlzX2NvdW50X2J1dHRvbiA9IHRoaXMuY291bnRbYnV0dG9uXSkgIT09IG51bGwgJiYgX3RoaXNfY291bnRfYnV0dG9uICE9PSB1bmRlZmluZWQgPyBfdGhpc19jb3VudF9idXR0b24gOiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXNfY291bnRfYnV0dG9uMTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBbYnV0dG9uXTogKF90aGlzX2NvdW50X2J1dHRvbjEgPSB0aGlzLmNvdW50W2J1dHRvbl0pICE9PSBudWxsICYmIF90aGlzX2NvdW50X2J1dHRvbjEgIT09IHVuZGVmaW5lZCA/IF90aGlzX2NvdW50X2J1dHRvbjEgOiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuY291bnRbYnV0dG9uXSkgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0T25VcChidXR0b24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb3duW2J1dHRvbl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IE51bWJlcih0aGlzLmRvd25bYnV0dG9uXSkgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzZXQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwiZG93blwiLCB7fSk7XG4gICAgICAgICAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcImNvdW50XCIsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuTW91c2UgPSBNb3VzZTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsT0FBTyxnQ0FBZ0MsQ0FBQztBQUN4Q0EsT0FBTyw4QkFBOEIsQ0FBQztBQUN0Q0EsT0FBTyxrQ0FBa0MsQ0FBQztBQUMxQ0EsT0FBTyxtQ0FBbUMsQ0FBQztBQUMzQ0EsT0FBTyxnQ0FBZ0MsQ0FBQztBQUN4Q0EsT0FBTyxn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