{"version":3,"names":["_react","_interopRequireDefault","require","_react2","_userEvent","_jsxRuntime","e","__esModule","default","renderWithProviders","ui","options","initialState","renderOptions","Wrapper","children","jsx","StrictMode","user","userEvent","setup","render","wrapper","exports","fillForm","fields","selector","value","Object","entries","input","screen","getByTestId","getByLabelText","getByPlaceholderText","type","selectOptions","checked","click","clear","expectValidationError","fieldName","expectedMessage","errorElement","getByText","expect","toBeInTheDocument","toHaveTextContent","expectFormValid","errorElements","queryAllByRole","length","toBe","submitForm","submitButtonText","submitButton","getByRole","name","waitForElementToBeRemoved","waitFor","queryByTestId","not","expectNotification","message","notification","exact","toHaveClass","expectTableRows","tableTestId","expectedCount","table","rows","within","getAllByRole","expectCellContent","rowIndex","columnIndex","expectedContent","cells","changeFilter","filterName","filter","tagName","expectLoading","expectNotLoading","queryByText","openModal","triggerButtonText","button","closeModal","closeButton","queryByRole","confirmModal","confirmText","confirmButton","cancelModal","cancelText","cancelButton"],"sources":["testUtils.js"],"sourcesContent":["// tests/utils/testUtils.js\r\n// Utilitaires pour les tests\r\n\r\nimport React from 'react';\r\nimport { render, screen, fireEvent, waitFor, within } from '@testing-library/react';\r\nimport userEvent from '@testing-library/user-event';\r\n\r\n/**\r\n * Wrapper personnalisé pour les tests avec providers\r\n */\r\nexport const renderWithProviders = (ui, options = {}) => {\r\n  const { initialState = {}, ...renderOptions } = options;\r\n  \r\n  // Wrapper avec les providers nécessaires\r\n  const Wrapper = ({ children }) => {\r\n    return (\r\n      <React.StrictMode>\r\n        {children}\r\n      </React.StrictMode>\r\n    );\r\n  };\r\n  \r\n  return {\r\n    user: userEvent.setup(),\r\n    ...render(ui, { wrapper: Wrapper, ...renderOptions })\r\n  };\r\n};\r\n\r\n/**\r\n * Helper pour remplir un formulaire\r\n */\r\nexport const fillForm = async (user, fields) => {\r\n  for (const [selector, value] of Object.entries(fields)) {\r\n    const input = screen.getByTestId(selector) || \r\n                  screen.getByLabelText(selector) ||\r\n                  screen.getByPlaceholderText(selector);\r\n    \r\n    if (input.type === 'select-one') {\r\n      await user.selectOptions(input, value);\r\n    } else if (input.type === 'checkbox') {\r\n      if (value && !input.checked) {\r\n        await user.click(input);\r\n      } else if (!value && input.checked) {\r\n        await user.click(input);\r\n      }\r\n    } else {\r\n      await user.clear(input);\r\n      await user.type(input, value);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Helper pour vérifier les erreurs de validation\r\n */\r\nexport const expectValidationError = (fieldName, expectedMessage) => {\r\n  const errorElement = screen.getByTestId(`error-${fieldName}`) ||\r\n                       screen.getByText(expectedMessage);\r\n  expect(errorElement).toBeInTheDocument();\r\n  expect(errorElement).toHaveTextContent(expectedMessage);\r\n};\r\n\r\n/**\r\n * Helper pour vérifier qu'un formulaire est valide\r\n */\r\nexport const expectFormValid = () => {\r\n  const errorElements = screen.queryAllByRole('alert');\r\n  expect(errorElements.length).toBe(0);\r\n};\r\n\r\n/**\r\n * Helper pour simuler une soumission de formulaire\r\n */\r\nexport const submitForm = async (user, submitButtonText = 'Enregistrer') => {\r\n  const submitButton = screen.getByRole('button', { name: submitButtonText }) ||\r\n                       screen.getByText(submitButtonText);\r\n  await user.click(submitButton);\r\n};\r\n\r\n/**\r\n * Helper pour attendre qu'un élément disparaisse\r\n */\r\nexport const waitForElementToBeRemoved = async (selector) => {\r\n  await waitFor(() => {\r\n    expect(screen.queryByTestId(selector)).not.toBeInTheDocument();\r\n  });\r\n};\r\n\r\n/**\r\n * Helper pour vérifier une notification\r\n */\r\nexport const expectNotification = async (message, type = 'success') => {\r\n  await waitFor(() => {\r\n    const notification = screen.getByRole('alert') || \r\n                         screen.getByText(message, { exact: false });\r\n    expect(notification).toBeInTheDocument();\r\n    if (type) {\r\n      expect(notification).toHaveClass(type);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Helper pour tester un tableau de données\r\n */\r\nexport const expectTableRows = (tableTestId, expectedCount) => {\r\n  const table = screen.getByTestId(tableTestId);\r\n  const rows = within(table).getAllByRole('row');\r\n  // -1 pour exclure la ligne d'en-tête\r\n  expect(rows.length - 1).toBe(expectedCount);\r\n};\r\n\r\n/**\r\n * Helper pour tester le contenu d'une cellule de tableau\r\n */\r\nexport const expectCellContent = (tableTestId, rowIndex, columnIndex, expectedContent) => {\r\n  const table = screen.getByTestId(tableTestId);\r\n  const rows = within(table).getAllByRole('row');\r\n  const cells = within(rows[rowIndex + 1]).getAllByRole('cell'); // +1 pour sauter l'en-tête\r\n  expect(cells[columnIndex]).toHaveTextContent(expectedContent);\r\n};\r\n\r\n/**\r\n * Helper pour simuler un changement de filtre\r\n */\r\nexport const changeFilter = async (user, filterName, value) => {\r\n  const filter = screen.getByTestId(`filter-${filterName}`) ||\r\n                 screen.getByLabelText(filterName);\r\n  \r\n  if (filter.tagName === 'SELECT') {\r\n    await user.selectOptions(filter, value);\r\n  } else {\r\n    await user.clear(filter);\r\n    await user.type(filter, value);\r\n  }\r\n};\r\n\r\n/**\r\n * Helper pour vérifier le loading state\r\n */\r\nexport const expectLoading = () => {\r\n  expect(\r\n    screen.getByTestId('loading-spinner') ||\r\n    screen.getByText(/chargement/i) ||\r\n    screen.getByRole('progressbar')\r\n  ).toBeInTheDocument();\r\n};\r\n\r\n/**\r\n * Helper pour vérifier que le loading est terminé\r\n */\r\nexport const expectNotLoading = async () => {\r\n  await waitFor(() => {\r\n    expect(screen.queryByTestId('loading-spinner')).not.toBeInTheDocument();\r\n    expect(screen.queryByText(/chargement/i)).not.toBeInTheDocument();\r\n  });\r\n};\r\n\r\n/**\r\n * Helper pour ouvrir un modal\r\n */\r\nexport const openModal = async (user, triggerButtonText) => {\r\n  const button = screen.getByRole('button', { name: triggerButtonText }) ||\r\n                 screen.getByText(triggerButtonText);\r\n  await user.click(button);\r\n  \r\n  await waitFor(() => {\r\n    expect(screen.getByRole('dialog')).toBeInTheDocument();\r\n  });\r\n};\r\n\r\n/**\r\n * Helper pour fermer un modal\r\n */\r\nexport const closeModal = async (user) => {\r\n  const closeButton = screen.getByRole('button', { name: /fermer/i }) ||\r\n                      screen.getByLabelText('Fermer');\r\n  await user.click(closeButton);\r\n  \r\n  await waitFor(() => {\r\n    expect(screen.queryByRole('dialog')).not.toBeInTheDocument();\r\n  });\r\n};\r\n\r\n/**\r\n * Helper pour confirmer un modal de confirmation\r\n */\r\nexport const confirmModal = async (user, confirmText = 'Confirmer') => {\r\n  const confirmButton = screen.getByRole('button', { name: confirmText });\r\n  await user.click(confirmButton);\r\n};\r\n\r\n/**\r\n * Helper pour annuler un modal de confirmation\r\n */\r\nexport const cancelModal = async (user, cancelText = 'Annuler') => {\r\n  const cancelButton = screen.getByRole('button', { name: cancelText });\r\n  await user.click(cancelButton);\r\n};\r\n\r\n// Export des fonctions de testing-library pour faciliter l'import\r\nexport { screen, fireEvent, waitFor, within };"],"mappings":"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","ignoreList":[]}