50e21e375fb4d4d4155c9b2790d8ea72
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFactureActions = exports.default = void 0;
var _react = require("react");
var _useApiCall = require("../../../hooks/useApiCall");
var _createLogger = require("../../../utils/createLogger");
var _FactureService = _interopRequireDefault(require("../../../services/FactureService"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
// src/components/factures/hooks/useFactureActions.js
// ‚úÖ VERSION REFACTORIS√âE - Uniquement FactureService
// ‚úÖ Pas d'appels √† useTarifActions ou ClientService
// ‚úÖ L'enrichissement des donn√©es se fait ailleurs (useFactureFormActions ou helpers)

/**
 * Hook centralis√© pour toutes les actions li√©es aux factures
 * ‚úÖ Responsabilit√© unique : uniquement les appels √† FactureService
 * ‚úÖ Pas d'appels √† d'autres services (Client, Tarification)
 * 
 * @returns {Object} Actions disponibles pour les factures
 */
const useFactureActions = () => {
  const log = (0, _createLogger.createLogger)('useFactureActions');
  const {
    execute: executeApi
  } = (0, _useApiCall.useApiCall)();

  // ‚úÖ Cr√©er le service en interne
  const factureService = (0, _react.useMemo)(() => new _FactureService.default(), []);

  // ========================================
  // ACTIONS CRUD FACTURES
  // ========================================

  /**
   * Charge toutes les factures pour une ann√©e donn√©e
   * @param {number} annee - Ann√©e des factures √† charger
   * @returns {Promise<Array>} Factures avec √©tats calcul√©s
   */
  const chargerFactures = (0, _react.useCallback)(async annee => {
    return await executeApi(async () => {
      log.debug(`üì• Chargement des factures pour l'ann√©e ${annee}...`);
      const facturesData = await factureService.chargerFactures(annee);
      log.debug(`üîÑ Enrichissement de ${facturesData.length} factures avec √©tats calcul√©s...`);
      const facturesEnrichies = await factureService.enrichirFacturesAvecEtatAffichage(facturesData);
      log.debug(`‚úÖ ${facturesEnrichies.length} factures charg√©es`);
      return facturesEnrichies;
    }, null, error => {
      log.error('‚ùå Erreur chargement factures:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Charge une facture par son ID (donn√©es brutes sans enrichissement tarification)
   * @param {number} id - ID de la facture
   * @returns {Promise<Object>} Facture brute depuis l'API
   */
  const chargerFacture = (0, _react.useCallback)(async id => {
    return await executeApi(async () => {
      log.debug('üì• Chargement facture:', id);
      const factureData = await factureService.getFacture(id);
      log.debug("‚úÖ Facture charg√©e:", factureData?.numeroFacture);
      if (!factureData) {
        throw new Error('Aucune donn√©e de facture trouv√©e');
      }
      return factureData;
    }, null, error => {
      log.error('‚ùå Erreur chargement facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * R√©cup√®re l'URL d'une facture
   * @param {number} idFacture - ID de la facture
   * @returns {Promise<string>} URL de la facture
   */
  const getFactureUrl = (0, _react.useCallback)(async idFacture => {
    return await executeApi(async () => {
      log.debug('üîó R√©cup√©ration URL facture:', idFacture);
      const result = await factureService.getFactureUrl(idFacture);
      log.debug('‚úÖ URL r√©cup√©r√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur r√©cup√©ration URL:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Imprime une facture
   * @param {number} idFacture - ID de la facture
   * @returns {Promise<Object>} R√©sultat de l'impression
   */
  const imprimerFacture = (0, _react.useCallback)(async idFacture => {
    return await executeApi(async () => {
      log.debug('üñ®Ô∏è Impression facture:', idFacture);
      const result = await factureService.imprimerFacture(idFacture);
      log.debug('‚úÖ Facture imprim√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur impression:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Envoie une facture par email
   * @param {number} idFacture - ID de la facture
   * @param {Object} emailData - Donn√©es de l'email
   * @returns {Promise<Object>} R√©sultat de l'envoi
   */
  const envoyerFactureParEmail = (0, _react.useCallback)(async (idFacture, emailData) => {
    return await executeApi(async () => {
      log.debug('üìß Envoi email facture:', idFacture);
      const result = await factureService.envoyerFactureParEmail(idFacture, emailData);
      log.debug('‚úÖ Email envoy√©');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur envoi email:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Cr√©e une nouvelle facture
   * @param {Object} factureData - Donn√©es de la facture √† cr√©er
   * @returns {Promise<Object>} Facture cr√©√©e
   */
  const creerFacture = (0, _react.useCallback)(async factureData => {
    return await executeApi(async () => {
      log.debug('üìù Cr√©ation facture:', factureData);
      const result = await factureService.createFacture(factureData);
      log.debug('‚úÖ Facture cr√©√©e:', result);
      return result;
    }, null, error => {
      log.error('‚ùå Erreur cr√©ation facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Met √† jour une facture existante
   * @param {number} id - ID de la facture
   * @param {Object} factureData - Nouvelles donn√©es
   * @returns {Promise<Object>} Facture mise √† jour
   */
  const modifierFacture = (0, _react.useCallback)(async (id, factureData) => {
    return await executeApi(async () => {
      log.debug('üîÑ Modification facture:', id);
      const result = await factureService.updateFacture(id, factureData);
      log.debug('‚úÖ Facture modifi√©e:', result);
      return result;
    }, null, error => {
      log.error('‚ùå Erreur modification facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Supprime une facture
   * @param {number} id - ID de la facture √† supprimer
   * @returns {Promise<boolean>} Succ√®s de la suppression
   */
  const supprimerFacture = (0, _react.useCallback)(async id => {
    return await executeApi(async () => {
      log.debug('üóëÔ∏è Suppression facture:', id);
      await factureService.deleteFacture(id);
      log.debug('‚úÖ Facture supprim√©e');
      return true;
    }, null, error => {
      log.error('‚ùå Erreur suppression facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Marque une facture comme pay√©e
   * @param {number} id - ID de la facture
   * @param {Object} paiementData - Donn√©es du paiement
   * @returns {Promise<Object>} Facture mise √† jour
   */
  const marquerCommePayee = (0, _react.useCallback)(async (id, paiementData) => {
    return await executeApi(async () => {
      log.debug('üí∞ Marquage facture comme pay√©e:', id);
      const result = await factureService.marquerCommePayee(id, paiementData);
      log.debug('‚úÖ Facture marqu√©e comme pay√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur marquage paiement:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Annule une facture
   * @param {number} id - ID de la facture
   * @returns {Promise<Object>} Facture annul√©e
   */
  const annulerFacture = (0, _react.useCallback)(async id => {
    return await executeApi(async () => {
      log.debug('üö´ Annulation facture:', id);
      const result = await factureService.annulerFacture(id);
      log.debug('‚úÖ Facture annul√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur annulation facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Marque une facture comme imprim√©e
   * @param {number} id - ID de la facture
   * @returns {Promise<Object>} Facture mise √† jour
   */
  const marquerCommeImprimee = (0, _react.useCallback)(async id => {
    return await executeApi(async () => {
      log.debug('üñ®Ô∏è Marquage facture comme imprim√©e:', id);
      const result = await factureService.marquerCommeImprimee(id);
      log.debug('‚úÖ Facture marqu√©e comme imprim√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur marquage impression:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Marque une facture comme envoy√©e
   * @param {number} id - ID de la facture
   * @returns {Promise<Object>} Facture mise √† jour
   */
  const marquerCommeEnvoyee = (0, _react.useCallback)(async id => {
    return await executeApi(async () => {
      log.debug('üìß Marquage facture comme envoy√©e:', id);
      const result = await factureService.marquerCommeEnvoyee(id);
      log.debug('‚úÖ Facture marqu√©e comme envoy√©e');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur marquage envoi:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * R√©cup√®re le prochain num√©ro de facture
   * @param {number} annee - Ann√©e
   * @returns {Promise<string>} Prochain num√©ro de facture
   */
  const getProchainNumeroFacture = (0, _react.useCallback)(async annee => {
    return await executeApi(async () => {
      log.debug('üî¢ R√©cup√©ration prochain num√©ro pour ann√©e:', annee);
      const result = await factureService.getProchainNumeroFacture(annee);
      log.debug('‚úÖ Prochain num√©ro r√©cup√©r√©:', result);
      return result;
    }, null, error => {
      log.error('‚ùå Erreur r√©cup√©ration num√©ro facture:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  // ========================================
  // UTILITAIRES
  // ========================================

  /**
   * Enrichit les factures avec les √©tats d'affichage
   * @param {Array} factures - Factures √† enrichir
   * @returns {Promise<Array>} Factures enrichies
   */
  const enrichirFacturesAvecEtat = (0, _react.useCallback)(async factures => {
    return await executeApi(async () => {
      log.debug(`üîÑ Enrichissement de ${factures.length} factures avec √©tats...`);
      const result = await factureService.enrichirFacturesAvecEtatAffichage(factures);
      log.debug('‚úÖ Factures enrichies avec √©tats');
      return result;
    }, null, error => {
      log.error('‚ùå Erreur enrichissement factures:', error);
      throw error;
    });
  }, [factureService, executeApi, log]);

  /**
   * Vide le cache des factures
   */
  const clearCache = (0, _react.useCallback)(() => {
    log.debug('üóëÔ∏è Vidage du cache des factures');
    if (factureService._clearCache) {
      factureService._clearCache();
    }
    log.debug('‚úÖ Cache vid√©');
  }, [factureService, log]);

  // ========================================
  // RETOUR DE TOUTES LES ACTIONS
  // ========================================

  return (0, _react.useMemo)(() => ({
    // Actions CRUD
    chargerFactures,
    chargerFacture,
    creerFacture,
    modifierFacture,
    supprimerFacture,
    // Actions d'√©tat
    marquerCommePayee,
    annulerFacture,
    marquerCommeImprimee,
    marquerCommeEnvoyee,
    // Actions documents
    getFactureUrl,
    imprimerFacture,
    envoyerFactureParEmail,
    // Num√©rotation
    getProchainNumeroFacture,
    // Utilitaires
    enrichirFacturesAvecEtat,
    clearCache
  }), [chargerFactures, chargerFacture, creerFacture, modifierFacture, supprimerFacture, marquerCommePayee, annulerFacture, marquerCommeImprimee, marquerCommeEnvoyee, getFactureUrl, imprimerFacture, envoyerFactureParEmail, getProchainNumeroFacture, enrichirFacturesAvecEtat, clearCache]);
};
exports.useFactureActions = useFactureActions;
var _default = exports.default = useFactureActions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3VzZUFwaUNhbGwiLCJfY3JlYXRlTG9nZ2VyIiwiX0ZhY3R1cmVTZXJ2aWNlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInVzZUZhY3R1cmVBY3Rpb25zIiwibG9nIiwiY3JlYXRlTG9nZ2VyIiwiZXhlY3V0ZSIsImV4ZWN1dGVBcGkiLCJ1c2VBcGlDYWxsIiwiZmFjdHVyZVNlcnZpY2UiLCJ1c2VNZW1vIiwiRmFjdHVyZVNlcnZpY2UiLCJjaGFyZ2VyRmFjdHVyZXMiLCJ1c2VDYWxsYmFjayIsImFubmVlIiwiZGVidWciLCJmYWN0dXJlc0RhdGEiLCJsZW5ndGgiLCJmYWN0dXJlc0VucmljaGllcyIsImVucmljaGlyRmFjdHVyZXNBdmVjRXRhdEFmZmljaGFnZSIsImVycm9yIiwiY2hhcmdlckZhY3R1cmUiLCJpZCIsImZhY3R1cmVEYXRhIiwiZ2V0RmFjdHVyZSIsIm51bWVyb0ZhY3R1cmUiLCJFcnJvciIsImdldEZhY3R1cmVVcmwiLCJpZEZhY3R1cmUiLCJyZXN1bHQiLCJpbXByaW1lckZhY3R1cmUiLCJlbnZveWVyRmFjdHVyZVBhckVtYWlsIiwiZW1haWxEYXRhIiwiY3JlZXJGYWN0dXJlIiwiY3JlYXRlRmFjdHVyZSIsIm1vZGlmaWVyRmFjdHVyZSIsInVwZGF0ZUZhY3R1cmUiLCJzdXBwcmltZXJGYWN0dXJlIiwiZGVsZXRlRmFjdHVyZSIsIm1hcnF1ZXJDb21tZVBheWVlIiwicGFpZW1lbnREYXRhIiwiYW5udWxlckZhY3R1cmUiLCJtYXJxdWVyQ29tbWVJbXByaW1lZSIsIm1hcnF1ZXJDb21tZUVudm95ZWUiLCJnZXRQcm9jaGFpbk51bWVyb0ZhY3R1cmUiLCJlbnJpY2hpckZhY3R1cmVzQXZlY0V0YXQiLCJmYWN0dXJlcyIsImNsZWFyQ2FjaGUiLCJfY2xlYXJDYWNoZSIsImV4cG9ydHMiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbInVzZUZhY3R1cmVBY3Rpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2ZhY3R1cmVzL2hvb2tzL3VzZUZhY3R1cmVBY3Rpb25zLmpzXHJcbi8vIOKchSBWRVJTSU9OIFJFRkFDVE9SSVPDiUUgLSBVbmlxdWVtZW50IEZhY3R1cmVTZXJ2aWNlXHJcbi8vIOKchSBQYXMgZCdhcHBlbHMgw6AgdXNlVGFyaWZBY3Rpb25zIG91IENsaWVudFNlcnZpY2VcclxuLy8g4pyFIEwnZW5yaWNoaXNzZW1lbnQgZGVzIGRvbm7DqWVzIHNlIGZhaXQgYWlsbGV1cnMgKHVzZUZhY3R1cmVGb3JtQWN0aW9ucyBvdSBoZWxwZXJzKVxyXG5cclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUFwaUNhbGwgfSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VBcGlDYWxsJztcclxuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvY3JlYXRlTG9nZ2VyJztcclxuaW1wb3J0IEZhY3R1cmVTZXJ2aWNlIGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL0ZhY3R1cmVTZXJ2aWNlJztcclxuXHJcbi8qKlxyXG4gKiBIb29rIGNlbnRyYWxpc8OpIHBvdXIgdG91dGVzIGxlcyBhY3Rpb25zIGxpw6llcyBhdXggZmFjdHVyZXNcclxuICog4pyFIFJlc3BvbnNhYmlsaXTDqSB1bmlxdWUgOiB1bmlxdWVtZW50IGxlcyBhcHBlbHMgw6AgRmFjdHVyZVNlcnZpY2VcclxuICog4pyFIFBhcyBkJ2FwcGVscyDDoCBkJ2F1dHJlcyBzZXJ2aWNlcyAoQ2xpZW50LCBUYXJpZmljYXRpb24pXHJcbiAqIFxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBY3Rpb25zIGRpc3BvbmlibGVzIHBvdXIgbGVzIGZhY3R1cmVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdXNlRmFjdHVyZUFjdGlvbnMgPSAoKSA9PiB7XHJcbiAgY29uc3QgbG9nID0gY3JlYXRlTG9nZ2VyKCd1c2VGYWN0dXJlQWN0aW9ucycpO1xyXG4gIGNvbnN0IHsgZXhlY3V0ZTogZXhlY3V0ZUFwaSB9ID0gdXNlQXBpQ2FsbCgpO1xyXG5cclxuICAvLyDinIUgQ3LDqWVyIGxlIHNlcnZpY2UgZW4gaW50ZXJuZVxyXG4gIGNvbnN0IGZhY3R1cmVTZXJ2aWNlID0gdXNlTWVtbygoKSA9PiBuZXcgRmFjdHVyZVNlcnZpY2UoKSwgW10pO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gQUNUSU9OUyBDUlVEIEZBQ1RVUkVTXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBDaGFyZ2UgdG91dGVzIGxlcyBmYWN0dXJlcyBwb3VyIHVuZSBhbm7DqWUgZG9ubsOpZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbm5lZSAtIEFubsOpZSBkZXMgZmFjdHVyZXMgw6AgY2hhcmdlclxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gRmFjdHVyZXMgYXZlYyDDqXRhdHMgY2FsY3Vsw6lzXHJcbiAgICovXHJcbiAgY29uc3QgY2hhcmdlckZhY3R1cmVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKGFubmVlKSA9PiB7XHJcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUFwaShcclxuICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxvZy5kZWJ1Zyhg8J+TpSBDaGFyZ2VtZW50IGRlcyBmYWN0dXJlcyBwb3VyIGwnYW5uw6llICR7YW5uZWV9Li4uYCk7XHJcbiAgICAgICAgY29uc3QgZmFjdHVyZXNEYXRhID0gYXdhaXQgZmFjdHVyZVNlcnZpY2UuY2hhcmdlckZhY3R1cmVzKGFubmVlKTtcclxuICAgICAgICBcclxuICAgICAgICBsb2cuZGVidWcoYPCflIQgRW5yaWNoaXNzZW1lbnQgZGUgJHtmYWN0dXJlc0RhdGEubGVuZ3RofSBmYWN0dXJlcyBhdmVjIMOpdGF0cyBjYWxjdWzDqXMuLi5gKTtcclxuICAgICAgICBjb25zdCBmYWN0dXJlc0VucmljaGllcyA9IGF3YWl0IGZhY3R1cmVTZXJ2aWNlLmVucmljaGlyRmFjdHVyZXNBdmVjRXRhdEFmZmljaGFnZShmYWN0dXJlc0RhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZy5kZWJ1Zyhg4pyFICR7ZmFjdHVyZXNFbnJpY2hpZXMubGVuZ3RofSBmYWN0dXJlcyBjaGFyZ8OpZXNgKTtcclxuICAgICAgICByZXR1cm4gZmFjdHVyZXNFbnJpY2hpZXM7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBjaGFyZ2VtZW50IGZhY3R1cmVzOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9LCBbZmFjdHVyZVNlcnZpY2UsIGV4ZWN1dGVBcGksIGxvZ10pO1xyXG5cclxuICAvKipcclxuICAgKiBDaGFyZ2UgdW5lIGZhY3R1cmUgcGFyIHNvbiBJRCAoZG9ubsOpZXMgYnJ1dGVzIHNhbnMgZW5yaWNoaXNzZW1lbnQgdGFyaWZpY2F0aW9uKVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIElEIGRlIGxhIGZhY3R1cmVcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBGYWN0dXJlIGJydXRlIGRlcHVpcyBsJ0FQSVxyXG4gICAqL1xyXG4gIGNvbnN0IGNoYXJnZXJGYWN0dXJlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkKSA9PiB7XHJcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUFwaShcclxuICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn8J+TpSBDaGFyZ2VtZW50IGZhY3R1cmU6JywgaWQpO1xyXG4gICAgICAgIGNvbnN0IGZhY3R1cmVEYXRhID0gYXdhaXQgZmFjdHVyZVNlcnZpY2UuZ2V0RmFjdHVyZShpZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nLmRlYnVnKFwi4pyFIEZhY3R1cmUgY2hhcmfDqWU6XCIsIGZhY3R1cmVEYXRhPy5udW1lcm9GYWN0dXJlKTtcclxuXHJcbiAgICAgICAgaWYgKCFmYWN0dXJlRGF0YSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdWN1bmUgZG9ubsOpZSBkZSBmYWN0dXJlIHRyb3V2w6llJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFjdHVyZURhdGE7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBjaGFyZ2VtZW50IGZhY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFLDqWN1cMOocmUgbCdVUkwgZCd1bmUgZmFjdHVyZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZEZhY3R1cmUgLSBJRCBkZSBsYSBmYWN0dXJlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gVVJMIGRlIGxhIGZhY3R1cmVcclxuICAgKi9cclxuICBjb25zdCBnZXRGYWN0dXJlVXJsID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkRmFjdHVyZSkgPT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVBcGkoXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsb2cuZGVidWcoJ/CflJcgUsOpY3Vww6lyYXRpb24gVVJMIGZhY3R1cmU6JywgaWRGYWN0dXJlKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5nZXRGYWN0dXJlVXJsKGlkRmFjdHVyZSk7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfinIUgVVJMIHLDqWN1cMOpcsOpZScpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciByw6ljdXDDqXJhdGlvbiBVUkw6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEltcHJpbWUgdW5lIGZhY3R1cmVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRGYWN0dXJlIC0gSUQgZGUgbGEgZmFjdHVyZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFLDqXN1bHRhdCBkZSBsJ2ltcHJlc3Npb25cclxuICAgKi9cclxuICBjb25zdCBpbXByaW1lckZhY3R1cmUgPSB1c2VDYWxsYmFjayhhc3luYyAoaWRGYWN0dXJlKSA9PiB7XHJcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUFwaShcclxuICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn8J+WqO+4jyBJbXByZXNzaW9uIGZhY3R1cmU6JywgaWRGYWN0dXJlKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5pbXByaW1lckZhY3R1cmUoaWRGYWN0dXJlKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBGYWN0dXJlIGltcHJpbcOpZScpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBpbXByZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9LCBbZmFjdHVyZVNlcnZpY2UsIGV4ZWN1dGVBcGksIGxvZ10pO1xyXG5cclxuICAvKipcclxuICAgKiBFbnZvaWUgdW5lIGZhY3R1cmUgcGFyIGVtYWlsXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkRmFjdHVyZSAtIElEIGRlIGxhIGZhY3R1cmVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZW1haWxEYXRhIC0gRG9ubsOpZXMgZGUgbCdlbWFpbFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFLDqXN1bHRhdCBkZSBsJ2Vudm9pXHJcbiAgICovXHJcbiAgY29uc3QgZW52b3llckZhY3R1cmVQYXJFbWFpbCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZEZhY3R1cmUsIGVtYWlsRGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVBcGkoXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsb2cuZGVidWcoJ/Cfk6cgRW52b2kgZW1haWwgZmFjdHVyZTonLCBpZEZhY3R1cmUpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZhY3R1cmVTZXJ2aWNlLmVudm95ZXJGYWN0dXJlUGFyRW1haWwoaWRGYWN0dXJlLCBlbWFpbERhdGEpO1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn4pyFIEVtYWlsIGVudm95w6knKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LFxyXG4gICAgICBudWxsLFxyXG4gICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICBsb2cuZXJyb3IoJ+KdjCBFcnJldXIgZW52b2kgZW1haWw6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyw6llIHVuZSBub3V2ZWxsZSBmYWN0dXJlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZhY3R1cmVEYXRhIC0gRG9ubsOpZXMgZGUgbGEgZmFjdHVyZSDDoCBjcsOpZXJcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBGYWN0dXJlIGNyw6nDqWVcclxuICAgKi9cclxuICBjb25zdCBjcmVlckZhY3R1cmUgPSB1c2VDYWxsYmFjayhhc3luYyAoZmFjdHVyZURhdGEpID0+IHtcclxuICAgIHJldHVybiBhd2FpdCBleGVjdXRlQXBpKFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5OdIENyw6lhdGlvbiBmYWN0dXJlOicsIGZhY3R1cmVEYXRhKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5jcmVhdGVGYWN0dXJlKGZhY3R1cmVEYXRhKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBGYWN0dXJlIGNyw6nDqWU6JywgcmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LFxyXG4gICAgICBudWxsLFxyXG4gICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICBsb2cuZXJyb3IoJ+KdjCBFcnJldXIgY3LDqWF0aW9uIGZhY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldCDDoCBqb3VyIHVuZSBmYWN0dXJlIGV4aXN0YW50ZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIElEIGRlIGxhIGZhY3R1cmVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmFjdHVyZURhdGEgLSBOb3V2ZWxsZXMgZG9ubsOpZXNcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBGYWN0dXJlIG1pc2Ugw6Agam91clxyXG4gICAqL1xyXG4gIGNvbnN0IG1vZGlmaWVyRmFjdHVyZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZCwgZmFjdHVyZURhdGEpID0+IHtcclxuICAgIHJldHVybiBhd2FpdCBleGVjdXRlQXBpKFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5SEIE1vZGlmaWNhdGlvbiBmYWN0dXJlOicsIGlkKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS51cGRhdGVGYWN0dXJlKGlkLCBmYWN0dXJlRGF0YSk7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfinIUgRmFjdHVyZSBtb2RpZmnDqWU6JywgcmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LFxyXG4gICAgICBudWxsLFxyXG4gICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICBsb2cuZXJyb3IoJ+KdjCBFcnJldXIgbW9kaWZpY2F0aW9uIGZhY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFN1cHByaW1lIHVuZSBmYWN0dXJlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSUQgZGUgbGEgZmFjdHVyZSDDoCBzdXBwcmltZXJcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gU3VjY8OocyBkZSBsYSBzdXBwcmVzc2lvblxyXG4gICAqL1xyXG4gIGNvbnN0IHN1cHByaW1lckZhY3R1cmUgPSB1c2VDYWxsYmFjayhhc3luYyAoaWQpID0+IHtcclxuICAgIHJldHVybiBhd2FpdCBleGVjdXRlQXBpKFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5eR77iPIFN1cHByZXNzaW9uIGZhY3R1cmU6JywgaWQpO1xyXG4gICAgICAgIGF3YWl0IGZhY3R1cmVTZXJ2aWNlLmRlbGV0ZUZhY3R1cmUoaWQpO1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn4pyFIEZhY3R1cmUgc3VwcHJpbcOpZScpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9LFxyXG4gICAgICBudWxsLFxyXG4gICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICBsb2cuZXJyb3IoJ+KdjCBFcnJldXIgc3VwcHJlc3Npb24gZmFjdHVyZTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSwgW2ZhY3R1cmVTZXJ2aWNlLCBleGVjdXRlQXBpLCBsb2ddKTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWFycXVlIHVuZSBmYWN0dXJlIGNvbW1lIHBhecOpZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIElEIGRlIGxhIGZhY3R1cmVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFpZW1lbnREYXRhIC0gRG9ubsOpZXMgZHUgcGFpZW1lbnRcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBGYWN0dXJlIG1pc2Ugw6Agam91clxyXG4gICAqL1xyXG4gIGNvbnN0IG1hcnF1ZXJDb21tZVBheWVlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkLCBwYWllbWVudERhdGEpID0+IHtcclxuICAgIHJldHVybiBhd2FpdCBleGVjdXRlQXBpKFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5KwIE1hcnF1YWdlIGZhY3R1cmUgY29tbWUgcGF5w6llOicsIGlkKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5tYXJxdWVyQ29tbWVQYXllZShpZCwgcGFpZW1lbnREYXRhKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBGYWN0dXJlIG1hcnF1w6llIGNvbW1lIHBhecOpZScpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBtYXJxdWFnZSBwYWllbWVudDonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSwgW2ZhY3R1cmVTZXJ2aWNlLCBleGVjdXRlQXBpLCBsb2ddKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQW5udWxlIHVuZSBmYWN0dXJlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSUQgZGUgbGEgZmFjdHVyZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEZhY3R1cmUgYW5udWzDqWVcclxuICAgKi9cclxuICBjb25zdCBhbm51bGVyRmFjdHVyZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVBcGkoXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsb2cuZGVidWcoJ/CfmqsgQW5udWxhdGlvbiBmYWN0dXJlOicsIGlkKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5hbm51bGVyRmFjdHVyZShpZCk7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfinIUgRmFjdHVyZSBhbm51bMOpZScpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBhbm51bGF0aW9uIGZhY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0sIFtmYWN0dXJlU2VydmljZSwgZXhlY3V0ZUFwaSwgbG9nXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcnF1ZSB1bmUgZmFjdHVyZSBjb21tZSBpbXByaW3DqWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBJRCBkZSBsYSBmYWN0dXJlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gRmFjdHVyZSBtaXNlIMOgIGpvdXJcclxuICAgKi9cclxuICBjb25zdCBtYXJxdWVyQ29tbWVJbXByaW1lZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVBcGkoXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsb2cuZGVidWcoJ/CflqjvuI8gTWFycXVhZ2UgZmFjdHVyZSBjb21tZSBpbXByaW3DqWU6JywgaWQpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZhY3R1cmVTZXJ2aWNlLm1hcnF1ZXJDb21tZUltcHJpbWVlKGlkKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBGYWN0dXJlIG1hcnF1w6llIGNvbW1lIGltcHJpbcOpZScpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBtYXJxdWFnZSBpbXByZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9LCBbZmFjdHVyZVNlcnZpY2UsIGV4ZWN1dGVBcGksIGxvZ10pO1xyXG5cclxuICAvKipcclxuICAgKiBNYXJxdWUgdW5lIGZhY3R1cmUgY29tbWUgZW52b3nDqWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBJRCBkZSBsYSBmYWN0dXJlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gRmFjdHVyZSBtaXNlIMOgIGpvdXJcclxuICAgKi9cclxuICBjb25zdCBtYXJxdWVyQ29tbWVFbnZveWVlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkKSA9PiB7XHJcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUFwaShcclxuICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn8J+TpyBNYXJxdWFnZSBmYWN0dXJlIGNvbW1lIGVudm95w6llOicsIGlkKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5tYXJxdWVyQ29tbWVFbnZveWVlKGlkKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBGYWN0dXJlIG1hcnF1w6llIGNvbW1lIGVudm95w6llJyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSxcclxuICAgICAgbnVsbCxcclxuICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgbG9nLmVycm9yKCfinYwgRXJyZXVyIG1hcnF1YWdlIGVudm9pOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9LCBbZmFjdHVyZVNlcnZpY2UsIGV4ZWN1dGVBcGksIGxvZ10pO1xyXG5cclxuICAvKipcclxuICAgKiBSw6ljdXDDqHJlIGxlIHByb2NoYWluIG51bcOpcm8gZGUgZmFjdHVyZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbm5lZSAtIEFubsOpZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IFByb2NoYWluIG51bcOpcm8gZGUgZmFjdHVyZVxyXG4gICAqL1xyXG4gIGNvbnN0IGdldFByb2NoYWluTnVtZXJvRmFjdHVyZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChhbm5lZSkgPT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVBcGkoXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsb2cuZGVidWcoJ/CflKIgUsOpY3Vww6lyYXRpb24gcHJvY2hhaW4gbnVtw6lybyBwb3VyIGFubsOpZTonLCBhbm5lZSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmFjdHVyZVNlcnZpY2UuZ2V0UHJvY2hhaW5OdW1lcm9GYWN0dXJlKGFubmVlKTtcclxuICAgICAgICBsb2cuZGVidWcoJ+KchSBQcm9jaGFpbiBudW3DqXJvIHLDqWN1cMOpcsOpOicsIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSxcclxuICAgICAgbnVsbCxcclxuICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgbG9nLmVycm9yKCfinYwgRXJyZXVyIHLDqWN1cMOpcmF0aW9uIG51bcOpcm8gZmFjdHVyZTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSwgW2ZhY3R1cmVTZXJ2aWNlLCBleGVjdXRlQXBpLCBsb2ddKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFVUSUxJVEFJUkVTXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBFbnJpY2hpdCBsZXMgZmFjdHVyZXMgYXZlYyBsZXMgw6l0YXRzIGQnYWZmaWNoYWdlXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZmFjdHVyZXMgLSBGYWN0dXJlcyDDoCBlbnJpY2hpclxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gRmFjdHVyZXMgZW5yaWNoaWVzXHJcbiAgICovXHJcbiAgY29uc3QgZW5yaWNoaXJGYWN0dXJlc0F2ZWNFdGF0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZhY3R1cmVzKSA9PiB7XHJcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUFwaShcclxuICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxvZy5kZWJ1Zyhg8J+UhCBFbnJpY2hpc3NlbWVudCBkZSAke2ZhY3R1cmVzLmxlbmd0aH0gZmFjdHVyZXMgYXZlYyDDqXRhdHMuLi5gKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWN0dXJlU2VydmljZS5lbnJpY2hpckZhY3R1cmVzQXZlY0V0YXRBZmZpY2hhZ2UoZmFjdHVyZXMpO1xyXG4gICAgICAgIGxvZy5kZWJ1Zygn4pyFIEZhY3R1cmVzIGVucmljaGllcyBhdmVjIMOpdGF0cycpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZy5lcnJvcign4p2MIEVycmV1ciBlbnJpY2hpc3NlbWVudCBmYWN0dXJlczonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSwgW2ZhY3R1cmVTZXJ2aWNlLCBleGVjdXRlQXBpLCBsb2ddKTtcclxuXHJcbiAgLyoqXHJcbiAgICogVmlkZSBsZSBjYWNoZSBkZXMgZmFjdHVyZXNcclxuICAgKi9cclxuICBjb25zdCBjbGVhckNhY2hlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgbG9nLmRlYnVnKCfwn5eR77iPIFZpZGFnZSBkdSBjYWNoZSBkZXMgZmFjdHVyZXMnKTtcclxuICAgIGlmIChmYWN0dXJlU2VydmljZS5fY2xlYXJDYWNoZSkge1xyXG4gICAgICBmYWN0dXJlU2VydmljZS5fY2xlYXJDYWNoZSgpO1xyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnKCfinIUgQ2FjaGUgdmlkw6knKTtcclxuICB9LCBbZmFjdHVyZVNlcnZpY2UsIGxvZ10pO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gUkVUT1VSIERFIFRPVVRFUyBMRVMgQUNUSU9OU1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gKHtcclxuICAgIC8vIEFjdGlvbnMgQ1JVRFxyXG4gICAgY2hhcmdlckZhY3R1cmVzLFxyXG4gICAgY2hhcmdlckZhY3R1cmUsXHJcbiAgICBjcmVlckZhY3R1cmUsXHJcbiAgICBtb2RpZmllckZhY3R1cmUsXHJcbiAgICBzdXBwcmltZXJGYWN0dXJlLFxyXG4gICAgXHJcbiAgICAvLyBBY3Rpb25zIGQnw6l0YXRcclxuICAgIG1hcnF1ZXJDb21tZVBheWVlLFxyXG4gICAgYW5udWxlckZhY3R1cmUsXHJcbiAgICBtYXJxdWVyQ29tbWVJbXByaW1lZSxcclxuICAgIG1hcnF1ZXJDb21tZUVudm95ZWUsXHJcbiAgICBcclxuICAgIC8vIEFjdGlvbnMgZG9jdW1lbnRzXHJcbiAgICBnZXRGYWN0dXJlVXJsLFxyXG4gICAgaW1wcmltZXJGYWN0dXJlLFxyXG4gICAgZW52b3llckZhY3R1cmVQYXJFbWFpbCxcclxuICAgIFxyXG4gICAgLy8gTnVtw6lyb3RhdGlvblxyXG4gICAgZ2V0UHJvY2hhaW5OdW1lcm9GYWN0dXJlLFxyXG4gICAgXHJcbiAgICAvLyBVdGlsaXRhaXJlc1xyXG4gICAgZW5yaWNoaXJGYWN0dXJlc0F2ZWNFdGF0LFxyXG4gICAgY2xlYXJDYWNoZVxyXG4gIH0pLCBbXHJcbiAgICBjaGFyZ2VyRmFjdHVyZXMsXHJcbiAgICBjaGFyZ2VyRmFjdHVyZSxcclxuICAgIGNyZWVyRmFjdHVyZSxcclxuICAgIG1vZGlmaWVyRmFjdHVyZSxcclxuICAgIHN1cHByaW1lckZhY3R1cmUsXHJcbiAgICBtYXJxdWVyQ29tbWVQYXllZSxcclxuICAgIGFubnVsZXJGYWN0dXJlLFxyXG4gICAgbWFycXVlckNvbW1lSW1wcmltZWUsXHJcbiAgICBtYXJxdWVyQ29tbWVFbnZveWVlLFxyXG4gICAgZ2V0RmFjdHVyZVVybCxcclxuICAgIGltcHJpbWVyRmFjdHVyZSxcclxuICAgIGVudm95ZXJGYWN0dXJlUGFyRW1haWwsXHJcbiAgICBnZXRQcm9jaGFpbk51bWVyb0ZhY3R1cmUsXHJcbiAgICBlbnJpY2hpckZhY3R1cmVzQXZlY0V0YXQsXHJcbiAgICBjbGVhckNhY2hlXHJcbiAgXSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VGYWN0dXJlQWN0aW9uczsiXSwibWFwcGluZ3MiOiI7Ozs7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RyxDQUFDVyxLQUFLLENBQUMsaUNBQWlDLENBQUM7TUFDNUMsT0FBT2MsTUFBTTtJQUNmLENBQUMsRUFDRCxJQUFJLEVBQ0hULEtBQUssSUFBSztNQUNUaEIsR0FBRyxDQUFDZ0IsS0FBSyxDQUFDLG1DQUFtQyxFQUFFQSxLQUFLLENBQUM7TUFDckQsTUFBTUEsS0FBSztJQUNiLENBQ0YsQ0FBQztFQUNILENBQUMsRUFBRSxDQUFDWCxjQUFjLEVBQUVGLFVBQVUsRUFBRUgsR0FBRyxDQUFDLENBQUM7O0VBRXJDO0FBQ0Y7QUFDQTtFQUNFLE1BQU0yQyxVQUFVLEdBQUcsSUFBQWxDLGtCQUFXLEVBQUMsTUFBTTtJQUNuQ1QsR0FBRyxDQUFDVyxLQUFLLENBQUMsa0NBQWtDLENBQUM7SUFDN0MsSUFBSU4sY0FBYyxDQUFDdUMsV0FBVyxFQUFFO01BQzlCdkMsY0FBYyxDQUFDdUMsV0FBVyxDQUFDLENBQUM7SUFDOUI7SUFDQTVDLEdBQUcsQ0FBQ1csS0FBSyxDQUFDLGNBQWMsQ0FBQztFQUMzQixDQUFDLEVBQUUsQ0FBQ04sY0FBYyxFQUFFTCxHQUFHLENBQUMsQ0FBQzs7RUFFekI7RUFDQTtFQUNBOztFQUVBLE9BQU8sSUFBQU0sY0FBTyxFQUFDLE9BQU87SUFDcEI7SUFDQUUsZUFBZTtJQUNmUyxjQUFjO0lBQ2RZLFlBQVk7SUFDWkUsZUFBZTtJQUNmRSxnQkFBZ0I7SUFFaEI7SUFDQUUsaUJBQWlCO0lBQ2pCRSxjQUFjO0lBQ2RDLG9CQUFvQjtJQUNwQkMsbUJBQW1CO0lBRW5CO0lBQ0FoQixhQUFhO0lBQ2JHLGVBQWU7SUFDZkMsc0JBQXNCO0lBRXRCO0lBQ0FhLHdCQUF3QjtJQUV4QjtJQUNBQyx3QkFBd0I7SUFDeEJFO0VBQ0YsQ0FBQyxDQUFDLEVBQUUsQ0FDRm5DLGVBQWUsRUFDZlMsY0FBYyxFQUNkWSxZQUFZLEVBQ1pFLGVBQWUsRUFDZkUsZ0JBQWdCLEVBQ2hCRSxpQkFBaUIsRUFDakJFLGNBQWMsRUFDZEMsb0JBQW9CLEVBQ3BCQyxtQkFBbUIsRUFDbkJoQixhQUFhLEVBQ2JHLGVBQWUsRUFDZkMsc0JBQXNCLEVBQ3RCYSx3QkFBd0IsRUFDeEJDLHdCQUF3QixFQUN4QkUsVUFBVSxDQUNYLENBQUM7QUFDSixDQUFDO0FBQUNFLE9BQUEsQ0FBQTlDLGlCQUFBLEdBQUFBLGlCQUFBO0FBQUEsSUFBQStDLFFBQUEsR0FBQUQsT0FBQSxDQUFBL0MsT0FBQSxHQUVhQyxpQkFBaUIiLCJpZ25vcmVMaXN0IjpbXX0=