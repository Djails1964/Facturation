{"version":3,"names":["require","Object","defineProperty","window","writable","value","jest","fn","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","localStorageMock","getItem","setItem","removeItem","clear","sessionStorageMock","originalError","console","error","beforeAll","args","includes","call","afterAll","afterEach","clearAllMocks","mockClear","global","fetch","Promise","resolve","ok","json","waitForAsync","ms","setTimeout","createTestFacture","overrides","idFacture","numeroFacture","dateFacture","dateEcheance","etat","montantTotal","ristourne","montantPayeTotal","montantRestant","client","idClient","nom","prenom","email","lignes","idLigne","idService","idUnite","description","quantite","prixUnitaire","total","createTestClient","id","titre","rue","numero","code_postal","localite","telephone","estTherapeute"],"sources":["setupTests.js"],"sourcesContent":["// tests/setup/setupTests.js\r\n// Configuration globale pour tous les tests\r\n\r\n// 1. Importer les extensions Jest DOM\r\nrequire('@testing-library/jest-dom');\r\n\r\n// 2. Importer l'objet complet du module\r\n//const rtl = require('@testing-library/react');\r\n\r\n// 3. Chercher la fonction 'configure'\r\n// Elle peut se trouver sur l'objet importé (rtl.configure)\r\n// ou être directement l'objet importé s'il s'agit d'un export par défaut \r\n// ou être dans la propriété .default (moins probable ici)\r\n\r\n// La stratégie la plus robuste est de la chercher sur l'objet, ou sur l'objet .default\r\n//const configureFn = rtl.configure || rtl.default?.configure || rtl.default;\r\n\r\n// Si nous ne trouvons rien, l'exécution s'arrête ici pour éviter l'erreur.\r\n// if (typeof configureFn === 'function') {\r\n//   configureFn({\r\n//     testIdAttribute: 'data-testid',\r\n//     asyncUtilTimeout: 5000\r\n//   });\r\n// } else {\r\n//   // Optionnel: Afficher un avertissement si la fonction n'est pas trouvée, mais continuer.\r\n//   console.warn(\"La fonction 'configure' de @testing-library/react n'a pas pu être trouvée.\");\r\n// }\r\n\r\n// Mock de window.matchMedia\r\nObject.defineProperty(window, 'matchMedia', {\r\n  writable: true,\r\n  value: jest.fn().mockImplementation(query => ({\r\n    matches: false,\r\n    media: query,\r\n    onchange: null,\r\n    addListener: jest.fn(),\r\n    removeListener: jest.fn(),\r\n    addEventListener: jest.fn(),\r\n    removeEventListener: jest.fn(),\r\n    dispatchEvent: jest.fn(),\r\n  })),\r\n});\r\n\r\n// Mock de localStorage\r\nconst localStorageMock = {\r\n  getItem: jest.fn(),\r\n  setItem: jest.fn(),\r\n  removeItem: jest.fn(),\r\n  clear: jest.fn(),\r\n};\r\nObject.defineProperty(window, 'localStorage', { value: localStorageMock });\r\n\r\n// Mock de sessionStorage\r\nconst sessionStorageMock = {\r\n  getItem: jest.fn(),\r\n  setItem: jest.fn(),\r\n  removeItem: jest.fn(),\r\n  clear: jest.fn(),\r\n};\r\nObject.defineProperty(window, 'sessionStorage', { value: sessionStorageMock });\r\n\r\n// Mock de console.error pour éviter les logs dans les tests\r\nconst originalError = console.error;\r\nbeforeAll(() => {\r\n  console.error = (...args) => {\r\n    // Ignorer les erreurs React connues dans les tests\r\n    if (\r\n      typeof args[0] === 'string' &&\r\n      (args[0].includes('Warning: ReactDOM.render is no longer supported') ||\r\n       args[0].includes('Warning: An update to') ||\r\n       args[0].includes('act(...)'))\r\n    ) {\r\n      return;\r\n    }\r\n    originalError.call(console, ...args);\r\n  };\r\n});\r\n\r\nafterAll(() => {\r\n  console.error = originalError;\r\n});\r\n\r\n// Nettoyage après chaque test\r\nafterEach(() => {\r\n  jest.clearAllMocks();\r\n  localStorageMock.getItem.mockClear();\r\n  localStorageMock.setItem.mockClear();\r\n  sessionStorageMock.getItem.mockClear();\r\n  sessionStorageMock.setItem.mockClear();\r\n});\r\n\r\n// Mock global de fetch\r\nglobal.fetch = jest.fn(() =>\r\n  Promise.resolve({\r\n    ok: true,\r\n    json: () => Promise.resolve({}),\r\n  })\r\n);\r\n\r\n// Helper pour attendre les mises à jour asynchrones\r\nglobal.waitForAsync = (ms = 0) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// Helper pour créer des données de test\r\nglobal.createTestFacture = (overrides = {}) => ({\r\n  idFacture: 1,\r\n  numeroFacture: '001.2025',\r\n  dateFacture: '2025-01-15',\r\n  dateEcheance: '2025-02-15',\r\n  etat: 'En attente',\r\n  montantTotal: 1000,\r\n  ristourne: 0,\r\n  montantPayeTotal: 0,\r\n  montantRestant: 1000,\r\n  client: {\r\n    idClient: 1,\r\n    nom: 'Dupont',\r\n    prenom: 'Jean',\r\n    email: 'jean.dupont@test.com'\r\n  },\r\n  lignes: [\r\n    {\r\n      idLigne: 1,\r\n      idService: 1,\r\n      idUnite: 1,\r\n      description: 'Service test',\r\n      quantite: 2,\r\n      prixUnitaire: 500,\r\n      total: 1000\r\n    }\r\n  ],\r\n  ...overrides\r\n});\r\n\r\nglobal.createTestClient = (overrides = {}) => ({\r\n  id: 1,\r\n  titre: 'Monsieur',\r\n  nom: 'Dupont',\r\n  prenom: 'Jean',\r\n  rue: 'Rue de Test',\r\n  numero: '10',\r\n  code_postal: 1000,\r\n  localite: 'TestVille',\r\n  telephone: '+41 79 000 00 00',\r\n  email: 'jean.dupont@test.com',\r\n  estTherapeute: false,\r\n  ...overrides\r\n});"],"mappings":"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","ignoreList":[]}