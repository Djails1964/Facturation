474c3c9903bc60c30a18613e59c65eff
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _stream = _interopRequireDefault(require("stream"));
var _utils = _interopRequireDefault(require("../utils.js"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const kInternals = Symbol('internals');
class AxiosTransformStream extends _stream.default.Transform {
  constructor(options) {
    options = _utils.default.toFlatObject(options, {
      maxRate: 0,
      chunkSize: 64 * 1024,
      minChunkSize: 100,
      timeWindow: 500,
      ticksRate: 2,
      samplesCount: 15
    }, null, (prop, source) => {
      return !_utils.default.isUndefined(source[prop]);
    });
    super({
      readableHighWaterMark: options.chunkSize
    });
    const internals = this[kInternals] = {
      timeWindow: options.timeWindow,
      chunkSize: options.chunkSize,
      maxRate: options.maxRate,
      minChunkSize: options.minChunkSize,
      bytesSeen: 0,
      isCaptured: false,
      notifiedBytesLoaded: 0,
      ts: Date.now(),
      bytes: 0,
      onReadCallback: null
    };
    this.on('newListener', event => {
      if (event === 'progress') {
        if (!internals.isCaptured) {
          internals.isCaptured = true;
        }
      }
    });
  }
  _read(size) {
    const internals = this[kInternals];
    if (internals.onReadCallback) {
      internals.onReadCallback();
    }
    return super._read(size);
  }
  _transform(chunk, encoding, callback) {
    const internals = this[kInternals];
    const maxRate = internals.maxRate;
    const readableHighWaterMark = this.readableHighWaterMark;
    const timeWindow = internals.timeWindow;
    const divider = 1000 / timeWindow;
    const bytesThreshold = maxRate / divider;
    const minChunkSize = internals.minChunkSize !== false ? Math.max(internals.minChunkSize, bytesThreshold * 0.01) : 0;
    const pushChunk = (_chunk, _callback) => {
      const bytes = Buffer.byteLength(_chunk);
      internals.bytesSeen += bytes;
      internals.bytes += bytes;
      internals.isCaptured && this.emit('progress', internals.bytesSeen);
      if (this.push(_chunk)) {
        process.nextTick(_callback);
      } else {
        internals.onReadCallback = () => {
          internals.onReadCallback = null;
          process.nextTick(_callback);
        };
      }
    };
    const transformChunk = (_chunk, _callback) => {
      const chunkSize = Buffer.byteLength(_chunk);
      let chunkRemainder = null;
      let maxChunkSize = readableHighWaterMark;
      let bytesLeft;
      let passed = 0;
      if (maxRate) {
        const now = Date.now();
        if (!internals.ts || (passed = now - internals.ts) >= timeWindow) {
          internals.ts = now;
          bytesLeft = bytesThreshold - internals.bytes;
          internals.bytes = bytesLeft < 0 ? -bytesLeft : 0;
          passed = 0;
        }
        bytesLeft = bytesThreshold - internals.bytes;
      }
      if (maxRate) {
        if (bytesLeft <= 0) {
          // next time window
          return setTimeout(() => {
            _callback(null, _chunk);
          }, timeWindow - passed);
        }
        if (bytesLeft < maxChunkSize) {
          maxChunkSize = bytesLeft;
        }
      }
      if (maxChunkSize && chunkSize > maxChunkSize && chunkSize - maxChunkSize > minChunkSize) {
        chunkRemainder = _chunk.subarray(maxChunkSize);
        _chunk = _chunk.subarray(0, maxChunkSize);
      }
      pushChunk(_chunk, chunkRemainder ? () => {
        process.nextTick(_callback, null, chunkRemainder);
      } : _callback);
    };
    transformChunk(chunk, function transformNextChunk(err, _chunk) {
      if (err) {
        return callback(err);
      }
      if (_chunk) {
        transformChunk(_chunk, transformNextChunk);
      } else {
        callback(null);
      }
    });
  }
}
var _default = exports.default = AxiosTransformStream;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfc3RyZWFtIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJlIiwiX19lc01vZHVsZSIsImtJbnRlcm5hbHMiLCJTeW1ib2wiLCJBeGlvc1RyYW5zZm9ybVN0cmVhbSIsInN0cmVhbSIsIlRyYW5zZm9ybSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInV0aWxzIiwidG9GbGF0T2JqZWN0IiwibWF4UmF0ZSIsImNodW5rU2l6ZSIsIm1pbkNodW5rU2l6ZSIsInRpbWVXaW5kb3ciLCJ0aWNrc1JhdGUiLCJzYW1wbGVzQ291bnQiLCJwcm9wIiwic291cmNlIiwiaXNVbmRlZmluZWQiLCJyZWFkYWJsZUhpZ2hXYXRlck1hcmsiLCJpbnRlcm5hbHMiLCJieXRlc1NlZW4iLCJpc0NhcHR1cmVkIiwibm90aWZpZWRCeXRlc0xvYWRlZCIsInRzIiwiRGF0ZSIsIm5vdyIsImJ5dGVzIiwib25SZWFkQ2FsbGJhY2siLCJvbiIsImV2ZW50IiwiX3JlYWQiLCJzaXplIiwiX3RyYW5zZm9ybSIsImNodW5rIiwiZW5jb2RpbmciLCJjYWxsYmFjayIsImRpdmlkZXIiLCJieXRlc1RocmVzaG9sZCIsIk1hdGgiLCJtYXgiLCJwdXNoQ2h1bmsiLCJfY2h1bmsiLCJfY2FsbGJhY2siLCJCdWZmZXIiLCJieXRlTGVuZ3RoIiwiZW1pdCIsInB1c2giLCJwcm9jZXNzIiwibmV4dFRpY2siLCJ0cmFuc2Zvcm1DaHVuayIsImNodW5rUmVtYWluZGVyIiwibWF4Q2h1bmtTaXplIiwiYnl0ZXNMZWZ0IiwicGFzc2VkIiwic2V0VGltZW91dCIsInN1YmFycmF5IiwidHJhbnNmb3JtTmV4dENodW5rIiwiZXJyIiwiX2RlZmF1bHQiXSwic291cmNlcyI6WyJBeGlvc1RyYW5zZm9ybVN0cmVhbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBzdHJlYW0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbmNvbnN0IGtJbnRlcm5hbHMgPSBTeW1ib2woJ2ludGVybmFscycpO1xuXG5jbGFzcyBBeGlvc1RyYW5zZm9ybVN0cmVhbSBleHRlbmRzIHN0cmVhbS5UcmFuc2Zvcm17XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gdXRpbHMudG9GbGF0T2JqZWN0KG9wdGlvbnMsIHtcbiAgICAgIG1heFJhdGU6IDAsXG4gICAgICBjaHVua1NpemU6IDY0ICogMTAyNCxcbiAgICAgIG1pbkNodW5rU2l6ZTogMTAwLFxuICAgICAgdGltZVdpbmRvdzogNTAwLFxuICAgICAgdGlja3NSYXRlOiAyLFxuICAgICAgc2FtcGxlc0NvdW50OiAxNVxuICAgIH0sIG51bGwsIChwcm9wLCBzb3VyY2UpID0+IHtcbiAgICAgIHJldHVybiAhdXRpbHMuaXNVbmRlZmluZWQoc291cmNlW3Byb3BdKTtcbiAgICB9KTtcblxuICAgIHN1cGVyKHtcbiAgICAgIHJlYWRhYmxlSGlnaFdhdGVyTWFyazogb3B0aW9ucy5jaHVua1NpemVcbiAgICB9KTtcblxuICAgIGNvbnN0IGludGVybmFscyA9IHRoaXNba0ludGVybmFsc10gPSB7XG4gICAgICB0aW1lV2luZG93OiBvcHRpb25zLnRpbWVXaW5kb3csXG4gICAgICBjaHVua1NpemU6IG9wdGlvbnMuY2h1bmtTaXplLFxuICAgICAgbWF4UmF0ZTogb3B0aW9ucy5tYXhSYXRlLFxuICAgICAgbWluQ2h1bmtTaXplOiBvcHRpb25zLm1pbkNodW5rU2l6ZSxcbiAgICAgIGJ5dGVzU2VlbjogMCxcbiAgICAgIGlzQ2FwdHVyZWQ6IGZhbHNlLFxuICAgICAgbm90aWZpZWRCeXRlc0xvYWRlZDogMCxcbiAgICAgIHRzOiBEYXRlLm5vdygpLFxuICAgICAgYnl0ZXM6IDAsXG4gICAgICBvblJlYWRDYWxsYmFjazogbnVsbFxuICAgIH07XG5cbiAgICB0aGlzLm9uKCduZXdMaXN0ZW5lcicsIGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudCA9PT0gJ3Byb2dyZXNzJykge1xuICAgICAgICBpZiAoIWludGVybmFscy5pc0NhcHR1cmVkKSB7XG4gICAgICAgICAgaW50ZXJuYWxzLmlzQ2FwdHVyZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfcmVhZChzaXplKSB7XG4gICAgY29uc3QgaW50ZXJuYWxzID0gdGhpc1trSW50ZXJuYWxzXTtcblxuICAgIGlmIChpbnRlcm5hbHMub25SZWFkQ2FsbGJhY2spIHtcbiAgICAgIGludGVybmFscy5vblJlYWRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5fcmVhZChzaXplKTtcbiAgfVxuXG4gIF90cmFuc2Zvcm0oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGludGVybmFscyA9IHRoaXNba0ludGVybmFsc107XG4gICAgY29uc3QgbWF4UmF0ZSA9IGludGVybmFscy5tYXhSYXRlO1xuXG4gICAgY29uc3QgcmVhZGFibGVIaWdoV2F0ZXJNYXJrID0gdGhpcy5yZWFkYWJsZUhpZ2hXYXRlck1hcms7XG5cbiAgICBjb25zdCB0aW1lV2luZG93ID0gaW50ZXJuYWxzLnRpbWVXaW5kb3c7XG5cbiAgICBjb25zdCBkaXZpZGVyID0gMTAwMCAvIHRpbWVXaW5kb3c7XG4gICAgY29uc3QgYnl0ZXNUaHJlc2hvbGQgPSAobWF4UmF0ZSAvIGRpdmlkZXIpO1xuICAgIGNvbnN0IG1pbkNodW5rU2l6ZSA9IGludGVybmFscy5taW5DaHVua1NpemUgIT09IGZhbHNlID8gTWF0aC5tYXgoaW50ZXJuYWxzLm1pbkNodW5rU2l6ZSwgYnl0ZXNUaHJlc2hvbGQgKiAwLjAxKSA6IDA7XG5cbiAgICBjb25zdCBwdXNoQ2h1bmsgPSAoX2NodW5rLCBfY2FsbGJhY2spID0+IHtcbiAgICAgIGNvbnN0IGJ5dGVzID0gQnVmZmVyLmJ5dGVMZW5ndGgoX2NodW5rKTtcbiAgICAgIGludGVybmFscy5ieXRlc1NlZW4gKz0gYnl0ZXM7XG4gICAgICBpbnRlcm5hbHMuYnl0ZXMgKz0gYnl0ZXM7XG5cbiAgICAgIGludGVybmFscy5pc0NhcHR1cmVkICYmIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCBpbnRlcm5hbHMuYnl0ZXNTZWVuKTtcblxuICAgICAgaWYgKHRoaXMucHVzaChfY2h1bmspKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soX2NhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVybmFscy5vblJlYWRDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICBpbnRlcm5hbHMub25SZWFkQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soX2NhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0cmFuc2Zvcm1DaHVuayA9IChfY2h1bmssIF9jYWxsYmFjaykgPT4ge1xuICAgICAgY29uc3QgY2h1bmtTaXplID0gQnVmZmVyLmJ5dGVMZW5ndGgoX2NodW5rKTtcbiAgICAgIGxldCBjaHVua1JlbWFpbmRlciA9IG51bGw7XG4gICAgICBsZXQgbWF4Q2h1bmtTaXplID0gcmVhZGFibGVIaWdoV2F0ZXJNYXJrO1xuICAgICAgbGV0IGJ5dGVzTGVmdDtcbiAgICAgIGxldCBwYXNzZWQgPSAwO1xuXG4gICAgICBpZiAobWF4UmF0ZSkge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIGlmICghaW50ZXJuYWxzLnRzIHx8IChwYXNzZWQgPSAobm93IC0gaW50ZXJuYWxzLnRzKSkgPj0gdGltZVdpbmRvdykge1xuICAgICAgICAgIGludGVybmFscy50cyA9IG5vdztcbiAgICAgICAgICBieXRlc0xlZnQgPSBieXRlc1RocmVzaG9sZCAtIGludGVybmFscy5ieXRlcztcbiAgICAgICAgICBpbnRlcm5hbHMuYnl0ZXMgPSBieXRlc0xlZnQgPCAwID8gLWJ5dGVzTGVmdCA6IDA7XG4gICAgICAgICAgcGFzc2VkID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ5dGVzTGVmdCA9IGJ5dGVzVGhyZXNob2xkIC0gaW50ZXJuYWxzLmJ5dGVzO1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4UmF0ZSkge1xuICAgICAgICBpZiAoYnl0ZXNMZWZ0IDw9IDApIHtcbiAgICAgICAgICAvLyBuZXh0IHRpbWUgd2luZG93XG4gICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgX2NhbGxiYWNrKG51bGwsIF9jaHVuayk7XG4gICAgICAgICAgfSwgdGltZVdpbmRvdyAtIHBhc3NlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYnl0ZXNMZWZ0IDwgbWF4Q2h1bmtTaXplKSB7XG4gICAgICAgICAgbWF4Q2h1bmtTaXplID0gYnl0ZXNMZWZ0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXhDaHVua1NpemUgJiYgY2h1bmtTaXplID4gbWF4Q2h1bmtTaXplICYmIChjaHVua1NpemUgLSBtYXhDaHVua1NpemUpID4gbWluQ2h1bmtTaXplKSB7XG4gICAgICAgIGNodW5rUmVtYWluZGVyID0gX2NodW5rLnN1YmFycmF5KG1heENodW5rU2l6ZSk7XG4gICAgICAgIF9jaHVuayA9IF9jaHVuay5zdWJhcnJheSgwLCBtYXhDaHVua1NpemUpO1xuICAgICAgfVxuXG4gICAgICBwdXNoQ2h1bmsoX2NodW5rLCBjaHVua1JlbWFpbmRlciA/ICgpID0+IHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhfY2FsbGJhY2ssIG51bGwsIGNodW5rUmVtYWluZGVyKTtcbiAgICAgIH0gOiBfY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICB0cmFuc2Zvcm1DaHVuayhjaHVuaywgZnVuY3Rpb24gdHJhbnNmb3JtTmV4dENodW5rKGVyciwgX2NodW5rKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX2NodW5rKSB7XG4gICAgICAgIHRyYW5zZm9ybUNodW5rKF9jaHVuaywgdHJhbnNmb3JtTmV4dENodW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zVHJhbnNmb3JtU3RyZWFtO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDQSxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxPQUFBO0FBRWIsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQWdDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUwsT0FBQSxFQUFBSyxDQUFBO0FBRWhDLE1BQU1FLFVBQVUsR0FBR0MsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUV0QyxNQUFNQyxvQkFBb0IsU0FBU0MsZUFBTSxDQUFDQyxTQUFTO0VBQ2pEQyxXQUFXQSxDQUFDQyxPQUFPLEVBQUU7SUFDbkJBLE9BQU8sR0FBR0MsY0FBSyxDQUFDQyxZQUFZLENBQUNGLE9BQU8sRUFBRTtNQUNwQ0csT0FBTyxFQUFFLENBQUM7TUFDVkMsU0FBUyxFQUFFLEVBQUUsR0FBRyxJQUFJO01BQ3BCQyxZQUFZLEVBQUUsR0FBRztNQUNqQkMsVUFBVSxFQUFFLEdBQUc7TUFDZkMsU0FBUyxFQUFFLENBQUM7TUFDWkMsWUFBWSxFQUFFO0lBQ2hCLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQ0MsSUFBSSxFQUFFQyxNQUFNLEtBQUs7TUFDekIsT0FBTyxDQUFDVCxjQUFLLENBQUNVLFdBQVcsQ0FBQ0QsTUFBTSxDQUFDRCxJQUFJLENBQUMsQ0FBQztJQUN6QyxDQUFDLENB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