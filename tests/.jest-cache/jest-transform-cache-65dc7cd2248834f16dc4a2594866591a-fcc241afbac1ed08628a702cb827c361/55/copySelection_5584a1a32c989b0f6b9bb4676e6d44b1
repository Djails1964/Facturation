c0df1055ee7ed545675982fa11e74bda
'use strict';

var DataTransfer = require("../utils/dataTransfer/DataTransfer.js");
require("../utils/dataTransfer/Clipboard.js");
var getWindow = require("../utils/misc/getWindow.js");
var selection = require("../utils/focus/selection.js");
var UI = require("./UI.js");
function copySelection(target) {
  const data = selection.hasOwnSelection(target) ? {
    'text/plain': readSelectedValueFromInput(target)
  } : {
    'text/plain': String(target.ownerDocument.getSelection())
  };
  const dt = DataTransfer.createDataTransfer(getWindow.getWindow(target));
  for (const type in data) {
    if (data[type]) {
      dt.setData(type, data[type]);
    }
  }
  return dt;
}
function readSelectedValueFromInput(target) {
  const sel = UI.getUISelection(target);
  const val = UI.getUIValue(target);
  return val.substring(sel.startOffset, sel.endOffset);
}
exports.copySelection = copySelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHJhbnNmZXIiLCJyZXF1aXJlIiwiZ2V0V2luZG93Iiwic2VsZWN0aW9uIiwiVUkiLCJjb3B5U2VsZWN0aW9uIiwidGFyZ2V0IiwiZGF0YSIsImhhc093blNlbGVjdGlvbiIsInJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0IiwiU3RyaW5nIiwib3duZXJEb2N1bWVudCIsImdldFNlbGVjdGlvbiIsImR0IiwiY3JlYXRlRGF0YVRyYW5zZmVyIiwidHlwZSIsInNldERhdGEiLCJzZWwiLCJnZXRVSVNlbGVjdGlvbiIsInZhbCIsImdldFVJVmFsdWUiLCJzdWJzdHJpbmciLCJzdGFydE9mZnNldCIsImVuZE9mZnNldCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJjb3B5U2VsZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIERhdGFUcmFuc2ZlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9EYXRhVHJhbnNmZXIuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnZhciBnZXRXaW5kb3cgPSByZXF1aXJlKCcuLi91dGlscy9taXNjL2dldFdpbmRvdy5qcycpO1xudmFyIHNlbGVjdGlvbiA9IHJlcXVpcmUoJy4uL3V0aWxzL2ZvY3VzL3NlbGVjdGlvbi5qcycpO1xudmFyIFVJID0gcmVxdWlyZSgnLi9VSS5qcycpO1xuXG5mdW5jdGlvbiBjb3B5U2VsZWN0aW9uKHRhcmdldCkge1xuICAgIGNvbnN0IGRhdGEgPSBzZWxlY3Rpb24uaGFzT3duU2VsZWN0aW9uKHRhcmdldCkgPyB7XG4gICAgICAgICd0ZXh0L3BsYWluJzogcmVhZFNlbGVjdGVkVmFsdWVGcm9tSW5wdXQodGFyZ2V0KVxuICAgIH0gOiB7XG4gICAgICAgICd0ZXh0L3BsYWluJzogU3RyaW5nKHRhcmdldC5vd25lckRvY3VtZW50LmdldFNlbGVjdGlvbigpKVxuICAgIH07XG4gICAgY29uc3QgZHQgPSBEYXRhVHJhbnNmZXIuY3JlYXRlRGF0YVRyYW5zZmVyKGdldFdpbmRvdy5nZXRXaW5kb3codGFyZ2V0KSk7XG4gICAgZm9yKGNvbnN0IHR5cGUgaW4gZGF0YSl7XG4gICAgICAgIGlmIChkYXRhW3R5cGVdKSB7XG4gICAgICAgICAgICBkdC5zZXREYXRhKHR5cGUsIGRhdGFbdHlwZV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkdDtcbn1cbmZ1bmN0aW9uIHJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0KHRhcmdldCkge1xuICAgIGNvbnN0IHNlbCA9IFVJLmdldFVJU2VsZWN0aW9uKHRhcmdldCk7XG4gICAgY29uc3QgdmFsID0gVUkuZ2V0VUlWYWx1ZSh0YXJnZXQpO1xuICAgIHJldHVybiB2YWwuc3Vic3RyaW5nKHNlbC5zdGFydE9mZnNldCwgc2VsLmVuZE9mZnNldCk7XG59XG5cbmV4cG9ydHMuY29weVNlbGVjdGlvbiA9IGNvcHlTZWxlY3Rpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVosSUFBSUEsWUFBWSxHQUFHQyxPQUFPLHdDQUF3QyxDQUFDO0FBQ25FQSxPQUFPLHFDQUFxQyxDQUFDO0FBQzdDLElBQUlDLFNBQVMsR0FBR0QsT0FBTyw2QkFBNkIsQ0FBQztBQUNyRCxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sOEJBQThCLENBQUM7QUFDdEQsSUFBSUcsRUFBRSxHQUFHSCxPQUFPLFVBQVUsQ0FBQztBQUUzQixTQUFTSSxhQUFhQSxDQUFDQyxNQUFNLEVBQUU7RUFDM0IsTUFBTUMsSUFBSSxHQUFHSixTQUFTLENBQUNLLGVBQWUsQ0FBQ0YsTUFBTSxDQUFDLEdBQUc7SUFDN0MsWUFBWSxFQUFFRywwQkFBMEIsQ0FBQ0gsTUFBTTtFQUNuRCxDQUFDLEdBQUc7SUFDQSxZQUFZLEVBQUVJLE1BQU0sQ0FBQ0osTUFBTSxDQUFDSyxhQUFhLENBQUNDLFlBQVksQ0FBQyxDQUFDO0VBQzVELENBQUM7RUFDRCxNQUFNQyxFQUFFLEdBQUdiLFlBQVksQ0FBQ2Msa0JBQWtCLENBQUNaLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDSSxNQUFNLENBQUMsQ0FBQztFQUN2RSxLQUFJLE1BQU1TLElBQUksSUFBSVIsSUFBSSxFQUFDO0lBQ25CLElBQUlBLElBQUksQ0FBQ1EsSUFBSSxDQUFDLEVBQUU7TUFDWkYsRUFBRSxDQUFDRyxPQUFPLENBQUNELElBQUksRUFBRVIsSUFBSSxDQUFDUSxJQUFJLENBQUMsQ0FBQztJQUNoQztFQUNKO0VBQ0EsT0FBT0YsRUFBRTtBQUNiO0FBQ0EsU0FBU0osMEJBQTBCQSxDQUFDSCxNQUFNLEVBQUU7RUFDeEMsTUFBTVcsR0FBRyxHQUFHYixFQUFFLENBQUNjLGNBQWMsQ0FBQ1osTUFBTSxDQUFDO0VBQ3JDLE1BQU1hLEdBQUcsR0FBR2YsRUFBRSxDQUFDZ0IsVUFBVSxDQUFDZCxNQUFNLENBQUM7RUFDakMsT0FBT2EsR0FBRyxDQUFDRSxTQUFTLENBQUNKLEdBQUcsQ0FBQ0ssV0FBVyxFQUFFTCxHQUFHLENBQUNNLFNBQVMsQ0FBQztBQUN4RDtBQUVBQyxPQUFPLENBQUNuQixhQUFhLEdBQUdBLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=