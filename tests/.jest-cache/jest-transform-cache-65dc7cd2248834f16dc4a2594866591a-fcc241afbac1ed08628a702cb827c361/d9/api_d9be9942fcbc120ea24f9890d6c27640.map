{"version":3,"names":["_axios","_interopRequireDefault","require","_FieldConverter","_fieldMappings","_createLogger","e","__esModule","default","log","createLogger","debug","window","APP_CONFIG","process","env","REACT_APP_API_BASE_URL","location","origin","ENDPOINT_CONVERSION_CONFIG","API_ENDPOINTS_MAPPING","shouldConvertEndpoint","url","skipConversion","some","skip","includes","autoConvert","endpoint","getConversionContext","context","Object","entries","contextMapping","getSessionIdFromCookies","cookies","document","cookie","split","name","value","trim","addSessionToUrl","sessionId","separator","determineBaseUrl","envUrl","finalUrl","endsWith","apiEndpoint","NODE_ENV","apiBaseUrl","defaultConfig","baseURL","headers","withCredentials","validateStatus","status","timeout","startsWith","httpsAgent","axios","create","defaults","windowConfig","environment","apiClient","exports","apiToken","common","extractAndConvertUrlParams","baseUrl","convertedParams","queryString","params","searchParams","URLSearchParams","key","originalParams","FieldConverter","toApiFormat","preserveUnknown","convertRequestDataRecursively","data","Array","isArray","converted","convertArray","nestedDataProperties","forEach","prop","map","item","keys","code","nom","interceptors","request","use","config","timestamp","Date","getTime","originalUrl","toString","newBaseUrl","mergedParams","method","originalData","convertedData","useDateHandling","toApiFormatWithDateHandling","toUpperCase","_ts","debugMode","REACT_APP_DEBUG","error","Promise","reject","handleSessionExpired","warn","localStorage","removeItem","event","CustomEvent","detail","message","now","dispatchEvent","setTimeout","hash","response","session_expired","Error","convertApiResponse","success","isAuthError","paiementProperties","factureProperties","parametreProperties","lignesProperties","dataProperties","convertObjectRecursively","hasSnakeCaseFields","isSimpleDataObject","directConverted","toFrontendFormat","obj","api","get","post","put","delete","length","postRaw","originalConfig","assign","getRaw","postWithContext","configureFieldConversion","disableFieldConversion","enableFieldConversion","testUrlConversion","testUrl","group","result","groupEnd","getConversionEndpoints","_default"],"sources":["api.js"],"sourcesContent":["// src/services/api.js - Version avec conversion GET intÃ©grÃ©e\r\n\r\nimport axios from 'axios';\r\nimport FieldConverter from '../utils/FieldConverter';\r\nimport { API_ENDPOINTS_MAPPING, toApiFormatWithDateHandling } from '../constants/fieldMappings';\r\nimport { createLogger } from '../utils/createLogger';\r\n\r\nconst log = createLogger('api');\r\n\r\nlog.debug('=================DEBUG API.JS-START=================');\r\nlog.debug(\"window.APP_CONFIG: \", window.APP_CONFIG);\r\nlog.debug(\"process.env.REACT_APP_API_BASE_URL:\", process.env.REACT_APP_API_BASE_URL);\r\nlog.debug(\"window.location:\", window.location);\r\nlog.debug(\"window.location.origin:\", window.location.origin);\r\nlog.debug('==================DEBUG API.JS-END==================');\r\n\r\n// ============================================\r\n// CONFIGURATION FIELD CONVERTER depuis constants\r\n// ============================================\r\n\r\n/**\r\n * âœ… Configuration utilisant API_ENDPOINTS_MAPPING depuis fieldMappings.js\r\n */\r\nconst ENDPOINT_CONVERSION_CONFIG = { ...API_ENDPOINTS_MAPPING };\r\n\r\n/**\r\n * DÃ©termine si un endpoint doit Ãªtre converti automatiquement\r\n */\r\nconst shouldConvertEndpoint = (url) => {\r\n  if (!url) return false;\r\n  \r\n  // VÃ©rifier les exclusions\r\n  if (ENDPOINT_CONVERSION_CONFIG.skipConversion.some(skip => url.includes(skip))) {\r\n    return false;\r\n  }\r\n  \r\n  // VÃ©rifier les inclusions\r\n  return ENDPOINT_CONVERSION_CONFIG.autoConvert.some(endpoint => url.includes(endpoint));\r\n};\r\n\r\n/**\r\n * Obtient le contexte de conversion pour un endpoint\r\n */\r\nconst getConversionContext = (url) => {\r\n  if (!url) return null;\r\n  \r\n  for (const [endpoint, context] of Object.entries(ENDPOINT_CONVERSION_CONFIG.contextMapping)) {\r\n    if (url.includes(endpoint)) {\r\n      return context;\r\n    }\r\n  }\r\n  \r\n  return null; // Utiliser les mappings par dÃ©faut\r\n};\r\n\r\n// ============================================\r\n// GESTION SESSION CENTRALISÃ‰E (existant)\r\n// ============================================\r\n\r\n// Fonction pour obtenir la session ID depuis les cookies\r\nconst getSessionIdFromCookies = () => {\r\n  const cookies = document.cookie.split(';');\r\n  for (let cookie of cookies) {\r\n    const [name, value] = cookie.trim().split('=');\r\n    if (name === 'PHPSESSID') {\r\n      return value;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// Fonction pour ajouter la session Ã  l'URL si nÃ©cessaire\r\nconst addSessionToUrl = (url) => {\r\n  const sessionId = getSessionIdFromCookies();\r\n  if (sessionId) {\r\n    const separator = url.includes('?') ? '&' : '?';\r\n    return `${url}${separator}PHPSESSID=${sessionId}`;\r\n  }\r\n  return url;\r\n};\r\n\r\n// DÃ©terminer l'URL de base pour les API avec prioritÃ© aux variables d'environnement\r\nconst determineBaseUrl = () => {\r\n  // Variables d'environnement React (mode sÃ©parÃ©)\r\n  if (process.env.REACT_APP_API_BASE_URL) {\r\n    const envUrl = process.env.REACT_APP_API_BASE_URL;\r\n    const finalUrl = envUrl.endsWith('/') ? envUrl : `${envUrl}/`;\r\n    log.debug('ðŸŒ Utilisation des variables d\\'environnement:', finalUrl);\r\n    return finalUrl;\r\n  }\r\n  \r\n  // Configuration window.APP_CONFIG (mode hybride)\r\n  if (window.APP_CONFIG?.apiEndpoint) {\r\n    const endpoint = window.APP_CONFIG.apiEndpoint;\r\n    const finalUrl = endpoint.endsWith('/') ? endpoint : `${endpoint}/`;\r\n    log.debug('ðŸªŸ Utilisation de window.APP_CONFIG:', finalUrl);\r\n    return finalUrl;\r\n  }\r\n  \r\n  // URL par dÃ©faut selon l'environnement\r\n  if (process.env.NODE_ENV === 'development') {\r\n    log.debug('ðŸ”§ Mode dÃ©veloppement - URL par dÃ©faut');\r\n    return 'https://localhost/fact-back/api/';\r\n  } else {\r\n    log.debug('ðŸš€ Mode production - Chemin relatif');\r\n    return '/api/';\r\n  }\r\n};\r\n\r\nconst apiBaseUrl = determineBaseUrl();\r\nlog.debug(\"ðŸŽ¯ API Base URL finale:\", apiBaseUrl);\r\n\r\n// Configuration avec CORS pour le mode sÃ©parÃ©\r\nconst defaultConfig = {\r\n  baseURL: apiBaseUrl,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'X-Requested-With': 'XMLHttpRequest'\r\n  },\r\n  // ðŸ”§ Configuration CORS pour mode sÃ©parÃ©\r\n  withCredentials: true, // Important pour les cookies de session\r\n  validateStatus: status => status < 500,\r\n  timeout: window.APP_CONFIG?.timeout || 30000\r\n};\r\n\r\n// Configuration HTTPS pour certificats auto-signÃ©s\r\nif (apiBaseUrl.startsWith('https://localhost')) {\r\n  log.debug('ðŸ”’ Configuration HTTPS localhost dÃ©tectÃ©e');\r\n  // Pour les certificats auto-signÃ©s en dÃ©veloppement\r\n  defaultConfig.httpsAgent = new axios.create().defaults.httpsAgent;\r\n}\r\n\r\n// Logs de dÃ©bogage\r\nlog.debug('ðŸ“‹ Configuration API:', { \r\n  apiBaseUrl,\r\n  baseURL: defaultConfig.baseURL,\r\n  windowConfig: window.APP_CONFIG,\r\n  environment: process.env.NODE_ENV,\r\n  withCredentials: defaultConfig.withCredentials\r\n});\r\n\r\n// CrÃ©er l'instance Axios\r\nconst apiClient = axios.create(defaultConfig);\r\n\r\n// Ajouter le token d'API s'il est disponible\r\nif (window.APP_CONFIG?.apiToken) {\r\n  apiClient.defaults.headers.common['Authorization'] = `Bearer ${window.APP_CONFIG.apiToken}`;\r\n  log.debug('ðŸ”‘ Token API ajoutÃ©');\r\n}\r\n\r\n// ============================================\r\n// NOUVELLE FONCTION : EXTRACTION ET CONVERSION DES PARAMÃˆTRES D'URL\r\n// ============================================\r\n\r\n/**\r\n * Extrait les paramÃ¨tres d'une URL et les convertit\r\n * @param {string} url - URL avec paramÃ¨tres\r\n * @returns {Object} { baseUrl, convertedParams }\r\n */\r\nfunction extractAndConvertUrlParams(url) {\r\n  if (!url || !url.includes('?')) {\r\n    return { baseUrl: url, convertedParams: {} };\r\n  }\r\n  \r\n  const [baseUrl, queryString] = url.split('?');\r\n  const params = {};\r\n  \r\n  // Parser les paramÃ¨tres de l'URL\r\n  const searchParams = new URLSearchParams(queryString);\r\n  for (const [key, value] of searchParams.entries()) {\r\n    params[key] = value;\r\n  }\r\n  \r\n  log.debug('ðŸ” ParamÃ¨tres extraits de l\\'URL:', params);\r\n  \r\n  // Convertir les paramÃ¨tres si l'endpoint doit Ãªtre converti\r\n  if (shouldConvertEndpoint(baseUrl)) {\r\n    const context = getConversionContext(baseUrl);\r\n    log.debug('ðŸ”„ Conversion des paramÃ¨tres d\\'URL:', { baseUrl, context, originalParams: params });\r\n    \r\n    const convertedParams = FieldConverter.toApiFormat(params, {\r\n      context,\r\n      preserveUnknown: true\r\n    });\r\n    \r\n    log.debug('âœ… ParamÃ¨tres d\\'URL convertis:', convertedParams);\r\n    return { baseUrl, convertedParams };\r\n  }\r\n  \r\n  return { baseUrl, convertedParams: params };\r\n}\r\n\r\n/**\r\n * Convertit rÃ©cursivement les donnÃ©es de requÃªte (camelCase vers snake_case)\r\n * Similaire Ã  convertApiResponse mais dans l'autre sens\r\n */\r\nfunction convertRequestDataRecursively(data, context = null) {\r\n  if (!data || typeof data !== 'object') {\r\n    return data;\r\n  }\r\n  \r\n  log.debug('ðŸ”„ convertRequestDataRecursively - DonnÃ©es entrantes:', data);\r\n  log.debug('ðŸ”„ convertRequestDataRecursively - Contexte:', context);\r\n  \r\n  // Si c'est un tableau, convertir chaque Ã©lÃ©ment\r\n  if (Array.isArray(data)) {\r\n    const converted = FieldConverter.convertArray(data, 'toApi', { context });\r\n    log.debug('âœ… Tableau converti vers API:', converted);\r\n    return converted;\r\n  }\r\n  \r\n  // Convertir l'objet avec FieldConverter\r\n  const converted = FieldConverter.toApiFormat(data, { context });\r\n  log.debug('ðŸ”„ Objet converti initial:', converted);\r\n  \r\n  // PropriÃ©tÃ©s spÃ©cifiques qui contiennent des donnÃ©es imbriquÃ©es\r\n  const nestedDataProperties = [\r\n    'lignes', 'lines', 'items', 'data', 'services', 'unites', \r\n    'clients', 'factures', 'paiements', 'details'\r\n  ];\r\n  \r\n  // Convertir rÃ©cursivement les propriÃ©tÃ©s imbriquÃ©es\r\n  nestedDataProperties.forEach(prop => {\r\n    if (converted[prop]) {\r\n      log.debug(`ðŸ”„ Conversion rÃ©cursive de la propriÃ©tÃ© '${prop}':`, converted[prop]);\r\n      \r\n      if (Array.isArray(converted[prop])) {\r\n        // Convertir chaque Ã©lÃ©ment du tableau\r\n        converted[prop] = converted[prop].map(item => {\r\n          if (typeof item === 'object' && item !== null) {\r\n            return convertRequestDataRecursively(item, context);\r\n          }\r\n          return item;\r\n        });\r\n        log.debug(`âœ… Tableau '${prop}' converti rÃ©cursivement:`, converted[prop]);\r\n      } else if (typeof converted[prop] === 'object' && converted[prop] !== null) {\r\n        // Convertir l'objet rÃ©cursivement\r\n        converted[prop] = convertRequestDataRecursively(converted[prop], context);\r\n        log.debug(`âœ… Objet '${prop}' converti rÃ©cursivement:`, converted[prop]);\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Parcourir toutes les autres propriÃ©tÃ©s pour traiter les objets imbriquÃ©s\r\n  Object.keys(converted).forEach(key => {\r\n    if (!nestedDataProperties.includes(key) && converted[key]) {\r\n      if (Array.isArray(converted[key])) {\r\n        // Convertir les tableaux imbriquÃ©s\r\n        converted[key] = converted[key].map(item => {\r\n          if (typeof item === 'object' && item !== null) {\r\n            return convertRequestDataRecursively(item, context);\r\n          }\r\n          return item;\r\n        });\r\n      } else if (typeof converted[key] === 'object' && converted[key] !== null) {\r\n        // Traitement spÃ©cial pour les objets unite/service dans les lignes\r\n        if (key === 'unite' || key === 'service') {\r\n          // Si c'est un objet unite/service, extraire seulement le code\r\n          if (converted[key].code) {\r\n            log.debug(`ðŸ”„ Simplification objet ${key}:`, converted[key], 'â†’', converted[key].code);\r\n            converted[key] = converted[key].code;\r\n          } else if (converted[key].nom) {\r\n            log.debug(`ðŸ”„ Simplification objet ${key}:`, converted[key], 'â†’', converted[key].nom);\r\n            converted[key] = converted[key].nom;\r\n          }\r\n        } else {\r\n          // Pour les autres objets, conversion rÃ©cursive normale\r\n          converted[key] = convertRequestDataRecursively(converted[key], context);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  \r\n  log.debug('âœ… Objet final converti rÃ©cursivement:', converted);\r\n  return converted;\r\n}\r\n\r\n// ============================================\r\n// INTERCEPTEURS AVEC FIELD CONVERTER Ã‰TENDU\r\n// ============================================\r\n\r\n// ðŸ”§ INTERCEPTEUR AMÃ‰LIORÃ‰ - AVEC CONVERSION GET\r\napiClient.interceptors.request.use(\r\n  config => {\r\n    // Ajouter un timestamp pour Ã©viter le cache\r\n    const timestamp = new Date().getTime();\r\n    \r\n    // ðŸ”§ NOUVELLE FONCTIONNALITÃ‰: CONVERSION DES PARAMÃˆTRES D'URL\r\n    if (config.url && config.url.includes('?')) {\r\n      const { baseUrl, convertedParams } = extractAndConvertUrlParams(config.url);\r\n      \r\n      // Remplacer l'URL par la version sans paramÃ¨tres\r\n      config.url = baseUrl;\r\n      \r\n      // Fusionner les paramÃ¨tres convertis avec les params existants\r\n      config.params = {\r\n        ...convertedParams,\r\n        ...config.params // Les params explicites ont la prioritÃ©\r\n      };\r\n      \r\n      log.debug('ðŸ”§ URL modifiÃ©e:', {\r\n        originalUrl: config.url + '?' + new URLSearchParams(convertedParams).toString(),\r\n        newBaseUrl: baseUrl,\r\n        mergedParams: config.params\r\n      });\r\n    }\r\n    \r\n    // CORRECTION: Ajouter PHPSESSID Ã  l'URL pour tous les fichiers .php\r\n    if (config.url && config.url.includes('.php')) {\r\n      config.url = addSessionToUrl(config.url);\r\n      log.debug('ðŸ” Session ajoutÃ©e Ã  l\\'URL:', config.url);\r\n    }\r\n    \r\n    // âœ… CONVERSION AUTOMATIQUE DES DONNÃ‰ES avec gestion des dates (POST, PUT)\r\n    if ((config.method === 'post' || config.method === 'put') && config.data) {\r\n      if (shouldConvertEndpoint(config.url)) {\r\n        const context = getConversionContext(config.url);\r\n        \r\n        log.debug('ðŸ”„ Conversion Frontend â†’ API avec rÃ©cursion complÃ¨te:', {\r\n          url: config.url,\r\n          context,\r\n          originalData: config.data\r\n        });\r\n        \r\n        // Utiliser la nouvelle fonction de conversion rÃ©cursive\r\n        let convertedData;\r\n        \r\n        if (ENDPOINT_CONVERSION_CONFIG.useDateHandling) {\r\n          // PremiÃ¨re passe : conversion avec gestion des dates\r\n          convertedData = toApiFormatWithDateHandling(config.data, {\r\n            context,\r\n            preserveUnknown: true\r\n          });\r\n          // DeuxiÃ¨me passe : conversion rÃ©cursive pour les objets imbriquÃ©s\r\n          convertedData = convertRequestDataRecursively(convertedData, context);\r\n        } else {\r\n          // Conversion rÃ©cursive directe\r\n          convertedData = convertRequestDataRecursively(config.data, context);\r\n        }\r\n        \r\n        config.data = convertedData;\r\n        \r\n        log.debug('âœ… DonnÃ©es converties avec rÃ©cursion complÃ¨te:', convertedData);\r\n      }\r\n    }\r\n    \r\n    // ðŸ”§ CONVERSION DES PARAMÃˆTRES GET et DELETE (objets params)\r\n    if ((config.method === 'get' || config.method === 'delete') && config.params && shouldConvertEndpoint(config.url)) {\r\n      const context = getConversionContext(config.url);\r\n      \r\n      log.debug(`ðŸ”„ Conversion paramÃ¨tres ${config.method.toUpperCase()} Frontend â†’ API:`, {\r\n        url: config.url,\r\n        context,\r\n        originalParams: config.params\r\n      });\r\n      \r\n      // Conversion des paramÃ¨tres en utilisant FieldConverter\r\n      const convertedParams = FieldConverter.toApiFormat(config.params, {\r\n        context,\r\n        preserveUnknown: true\r\n      });\r\n      \r\n      config.params = convertedParams;\r\n      \r\n      log.debug(`âœ… ParamÃ¨tres ${config.method.toUpperCase()} convertis:`, convertedParams);\r\n    }\r\n    \r\n    // Pour les requÃªtes GET (ajout du timestamp aprÃ¨s conversion)\r\n    if (config.method === 'get') {\r\n      config.params = {\r\n        ...config.params,\r\n        _ts: timestamp\r\n      };\r\n    }\r\n    \r\n    // Journalisation en mode dÃ©veloppement\r\n    const debugMode = window.APP_CONFIG?.debugMode || process.env.REACT_APP_DEBUG === 'true';\r\n    if (debugMode) {\r\n      log.debug('ðŸ“¤ RequÃªte API:', config.method.toUpperCase(), config.url, config.params || config.data);\r\n      log.debug('ðŸ”— URL complÃ¨te:', config.baseURL + config.url);\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  error => {\r\n    log.error('âŒ Erreur lors de la prÃ©paration de la requÃªte:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// âœ… FONCTION DE GESTION SESSION EXPIRÃ‰E\r\nfunction handleSessionExpired() {\r\n  log.warn('ðŸš¨ Gestion de session expirÃ©e...');\r\n  \r\n  // Nettoyer l'authentification locale\r\n  localStorage.removeItem('user');\r\n  \r\n  // DÃ©clencher l'Ã©vÃ©nement global pour informer l'app\r\n  const event = new CustomEvent('auth-expired', {\r\n    detail: { \r\n      message: 'Votre session a expirÃ©. Veuillez vous reconnecter.',\r\n      timestamp: Date.now()\r\n    }\r\n  });\r\n  window.dispatchEvent(event);\r\n  \r\n  // Rediriger vers login aprÃ¨s un court dÃ©lai\r\n  setTimeout(() => {\r\n    window.location.hash = '#/login?session_expired=true';\r\n  }, 100);\r\n}\r\n\r\n// Intercepteur pour les rÃ©ponses - AVEC CONVERSION AUTOMATIQUE\r\napiClient.interceptors.response.use(\r\n  response => {\r\n    log.debug('ðŸ“¥ Intercepteur rÃ©ponse - URL:', response.config.url);\r\n    log.debug('ðŸ“¥ Intercepteur rÃ©ponse - DonnÃ©es brutes:', response.data);\r\n    \r\n    // âœ… VÃ‰RIFICATION SESSION EXPIRÃ‰E\r\n    if (response.data) {\r\n      const data = response.data;\r\n      \r\n      // VÃ©rifier les diffÃ©rents indicateurs de session expirÃ©e\r\n      if (data.session_expired === true || \r\n          data.error === 'Session expirÃ©e' || \r\n          data.error === 'Non authentifiÃ©' ||\r\n          data.message === 'Session expirÃ©e' ||\r\n          data.message === 'Non authentifiÃ©') {\r\n        \r\n        log.warn('ðŸš¨ Session expirÃ©e dÃ©tectÃ©e dans la rÃ©ponse API');\r\n        handleSessionExpired();\r\n        return Promise.reject(new Error('SESSION_EXPIRED'));\r\n      }\r\n    }\r\n    \r\n    // Conversion automatique des rÃ©ponses (code existant)\r\n    if (response.data && shouldConvertEndpoint(response.config.url)) {\r\n      const context = getConversionContext(response.config.url);\r\n      \r\n      // log.debug('ðŸ”„ Conversion API â†’ Frontend:', {\r\n      //   url: response.config.url,\r\n      //   context,\r\n      //   shouldConvert: true,\r\n      //   originalData: response.data\r\n      // });\r\n      \r\n      const convertedData = convertApiResponse(response.data, context);\r\n      response.data = convertedData;\r\n      \r\n      log.debug('âœ… RÃ©ponse convertie:', convertedData);\r\n    } else {\r\n      log.debug('â­ï¸ Pas de conversion pour:', response.config.url);\r\n    }\r\n    \r\n    // Journalisation en mode dÃ©veloppement\r\n    const debugMode = window.APP_CONFIG?.debugMode || process.env.REACT_APP_DEBUG === 'true';\r\n    if (debugMode) {\r\n      log.debug('ðŸ“¥ RÃ©ponse API:', response.status, response.config.url, response.data);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n  error => {\r\n    // Journalisation des erreurs\r\n    const debugMode = window.APP_CONFIG?.debugMode || process.env.REACT_APP_DEBUG === 'true';\r\n    if (debugMode) {\r\n      log.error('âŒ Erreur API:', \r\n        error.response ? `${error.response.status} ${error.response.config.url}` : error.message,\r\n        error\r\n      );\r\n    }\r\n    \r\n    // âœ… GESTION DES ERREURS 401 - Session expirÃ©e\r\n    if (error.response && error.response.status === 401) {\r\n      log.warn('ðŸš¨ Session expirÃ©e ou non authentifiÃ©e');\r\n      \r\n      // Nettoyer le localStorage\r\n      localStorage.removeItem('user');\r\n      \r\n      // Ã‰mettre un Ã©vÃ©nement personnalisÃ© pour que App.js puisse gÃ©rer la dÃ©connexion\r\n      window.dispatchEvent(new CustomEvent('auth-expired', {\r\n        detail: { message: 'Votre session a expirÃ©. Veuillez vous reconnecter.' }\r\n      }));\r\n      \r\n      // EmpÃªcher l'affichage du message gÃ©nÃ©rique \"Erreur de connexion\"\r\n      return Promise.reject({\r\n        response: {\r\n          status: 401,\r\n          data: {\r\n            success: false,\r\n            message: 'Session expirÃ©e',\r\n            code: 401\r\n          }\r\n        },\r\n        isAuthError: true // âœ… Flag pour identifier les erreurs d'authentification\r\n      });\r\n    }\r\n    \r\n    // Pour toutes les autres erreurs, retourner l'erreur normale\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// ============================================\r\n// FONCTIONS UTILITAIRES POUR CONVERSION\r\n// ============================================\r\n\r\n/**\r\n * Convertit intelligemment une rÃ©ponse d'API\r\n * @param {any} data - DonnÃ©es de rÃ©ponse Ã  convertir\r\n * @param {string} context - Contexte de conversion\r\n * @returns {any} DonnÃ©es converties\r\n */\r\nfunction convertApiResponse(data, context = null) {\r\n  if (!data || typeof data !== 'object') {\r\n    return data;\r\n  }\r\n  \r\n  log.debug('ðŸ”„ convertApiResponse - DonnÃ©es entrantes:', data);\r\n  log.debug('typeof data:', typeof data);\r\n  log.debug('ðŸ”„ convertApiResponse - Contexte:', context);\r\n  \r\n  // Si c'est un tableau, convertir chaque Ã©lÃ©ment\r\n  if (Array.isArray(data)) {\r\n    const converted = FieldConverter.convertArray(data, 'toFrontend', { context });\r\n    log.debug('âœ… Tableau converti:', converted);\r\n    return converted;\r\n  }\r\n  \r\n  // âœ… CORRECTION: Traiter les objets de rÃ©ponse wrap (success, paiement, etc.)\r\n  const converted = { ...data };\r\n  log.debug('ðŸ”„ Objet converti initial:', converted);\r\n  \r\n  // âœ… NOUVEAU: PropriÃ©tÃ©s spÃ©cifiques aux paiements\r\n  const paiementProperties = [\r\n    'paiement', 'paiements'\r\n  ];\r\n\r\n  const factureProperties = ['facture', 'factures'];\r\n\r\n  const parametreProperties = ['parametres', 'parametre'];\r\n\r\n  // âœ… AJOUT: PropriÃ©tÃ© spÃ©cifique aux lignes de facture\r\n  const lignesProperties = ['lignes'];\r\n\r\n  // âœ… NOUVEAU: PropriÃ©tÃ©s spÃ©cifiques aux autres entitÃ©s\r\n  const dataProperties = [\r\n    'services', 'unites', 'servicesUnites', 'typesTarifs', 'tarifs', 'tarifsSpeciaux',\r\n    'clients', 'users', 'items', 'data', 'result',\r\n    ...paiementProperties,\r\n    ...factureProperties,\r\n    ...lignesProperties,\r\n    ...parametreProperties\r\n  ];\r\n  \r\n  // Convertir les propriÃ©tÃ©s qui contiennent des donnÃ©es mÃ©tier\r\n  dataProperties.forEach(prop => {\r\n    if (converted[prop]) {\r\n      log.debug(`ðŸ”„ Conversion de la propriÃ©tÃ© '${prop}':`, converted[prop]);\r\n      \r\n      if (Array.isArray(converted[prop])) {\r\n        converted[prop] = FieldConverter.convertArray(converted[prop], 'toFrontend', { context });\r\n        log.debug(`âœ… Tableau '${prop}' converti:`, converted[prop]);\r\n      } else if (typeof converted[prop] === 'object') {\r\n        // âœ… CORRECTION PRINCIPALE: Conversion rÃ©cursive complÃ¨te des objets\r\n        converted[prop] = convertObjectRecursively(converted[prop], context);\r\n        log.debug(`âœ… Objet '${prop}' converti:`, converted[prop]);\r\n      }\r\n    }\r\n  });\r\n  \r\n  // âœ… NOUVELLE LOGIQUE: Convertir TOUJOURS les objets simples avec snake_case\r\n  const hasSnakeCaseFields = Object.keys(converted).some(key => key.includes('_') && key !== 'success' && key !== 'error');\r\n  const isSimpleDataObject = !dataProperties.some(prop => converted[prop]);\r\n  \r\n  if (isSimpleDataObject && hasSnakeCaseFields) {\r\n    log.debug('ðŸ”„ Conversion objet simple avec snake_case:', converted);\r\n    // âœ… CORRECTION: Convertir l'objet entier, pas seulement data\r\n    const directConverted = FieldConverter.toFrontendFormat(converted, { context });\r\n    log.debug('âœ… Objet simple converti:', directConverted);\r\n    return directConverted;\r\n  }\r\n  \r\n  log.debug('âœ… RÃ©ponse finale convertie:', converted);\r\n  return converted;\r\n}\r\n\r\n/**\r\n * âœ… NOUVELLE FONCTION: Conversion rÃ©cursive complÃ¨te d'un objet\r\n * Cette fonction s'assure que tous les tableaux imbriquÃ©s sont aussi convertis\r\n */\r\nfunction convertObjectRecursively(obj, context = null) {\r\n  if (!obj || typeof obj !== 'object') {\r\n    return obj;\r\n  }\r\n\r\n  // Si c'est un tableau, convertir chaque Ã©lÃ©ment\r\n  if (Array.isArray(obj)) {\r\n    return FieldConverter.convertArray(obj, 'toFrontend', { context });\r\n  }\r\n\r\n  // Convertir l'objet avec FieldConverter\r\n  const converted = FieldConverter.toFrontendFormat(obj, { context });\r\n  \r\n  // âœ… CORRECTION PRINCIPALE: Parcourir toutes les propriÃ©tÃ©s pour convertir les tableaux imbriquÃ©s\r\n  Object.keys(converted).forEach(key => {\r\n    if (Array.isArray(converted[key])) {\r\n      log.debug(`ðŸ”„ Conversion tableau imbriquÃ© '${key}':`, converted[key]);\r\n      converted[key] = FieldConverter.convertArray(converted[key], 'toFrontend', { context });\r\n      log.debug(`âœ… Tableau imbriquÃ© '${key}' converti:`, converted[key]);\r\n    } else if (converted[key] && typeof converted[key] === 'object' && !Array.isArray(converted[key])) {\r\n      // Conversion rÃ©cursive pour les objets imbriquÃ©s\r\n      converted[key] = convertObjectRecursively(converted[key], context);\r\n    }\r\n  });\r\n\r\n  return converted;\r\n}\r\n\r\n// ============================================\r\n// MÃ‰THODES UTILITAIRES (modifiÃ©es)\r\n// ============================================\r\n\r\nconst api = {\r\n  get: async (url, params = {}) => {\r\n    try {\r\n      // ðŸ”§ GESTION TRANSPARENTE: URL avec paramÃ¨tres OU objet params\r\n      const response = await apiClient.get(url, { params });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  post: async (url, data = {}) => {\r\n    try {\r\n      log.debug('ðŸ“¤ API.js -- POST -- DonnÃ©es envoyÃ©es (avant conversion):', data);\r\n      log.debug('ðŸ“¤ API.js -- POST -- URL:', url);\r\n      const response = await apiClient.post(url, data);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  put: async (url, data = {}) => {\r\n    try {\r\n      const response = await apiClient.put(url, data);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (url, params = {}) => {\r\n    try {\r\n      // ðŸ”§ AMÃ‰LIORATION: Support des paramÃ¨tres pour DELETE\r\n      if (Object.keys(params).length > 0) {\r\n        const response = await apiClient.delete(url, { params });\r\n        return response.data;\r\n      } else {\r\n        const response = await apiClient.delete(url);\r\n        return response.data;\r\n      }\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // âœ… NOUVELLES MÃ‰THODES pour contrÃ´le manuel de la conversion\r\n  \r\n  postRaw: async (url, data = {}) => {\r\n    // POST sans conversion automatique\r\n    const originalConfig = { ...ENDPOINT_CONVERSION_CONFIG };\r\n    ENDPOINT_CONVERSION_CONFIG.autoConvert = [];\r\n    \r\n    try {\r\n      const response = await apiClient.post(url, data);\r\n      return response.data;\r\n    } finally {\r\n      Object.assign(ENDPOINT_CONVERSION_CONFIG, originalConfig);\r\n    }\r\n  },\r\n  \r\n  getRaw: async (url, params = {}) => {\r\n    // GET sans conversion automatique\r\n    const originalConfig = { ...ENDPOINT_CONVERSION_CONFIG };\r\n    ENDPOINT_CONVERSION_CONFIG.autoConvert = [];\r\n    \r\n    try {\r\n      const response = await apiClient.get(url, { params });\r\n      return response.data;\r\n    } finally {\r\n      Object.assign(ENDPOINT_CONVERSION_CONFIG, originalConfig);\r\n    }\r\n  },\r\n  \r\n  postWithContext: async (url, data = {}, context = null) => {\r\n    // POST avec contexte spÃ©cifique\r\n    const convertedData = FieldConverter.toApiFormat(data, { context });\r\n    const response = await apiClient.post(url, convertedData);\r\n    \r\n    // Conversion manuelle de la rÃ©ponse\r\n    if (response.data) {\r\n      response.data = convertApiResponse(response.data, context);\r\n    }\r\n    \r\n    return response.data;\r\n  }\r\n};\r\n\r\n// ============================================\r\n// CONFIGURATION ET EXPORT\r\n// ============================================\r\n\r\n// Fonction pour configurer les endpoints de conversion\r\nexport const configureFieldConversion = (config) => {\r\n  Object.assign(ENDPOINT_CONVERSION_CONFIG, config);\r\n  log.debug('ðŸ”§ Configuration FieldConverter mise Ã  jour:', ENDPOINT_CONVERSION_CONFIG);\r\n};\r\n\r\n// Fonction pour dÃ©sactiver temporairement la conversion\r\nexport const disableFieldConversion = () => {\r\n  ENDPOINT_CONVERSION_CONFIG.autoConvert = [];\r\n  log.debug('â¸ï¸ Conversion automatique dÃ©sactivÃ©e');\r\n};\r\n\r\n// Fonction pour rÃ©activer la conversion\r\nexport const enableFieldConversion = () => {\r\n  ENDPOINT_CONVERSION_CONFIG.autoConvert = [\r\n    'tarif-api.php',\r\n    'client-api.php', \r\n    'facture-api.php',\r\n    'user-api.php'\r\n  ];\r\n  log.debug('â–¶ï¸ Conversion automatique rÃ©activÃ©e');\r\n};\r\n\r\n// ============================================\r\n// UTILITAIRES DE TEST\r\n// ============================================\r\n\r\n/**\r\n * Teste la conversion d'URL avec paramÃ¨tres\r\n * @param {string} testUrl - URL de test\r\n */\r\nfunction testUrlConversion(testUrl) {\r\n  log.group('ðŸ§ª Test conversion URL');\r\n  log.debug('URL originale:', testUrl);\r\n  \r\n  const result = extractAndConvertUrlParams(testUrl);\r\n  log.debug('RÃ©sultat:', result);\r\n  \r\n  // Reconstituer l'URL finale\r\n  const finalUrl = result.baseUrl + '?' + new URLSearchParams(result.convertedParams).toString();\r\n  log.debug('URL finale:', finalUrl);\r\n  \r\n  log.groupEnd();\r\n}\r\n\r\n// âœ… Fonctions utilitaires pour debug\r\nexport const getConversionEndpoints = () => ENDPOINT_CONVERSION_CONFIG;\r\n\r\n// ============================================\r\n// EXPORTS DES NOUVELLES FONCTIONS\r\n// ============================================\r\n\r\n// Rendre les fonctions disponibles globalement pour les tests\r\nwindow.extractAndConvertUrlParams = extractAndConvertUrlParams;\r\nwindow.shouldConvertEndpoint = shouldConvertEndpoint;\r\nwindow.getConversionContext = getConversionContext;\r\nwindow.getConversionEndpoints = getConversionEndpoints;\r\n\r\n// Export de la fonction de test pour debug\r\nexport { testUrlConversion };\r\n\r\nexport { apiClient };\r\nexport default api;"],"mappings":"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","ignoreList":[]}