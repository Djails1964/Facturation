{"version":3,"names":["_react","_interopRequireWildcard","require","_createLogger","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","log","createLogger","UnifiedFilter","filterType","filterOptions","filters","onFilterChange","onResetFilters","showFilters","onToggleFilters","className","totalCount","filteredCount","debug","filterConfig","useMemo","fields","labels","annee","client","etat","defaultLabels","mois","methode","statut","code","nom","description","service","unite","typeTarif","hasActiveFilters","values","some","value","handleFilterChange","useCallback","field","renderFilter","options","createElement","key","onChange","target","map","option","index","undefined","label","length","onClick","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","Fragment","display","disabled","_default","exports"],"sources":["UnifiedFilter.jsx"],"sourcesContent":["// src/components/shared/filters/UnifiedFilter.jsx\r\n// ✅ VERSION ÉTENDUE avec support complet des tarifs\r\n\r\nimport React, { useMemo, useCallback, useEffect } from 'react';\r\nimport '../../../styles/shared/UnifiedFilter.css';\r\nimport { createLogger } from '../../../utils/createLogger';\r\n\r\nconst log = createLogger('UnifiedFilter');\r\n\r\n/**\r\n * Composant de filtre unifiié réutilisable\r\n * Supporte : factures, paiements, services, unites, types-tarifs, tarifs-standards, tarifs-speciaux\r\n */\r\nconst UnifiedFilter = ({\r\n  // Configuration\r\n  filterType, // 'factures', 'paiements', 'services', 'unites', 'types-tarifs', 'tarifs-standards', 'tarifs-speciaux'\r\n  \r\n  // Données pour les options\r\n  filterOptions = {},\r\n  \r\n  // État\r\n  filters = {},\r\n  onFilterChange,\r\n  onResetFilters,\r\n  \r\n  // Affichage\r\n  showFilters = false,\r\n  onToggleFilters,\r\n  \r\n  // Options\r\n  className = '',\r\n  totalCount = 0,\r\n  filteredCount = 0\r\n}) => {\r\n\r\n  log.debug(\"totalCount : \", totalCount);\r\n  log.debug(\"filteredCount : \", filteredCount);\r\n\r\n  // Configuration selon le type\r\n  const filterConfig = useMemo(() => {\r\n    switch (filterType) {\r\n      case 'factures':\r\n        return {\r\n          fields: ['annee', 'client', 'etat'],\r\n          labels: {\r\n            annee: 'Année',\r\n            client: 'Client',\r\n            etat: 'État'\r\n          },\r\n          defaultLabels: {\r\n            annee: 'Toutes les années',\r\n            client: 'Tous les clients',\r\n            etat: 'Tous les états'\r\n          }\r\n        };\r\n\r\n      case 'paiements':\r\n        return {\r\n          fields: ['annee', 'mois', 'client', 'methode', 'statut'],\r\n          labels: {\r\n            annee: 'Année',\r\n            mois: 'Mois',\r\n            client: 'Client',\r\n            methode: 'Méthode',\r\n            statut: 'Statut'\r\n          },\r\n          defaultLabels: {\r\n            annee: 'Toutes les années',\r\n            mois: 'Tous les mois',\r\n            client: 'Tous les clients',\r\n            methode: 'Toutes les méthodes',\r\n            statut: 'Tous les statuts'\r\n          }\r\n        };\r\n\r\n      // ✅ NOUVEAUX TYPES POUR TARIFS\r\n      case 'services':\r\n        return {\r\n          fields: ['code', 'nom', 'description', 'statut'],\r\n          labels: {\r\n            code: 'Code',\r\n            nom: 'Nom',\r\n            description: 'Description',\r\n            statut: 'Statut'\r\n          },\r\n          defaultLabels: {\r\n            code: 'Tous les codes',\r\n            nom: 'Tous les noms',\r\n            description: 'Toutes les descriptions',\r\n            statut: 'Tous les statuts'\r\n          }\r\n        };\r\n\r\n      case 'unites':\r\n        return {\r\n          fields: ['code', 'nom', 'description'],\r\n          labels: {\r\n            code: 'Code',\r\n            nom: 'Nom',\r\n            description: 'Description'\r\n          },\r\n          defaultLabels: {\r\n            code: 'Tous les codes',\r\n            nom: 'Tous les noms',\r\n            description: 'Toutes les descriptions'\r\n          }\r\n        };\r\n\r\n      case 'types-tarifs':\r\n        return {\r\n          fields: ['code', 'nom', 'description'],\r\n          labels: {\r\n            code: 'Code',\r\n            nom: 'Nom',\r\n            description: 'Description'\r\n          },\r\n          defaultLabels: {\r\n            code: 'Tous les codes',\r\n            nom: 'Tous les noms',\r\n            description: 'Toutes les descriptions'\r\n          }\r\n        };\r\n\r\n      case 'tarifs-standards':\r\n      case 'tarifs':\r\n        return {\r\n          fields: ['service', 'unite', 'typeTarif', 'statut'],\r\n          labels: {\r\n            service: 'Service',\r\n            unite: 'Unité',\r\n            typeTarif: 'Type',\r\n            statut: 'État'\r\n          },\r\n          defaultLabels: {\r\n            service: 'Tous les services',\r\n            unite: 'Toutes les unités',\r\n            typeTarif: 'Tous les types',\r\n            statut: 'Tous les états'\r\n          }\r\n        };\r\n\r\n      case 'tarifs-speciaux':\r\n        return {\r\n          fields: ['client', 'service', 'unite', 'statut'],\r\n          labels: {\r\n            client: 'Client',\r\n            service: 'Service',\r\n            unite: 'Unité',\r\n            statut: 'État'\r\n          },\r\n          defaultLabels: {\r\n            client: 'Tous les clients',\r\n            service: 'Tous les services',\r\n            unite: 'Toutes les unités',\r\n            statut: 'Tous les états'\r\n          }\r\n        };\r\n\r\n      default:\r\n        return { fields: [], labels: {}, defaultLabels: {} };\r\n    }\r\n  }, [filterType]);\r\n\r\n  // Vérifier filtres actifs\r\n  const hasActiveFilters = useMemo(() => {\r\n    return Object.values(filters).some(value => value && value !== '' && value !== 'Tous');\r\n  }, [filters]);\r\n\r\n  // Gestionnaire de changement\r\n  const handleFilterChange = useCallback((field, value) => {\r\n    if (onFilterChange) {\r\n      onFilterChange(field, value);\r\n    }\r\n  }, [onFilterChange]);\r\n\r\n  // Rendu d'un filtre\r\n  const renderFilter = useCallback((field) => {\r\n    const options = filterOptions[field] || [];\r\n    \r\n    return (\r\n      <div key={`filter-${field}`} className=\"input-group\">\r\n        <select\r\n          value={filters[field] || ''}\r\n          onChange={(e) => handleFilterChange(field, e.target.value)}\r\n        >\r\n          <option value=\"\">{filterConfig.defaultLabels[field]}</option>\r\n          {options.map((option, index) => {\r\n            const value = option.value !== undefined ? option.value : option;\r\n            const label = option.label || option;\r\n            return (\r\n              <option key={`${field}-${value}-${index}`} value={value}>\r\n                {label}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n        <label>{filterConfig.labels[field]}</label>\r\n      </div>\r\n    );\r\n  }, [filters, filterOptions, filterConfig, handleFilterChange]);\r\n\r\n  if (!filterConfig.fields.length) return null;\r\n\r\n  return (\r\n    <div className={`unified-filters ${className}`}>\r\n      {/* Bouton toggle */}\r\n      <button \r\n        className=\"btn-primary filters-toggle\"\r\n        onClick={onToggleFilters}\r\n      >\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n          <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\"></polygon>\r\n        </svg>\r\n        Filtres\r\n        \r\n        {hasActiveFilters && (\r\n          <>\r\n          {log.debug('Badge debug:', { filteredCount, totalCount, display: `${filteredCount} sur ${totalCount}` })}\r\n          <span className=\"filter-active-badge\">\r\n            {filteredCount} sur {totalCount}\r\n          </span>\r\n          </>\r\n        )}\r\n      </button>\r\n      \r\n      {/* Panel de filtres */}\r\n      {showFilters && (\r\n        <div className=\"filters-panel\">\r\n          <div className=\"filter-row\">\r\n            {filterConfig.fields.map(field => renderFilter(field))}\r\n            \r\n            <div className=\"filter-actions\">\r\n              <button \r\n                onClick={onResetFilters} \r\n                className=\"btn-secondary\"\r\n                disabled={!hasActiveFilters}\r\n              >\r\n                Réinitialiser\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UnifiedFilter;"],"mappings":"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","ignoreList":[]}