2a0e065cebb8235cb30389e210d998de
'use strict';

var UI = require("../../document/UI.js");
require("../../utils/dataTransfer/Clipboard.js");
var isContentEditable = require("../../utils/edit/isContentEditable.js");
var selection = require("../../utils/focus/selection.js");

/**
 * Determine which selection logic and selection ranges to consider.
 */
function getTargetTypeAndSelection(node) {
  const element = getElement(node);
  if (element && selection.hasOwnSelection(element)) {
    return {
      type: 'input',
      selection: UI.getUISelection(element)
    };
  }
  const selection$1 = element === null || element === undefined ? undefined : element.ownerDocument.getSelection();
  // It is possible to extend a single-range selection into a contenteditable.
  // This results in the range acting like a range outside of contenteditable.
  const isCE = isContentEditable.getContentEditable(node) && (selection$1 === null || selection$1 === undefined ? undefined : selection$1.anchorNode) && isContentEditable.getContentEditable(selection$1.anchorNode);
  return {
    type: isCE ? 'contenteditable' : 'default',
    selection: selection$1
  };
}
function getElement(node) {
  return node.nodeType === 1 ? node : node.parentElement;
}
exports.getTargetTypeAndSelection = getTargetTypeAndSelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVSSIsInJlcXVpcmUiLCJpc0NvbnRlbnRFZGl0YWJsZSIsInNlbGVjdGlvbiIsImdldFRhcmdldFR5cGVBbmRTZWxlY3Rpb24iLCJub2RlIiwiZWxlbWVudCIsImdldEVsZW1lbnQiLCJoYXNPd25TZWxlY3Rpb24iLCJ0eXBlIiwiZ2V0VUlTZWxlY3Rpb24iLCJzZWxlY3Rpb24kMSIsInVuZGVmaW5lZCIsIm93bmVyRG9jdW1lbnQiLCJnZXRTZWxlY3Rpb24iLCJpc0NFIiwiZ2V0Q29udGVudEVkaXRhYmxlIiwiYW5jaG9yTm9kZSIsIm5vZGVUeXBlIiwicGFyZW50RWxlbWVudCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJnZXRUYXJnZXRUeXBlQW5kU2VsZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFVJID0gcmVxdWlyZSgnLi4vLi4vZG9jdW1lbnQvVUkuanMnKTtcbnJlcXVpcmUoJy4uLy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnZhciBpc0NvbnRlbnRFZGl0YWJsZSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2VkaXQvaXNDb250ZW50RWRpdGFibGUuanMnKTtcbnZhciBzZWxlY3Rpb24gPSByZXF1aXJlKCcuLi8uLi91dGlscy9mb2N1cy9zZWxlY3Rpb24uanMnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hpY2ggc2VsZWN0aW9uIGxvZ2ljIGFuZCBzZWxlY3Rpb24gcmFuZ2VzIHRvIGNvbnNpZGVyLlxuICovIGZ1bmN0aW9uIGdldFRhcmdldFR5cGVBbmRTZWxlY3Rpb24obm9kZSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBnZXRFbGVtZW50KG5vZGUpO1xuICAgIGlmIChlbGVtZW50ICYmIHNlbGVjdGlvbi5oYXNPd25TZWxlY3Rpb24oZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgICAgICBzZWxlY3Rpb246IFVJLmdldFVJU2VsZWN0aW9uKGVsZW1lbnQpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdGlvbiQxID0gZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgLy8gSXQgaXMgcG9zc2libGUgdG8gZXh0ZW5kIGEgc2luZ2xlLXJhbmdlIHNlbGVjdGlvbiBpbnRvIGEgY29udGVudGVkaXRhYmxlLlxuICAgIC8vIFRoaXMgcmVzdWx0cyBpbiB0aGUgcmFuZ2UgYWN0aW5nIGxpa2UgYSByYW5nZSBvdXRzaWRlIG9mIGNvbnRlbnRlZGl0YWJsZS5cbiAgICBjb25zdCBpc0NFID0gaXNDb250ZW50RWRpdGFibGUuZ2V0Q29udGVudEVkaXRhYmxlKG5vZGUpICYmIChzZWxlY3Rpb24kMSA9PT0gbnVsbCB8fCBzZWxlY3Rpb24kMSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogc2VsZWN0aW9uJDEuYW5jaG9yTm9kZSkgJiYgaXNDb250ZW50RWRpdGFibGUuZ2V0Q29udGVudEVkaXRhYmxlKHNlbGVjdGlvbiQxLmFuY2hvck5vZGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGlzQ0UgPyAnY29udGVudGVkaXRhYmxlJyA6ICdkZWZhdWx0JyxcbiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24kMVxuICAgIH07XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMSA/IG5vZGUgOiBub2RlLnBhcmVudEVsZW1lbnQ7XG59XG5cbmV4cG9ydHMuZ2V0VGFyZ2V0VHlwZUFuZFNlbGVjdGlvbiA9IGdldFRhcmdldFR5cGVBbmRTZWxlY3Rpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVosSUFBSUEsRUFBRSxHQUFHQyxPQUFPLHVCQUF1QixDQUFDO0FBQ3hDQSxPQUFPLHdDQUF3QyxDQUFDO0FBQ2hELElBQUlDLGlCQUFpQixHQUFHRCxPQUFPLHdDQUF3QyxDQUFDO0FBQ3hFLElBQUlFLFNBQVMsR0FBR0YsT0FBTyxpQ0FBaUMsQ0FBQzs7QUFFekQ7QUFDQTtBQUNBO0FBQUksU0FBU0cseUJBQXlCQSxDQUFDQyxJQUFJLEVBQUU7RUFDekMsTUFBTUMsT0FBTyxHQUFHQyxVQUFVLENBQUNGLElBQUksQ0FBQztFQUNoQyxJQUFJQyxPQUFPLElBQUlILFNBQVMsQ0FBQ0ssZUFBZSxDQUFDRixPQUFPLENBQUMsRUFBRTtJQUMvQyxPQUFPO01BQ0hHLElBQUksRUFBRSxPQUFPO01BQ2JOLFNBQVMsRUFBRUgsRUFBRSxDQUFDVSxjQUFjLENBQUNKLE9BQU87SUFDeEMsQ0FBQztFQUNMO0VBQ0EsTUFBTUssV0FBVyxHQUFHTCxPQUFPLEtBQUssSUFBSSxJQUFJQSxPQUFPLEtBQUtNLFNBQVMsR0FBR0EsU0FBUyxHQUFHTixPQUFPLENBQUNPLGFBQWEsQ0FBQ0MsWUFBWSxDQUFDLENBQUM7RUFDaEg7RUFDQTtFQUNBLE1BQU1DLElBQUksR0FBR2IsaUJBQWlCLENBQUNjLGtCQUFrQixDQUFDWCxJQUFJLENBQUMsS0FBS00sV0FBVyxLQUFLLElBQUksSUFBSUEsV0FBVyxLQUFLQyxTQUFTLEdBQUdBLFNBQVMsR0FBR0QsV0FBVyxDQUFDTSxVQUFVLENBQUMsSUFBSWYsaUJBQWlCLENBQUNjLGtCQUFrQixDQUFDTCxXQUFXLENBQUNNLFVBQVUsQ0FBQztFQUNuTixPQUFPO0lBQ0hSLElBQUksRUFBRU0sSUFBSSxHQUFHLGlCQUFpQixHQUFHLFNBQVM7SUFDMUNaLFNBQVMsRUFBRVE7RUFDZixDQUFDO0FBQ0w7QUFDQSxTQUFTSixVQUFVQSxDQUFDRixJQUFJLEVBQUU7RUFDdEIsT0FBT0EsSUFBSSxDQUFDYSxRQUFRLEtBQUssQ0FBQyxHQUFHYixJQUFJLEdBQUdBLElBQUksQ0FBQ2MsYUFBYTtBQUMxRDtBQUVBQyxPQUFPLENBQUNoQix5QkFBeUIsR0FBR0EseUJBQXlCIiwiaWdub3JlTGlzdCI6W119