{"version":3,"names":["_react","_interopRequireWildcard","require","_FacturesTable","_interopRequireDefault","_UnifiedFilter","_modalSystem","_FactureService","_PaiementService","_NotificationService","_useFactures","_useFactureFilters","_useTemplates","_useFactureModals","_formatters","_createLogger","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","FacturesListe","nouvelleFactureId","onModifierFacture","onAfficherFacture","onNouvelleFacture","notification","onClearNotification","onFactureSupprimee","onSetNotification","factureModified","onResetFactureModified","log","createLogger","isDevelopment","process","env","NODE_ENV","window","location","hostname","port","showSuccess","showError","showWarning","showInfo","useNotifications","factureService","FactureService","paiementService","PaiementService","floatingButtonTooltip","setFloatingButtonTooltip","useState","visible","position","x","y","impressionEnCours","setImpressionEnCours","Set","showFilters","setShowFilters","facturesNonFiltrees","isLoading","error","chargerFactures","factureSelectionnee","setFactureSelectionnee","anneeSelectionnee","setAnneeSelectionnee","useFactures","useEffect","length","debug","facturesNonFiltrees_length","IDs","map","idFacture","doublons","size","clients","isLoadingClients","clientSelectionne","etatSelectionne","handleAnneeChange","handleClientChange","handleEtatChange","filteredFactures","etats","anneesOptions","useFactureFilters","difference","ids","filter","id","index","indexOf","warn","totalCount","filteredCount","emailTemplates","chargerTemplatesEmail","useTemplates","modalDependencies","showCustom","showLoading","formatMontant","montant","formatDate","dateStr","formatEmailMessage","template","facture","message","client","replace","prenom","nom","numeroFacture","totalAvecRistourne","undefined","montantFormate","dateEcheance","dateFormatee","handleEnvoyerFacture","handleSupprimerFacture","handleImprimerFacture","handleEnregistrerPaiement","handleCopierFacture","useFactureModals","filterOptions","useMemo","annee","c","value","label","etat","timer","setTimeout","clearTimeout","handleFloatingButtonMouseMove","event","clientX","clientY","handleFloatingButtonMouseLeave","createElement","className","filterType","filters","onFilterChange","field","target","onResetFilters","Date","getFullYear","onToggleFilters","factures","onSelectionChange","onSupprimerFacture","onImprimerFacture","onEnvoyerFacture","onPayerFacture","onCopierFacture","onClick","onMouseMove","onMouseLeave","style","left","top","_default","exports"],"sources":["FacturesListe.jsx"],"sourcesContent":["// src/components/factures/FacturesListe.jsx\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport '../../styles/components/factures/FacturesListe.css';\r\n\r\n// Import des composants\r\nimport FacturesTable from './FacturesTable';\r\nimport UnifiedFilter from '../../components/shared/filters/UnifiedFilter';\r\n\r\n// Import du systÃ¨me de modales unifiÃ©\r\nimport { showCustom, showLoading } from '../../utils/modalSystem';\r\n\r\n// Import des services\r\nimport FactureService from '../../services/FactureService';\r\nimport PaiementService from '../../services/PaiementService';\r\nimport { useNotifications } from '../../services/NotificationService';\r\n\r\n// Import des hooks personnalisÃ©s\r\nimport { useFactures } from './hooks/useFactures';\r\nimport { useFactureFilters } from './hooks/useFactureFilters';\r\nimport { useTemplates } from './hooks/useTemplates';\r\nimport { useFactureModals } from './hooks/useFactureModals';\r\nimport { formatMontant, formatDate } from '../../utils/formatters';\r\nimport { createLogger } from '../../utils/createLogger';\r\n\r\nfunction FacturesListe({ \r\n    nouvelleFactureId,\r\n    onModifierFacture,\r\n    onAfficherFacture,\r\n    onNouvelleFacture,\r\n    notification,\r\n    onClearNotification,\r\n    onFactureSupprimee,\r\n    onSetNotification,\r\n    factureModified = false,\r\n    onResetFactureModified = null\r\n}) {\r\n\r\n    const log = createLogger(\"FacturesListe\");\r\n    \r\n    const isDevelopment = () => {\r\n        return process.env.NODE_ENV === 'development' || \r\n            window.location.hostname === 'localhost' || \r\n            window.location.hostname === '127.0.0.1' ||\r\n            window.location.port === '3000';\r\n    };\r\n\r\n    const { showSuccess, showError, showWarning, showInfo } = useNotifications();\r\n    \r\n    // Initialisation des services\r\n    const factureService = new FactureService();\r\n    const paiementService = new PaiementService();\r\n    \r\n    // Ã‰tat pour le tooltip du bouton flottant\r\n    const [floatingButtonTooltip, setFloatingButtonTooltip] = useState({\r\n        visible: false,\r\n        position: { x: 0, y: 0 }\r\n    });\r\n    \r\n    // Ã‰tat pour prÃ©venir les doubles clics (gardÃ© pour l'impression)\r\n    const [impressionEnCours, setImpressionEnCours] = useState(new Set());\r\n\r\n    // Ajouter un Ã©tat pour le toggle\r\n    const [showFilters, setShowFilters] = useState(false);\r\n    \r\n    // Utilisation des hooks personnalisÃ©s\r\n    const { \r\n        facturesNonFiltrees, \r\n        isLoading, \r\n        error, \r\n        chargerFactures,\r\n        factureSelectionnee,\r\n        setFactureSelectionnee,\r\n        anneeSelectionnee,        // âœ… RÃ©cupÃ©rer depuis useFactures\r\n        setAnneeSelectionnee      // âœ… RÃ©cupÃ©rer depuis useFactures\r\n    } = useFactures(nouvelleFactureId, factureModified, onResetFactureModified);\r\n\r\n    useEffect(() => {\r\n        if (facturesNonFiltrees.length > 0) {\r\n            log.debug('ðŸ”¢ DÃ‰COMPTE EXACT:', {\r\n                facturesNonFiltrees_length: facturesNonFiltrees.length,\r\n                IDs: facturesNonFiltrees.map(f => f.idFacture),\r\n                doublons: facturesNonFiltrees.length - new Set(facturesNonFiltrees.map(f => f.idFacture)).size\r\n            });\r\n        }\r\n    }, [facturesNonFiltrees]);\r\n\r\n    const {\r\n        clients,\r\n        isLoadingClients, \r\n        clientSelectionne,\r\n        etatSelectionne,\r\n        handleAnneeChange,\r\n        handleClientChange,\r\n        handleEtatChange,\r\n        filteredFactures,\r\n        etats,\r\n        anneesOptions\r\n    } = useFactureFilters(\r\n        facturesNonFiltrees, \r\n        chargerFactures,\r\n        anneeSelectionnee,        // âœ… Passer depuis useFactures\r\n        setAnneeSelectionnee      // âœ… Passer depuis useFactures\r\n    );\r\n\r\n    useEffect(() => {\r\n        log.debug('ðŸ“Š STATS FACTURES:', {\r\n            facturesNonFiltrees: facturesNonFiltrees.length,\r\n            filteredFactures: filteredFactures.length,\r\n            difference: facturesNonFiltrees.length - filteredFactures.length,\r\n            nouvelleFactureId,\r\n            anneeSelectionnee,\r\n            clientSelectionne,\r\n            etatSelectionne\r\n        });\r\n        \r\n        // Afficher les IDs des factures pour dÃ©tecter les doublons\r\n        if (facturesNonFiltrees.length > 0) {\r\n            const ids = facturesNonFiltrees.map(f => f.idFacture);\r\n            const doublons = ids.filter((id, index) => ids.indexOf(id) !== index);\r\n            \r\n            log.debug('ðŸ“‹ IDs facturesNonFiltrees:', ids);\r\n            if (doublons.length > 0) {\r\n                log.warn('âš ï¸ DOUBLONS DÃ‰TECTÃ‰S:', doublons);\r\n            }\r\n        }\r\n        \r\n        if (filteredFactures.length > 0) {\r\n            const ids = filteredFactures.map(f => f.idFacture);\r\n            const doublons = ids.filter((id, index) => ids.indexOf(id) !== index);\r\n            \r\n            log.debug('ðŸ“‹ IDs filteredFactures:', ids);\r\n            if (doublons.length > 0) {\r\n                log.warn('âš ï¸ DOUBLONS DÃ‰TECTÃ‰S:', doublons);\r\n            }\r\n        }\r\n        \r\n    }, [facturesNonFiltrees, filteredFactures]);\r\n\r\n    useEffect(() => {\r\n        log.debug('ðŸŽ¯ UnifiedFilter va recevoir:', {\r\n            totalCount: facturesNonFiltrees.length,\r\n            filteredCount: filteredFactures.length\r\n        });\r\n    }, [facturesNonFiltrees.length, filteredFactures.length]);\r\n    \r\n    const { emailTemplates, chargerTemplatesEmail } = useTemplates();\r\n\r\n    // Configuration des dÃ©pendances pour les handlers\r\n    const modalDependencies = {\r\n        factureService,\r\n        paiementService,\r\n        showCustom,\r\n        showLoading,\r\n        formatMontant: (montant) => formatMontant(montant),\r\n        formatDate: (dateStr) => formatDate(dateStr),\r\n        formatEmailMessage: (template, facture) => {\r\n            if (!template) {\r\n                log.warn(\"Template vide ou non dÃ©fini\");\r\n                return '';\r\n            }\r\n            \r\n            let message = template;\r\n            \r\n            try {\r\n                if (facture.client) {\r\n                    message = message.replace(/\\[prÃ©nom\\]/g, facture.client.prenom || '');\r\n                    message = message.replace(/\\[nom\\]/g, facture.client.nom || '');\r\n                }\r\n                \r\n                message = message.replace(/\\[NumÃ©ro de facture\\]/g, facture.numeroFacture || '');\r\n                \r\n                if (facture.totalAvecRistourne !== undefined) {\r\n                    const montantFormate = formatMontant(facture.totalAvecRistourne);\r\n                    message = message.replace(/\\[Montant\\]/g, montantFormate);\r\n                }\r\n                \r\n                if (facture.dateEcheance) {\r\n                    const dateFormatee = formatDate(facture.dateEcheance);\r\n                    message = message.replace(/\\[Date d'Ã©chÃ©ance\\]/g, dateFormatee);\r\n                }\r\n                \r\n                return message;\r\n            } catch (error) {\r\n                log.error(\"Erreur lors du formatage du message email:\", error);\r\n                return template;\r\n            }\r\n        },\r\n        emailTemplates,\r\n        chargerFactures,\r\n        onSetNotification,\r\n        onFactureSupprimee,\r\n        impressionEnCours,\r\n        setImpressionEnCours,\r\n        filteredFactures,  // âœ… AJOUTER CETTE LIGNE\r\n        setFactureSelectionnee\r\n    };\r\n\r\n    // Hook des modales avec handlers externalisÃ©s\r\n    const {\r\n        handleEnvoyerFacture,\r\n        handleSupprimerFacture,\r\n        handleImprimerFacture,\r\n        handleEnregistrerPaiement,\r\n        handleCopierFacture\r\n    } = useFactureModals(modalDependencies);\r\n\r\n    // PrÃ©parer les options de filtres\r\n    const filterOptions = useMemo(() => ({\r\n    annee: anneesOptions, // DÃ©jÃ  un tableau de nombres\r\n    client: clients.map(c => ({ \r\n        value: c.id, \r\n        label: `${c.prenom} ${c.nom}` \r\n    })),\r\n    etat: etats // DÃ©jÃ  un tableau de strings\r\n    }), [anneesOptions, clients, etats]);\r\n\r\n    // Charger les templates email au montage\r\n    useEffect(() => {\r\n        chargerTemplatesEmail();\r\n    }, [chargerTemplatesEmail]);\r\n\r\n    // GÃ©rer les erreurs\r\n    useEffect(() => {\r\n        if (error) {\r\n            showError(error);\r\n        }\r\n    }, [error]);\r\n\r\n    // GÃ©rer les notifications\r\n    useEffect(() => {\r\n        if (notification && notification.message) {\r\n            const timer = setTimeout(() => {\r\n                if (onClearNotification) {\r\n                    onClearNotification();\r\n                }\r\n            }, 5000);\r\n            \r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [notification, onClearNotification]);\r\n\r\n    // Tooltip du bouton flottant\r\n    const handleFloatingButtonMouseMove = (event) => {\r\n        setFloatingButtonTooltip({\r\n            visible: true,\r\n            position: {\r\n                x: event.clientX,\r\n                y: event.clientY\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleFloatingButtonMouseLeave = () => {\r\n        setFloatingButtonTooltip({\r\n            visible: false,\r\n            position: { x: 0, y: 0 }\r\n        });\r\n    };\r\n\r\n    // const renderNotification = () => {\r\n    //     if (!notification || !notification.message) return null;\r\n        \r\n    //     const className = notification.type === 'success' \r\n    //         ? 'notification success'  // âœ… CORRECTION : 'notification success' au lieu de 'notification-success'\r\n    //         : 'notification error';   // âœ… CORRECTION : 'notification error' au lieu de 'notification-error'\r\n        \r\n    //     return (\r\n    //         <div className={className}>\r\n    //             <span>{notification.message}</span>\r\n    //             <button \r\n    //                 onClick={onClearNotification} \r\n    //                 className=\"notification-close\"\r\n    //                 aria-label=\"Fermer la notification\"\r\n    //             >\r\n    //                 Ã—\r\n    //             </button>\r\n    //         </div>\r\n    //     );\r\n    // };\r\n\r\n    // Rendu\r\n    return (\r\n        <div className=\"content-section-container\">\r\n            <div className=\"content-section-title\">\r\n                <h2>Factures ({filteredFactures.length})</h2>\r\n            </div>\r\n            {/* âœ… AJOUT : Affichage de la notification en haut */}\r\n            {/* {renderNotification()} */}\r\n\r\n            {/* Filtres */}\r\n            <UnifiedFilter\r\n                filterType=\"factures\"\r\n                filterOptions={filterOptions}\r\n                filters={{\r\n                    annee: anneeSelectionnee,\r\n                    client: clientSelectionne,\r\n                    etat: etatSelectionne\r\n                }}\r\n                onFilterChange={(field, value) => {\r\n                    if (field === 'annee') handleAnneeChange({ target: { value } });\r\n                    if (field === 'client') handleClientChange({ target: { value } });\r\n                    if (field === 'etat') handleEtatChange({ target: { value } });\r\n                }}\r\n                onResetFilters={() => {\r\n                    handleAnneeChange({ target: { value: new Date().getFullYear() } });\r\n                    handleClientChange({ target: { value: '' } });\r\n                    handleEtatChange({ target: { value: 'Tous' } });\r\n                }}\r\n                showFilters={showFilters}\r\n                onToggleFilters={() => setShowFilters(!showFilters)}\r\n                totalCount={facturesNonFiltrees.length}\r\n                filteredCount={filteredFactures.length}\r\n            />\r\n\r\n            {/* Tableau des factures */}\r\n            <FacturesTable\r\n                factures={filteredFactures}\r\n                isLoading={isLoading}\r\n                factureSelectionnee={factureSelectionnee}\r\n                onSelectionChange={setFactureSelectionnee}\r\n                onAfficherFacture={onAfficherFacture}\r\n                onModifierFacture={onModifierFacture}\r\n                onSupprimerFacture={handleSupprimerFacture}\r\n                onImprimerFacture={handleImprimerFacture}\r\n                onEnvoyerFacture={handleEnvoyerFacture}\r\n                onPayerFacture={handleEnregistrerPaiement}\r\n                onCopierFacture={handleCopierFacture}\r\n                impressionEnCours={impressionEnCours}\r\n            />\r\n\r\n            {/* Bouton flottant pour nouvelle facture */}\r\n            {onNouvelleFacture && (\r\n                <button\r\n                    className=\"floating-action-button\"\r\n                    onClick={onNouvelleFacture}\r\n                    onMouseMove={handleFloatingButtonMouseMove}\r\n                    onMouseLeave={handleFloatingButtonMouseLeave}\r\n                    aria-label=\"CrÃ©er une nouvelle facture\"\r\n                >\r\n                    <span className=\"fab-icon\">+</span>\r\n                    {floatingButtonTooltip.visible && (\r\n                        <span \r\n                            className=\"fab-tooltip\"\r\n                            style={{\r\n                                left: `${floatingButtonTooltip.position.x + 15}px`,\r\n                                top: `${floatingButtonTooltip.position.y - 10}px`\r\n                            }}\r\n                        >\r\n                            Nouvelle Facture\r\n                        </span>\r\n                    )}\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FacturesListe;"],"mappings":"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","ignoreList":[]}