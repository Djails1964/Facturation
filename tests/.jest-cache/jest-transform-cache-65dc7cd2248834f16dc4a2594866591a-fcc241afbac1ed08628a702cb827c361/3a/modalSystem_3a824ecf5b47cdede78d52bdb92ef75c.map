{"version":3,"names":["_createLogger","require","log","createLogger","MODAL_TYPES","exports","CONFIRMATION","INPUT","INFO","ERROR","SUCCESS","WARNING","CUSTOM","MODAL_SIZES","SMALL","MEDIUM","LARGE","XLARGE","MODAL_POSITIONS","CENTER","SMART","ModalSystem","constructor","activeModals","Map","zIndexCounter","dragState","isDragging","startX","startY","offsetX","offsetY","element","positionConfig","maxHeightPercent","paddingTop","paddingSides","mobileMaxHeight","mobilePadding","boundHandleDragMove","handleDragMove","bind","boundHandleDragEnd","handleDragEnd","document","addEventListener","initializePositionSystem","window","handleResize","setTimeout","info","calculateOptimalPosition","anchorRef","modalSize","config","viewport","width","innerWidth","height","innerHeight","isMobile","isTablet","isShortScreen","maxHeight","adjustedModalSize","Math","min","parseInt","position","top","left","max","strategy","needsScrollInside","current","smartPosition","calculateSmartPosition","isPositionValid","error","warn","debug","rect","getBoundingClientRect","scrollTop","pageYOffset","documentElement","scrollLeft","pageXOffset","anchorPos","right","bottom","centerX","centerY","gap","positions","pos","applyPosition","overlay","container","style","alignItems","justifyContent","padding","boxSizing","overflowY","margin","classList","add","enableInternalScroll","overlayPadding","containerPosition","containerMaxHeight","hasInternalScroll","modalForm","querySelector","header","footer","headerHeight","offsetHeight","footerHeight","availableHeight","overflowX","flex","minHeight","flexShrink","zIndex","detectAndHandleScroll","maxContentHeight","hasScroll","scrollHeight","clientHeight","toggle","setAttribute","addScrollIndicator","indicator","createElement","className","cssText","textContent","appendChild","animateScrollIndicator","opacity","direction","animate","interval","setInterval","clearInterval","adjustModalAfterRender","originalPosition","wasAdjusted","newTop","newLeft","applyMobileCorrections","addRepositionIndicator","finalRect","closest","maxWidth","clearTimeout","resizeTimeout","forEach","modal","modalId","isConnected","estimatedSize","estimateModalSize","newPosition","initializeDragAndDrop","cursor","userSelect","dragIndicator","innerHTML","boundDragStart","handleDragStart","boundDragMove","boundDragEnd","_dragHandlers","e","button","target","preventDefault","stopPropagation","clientX","clientY","hasMoved","transition","toString","body","moveThreshold","deltaX","abs","deltaY","newX","newY","constrainedX","constrainedY","transform","remove","pointerEvents","sizeMap","small","medium","large","xlarge","baseSize","size","inputs","length","details","Object","keys","content","generateModalHTML","isDev","process","env","NODE_ENV","unifiedBadge","html","title","type","notificationClass","getNotificationClass","generateInputsHTML","generateDetailsHTML","buttons","buttonClass","getStandardButtonClass","action","disabled","text","oldClassName","classMapping","oldClass","newClass","entries","includes","map","input","name","label","value","required","placeholder","inputElement","inputGroupClass","options","option","join","key","show","Promise","resolve","Date","now","random","substr","id","hasAnchor","dataset","requestAnimationFrame","set","attachEventListeners","manageFocus","hasScrollInside","get","handleButtonClick","matches","executeAction","close","form","formData","formDataObj","FormData","data","handleEscape","closeOnEscape","activeModal","handleOverlayClick","closeOnOverlayClick","eventHandlers","onMount","focusableElements","querySelectorAll","focus","result","removeEventListener","parentNode","removeChild","delete","closeAll","modalIds","Array","from","custom","confirm","message","confirmText","cancelText","modalClass","success","warning","prompt","showLoading","asyncTask","loadingConfig","createLoadingContent","getActiveModalsInfo","push","contains","updatePositionConfig","newConfig","testPositioning","tests","test","passed","round","footerRect","isVisible","modalSystem","showCustom","showConfirm","showInfo","showSuccess","showError","showWarning","showPrompt","testModalPositioning","updateModalConfig","closeAllModals","_default","default"],"sources":["modalSystem.js"],"sourcesContent":["import { createLogger } from './createLogger';\r\n\r\nconst log = createLogger('ModalSystem');\r\n\r\nconst MODAL_TYPES = {\r\n  CONFIRMATION: 'confirmation',\r\n  INPUT: 'input',\r\n  INFO: 'info',\r\n  ERROR: 'error',\r\n  SUCCESS: 'success',\r\n  WARNING: 'warning',\r\n  CUSTOM: 'custom'\r\n};\r\n\r\nconst MODAL_SIZES = {\r\n  SMALL: 'small',\r\n  MEDIUM: 'medium',\r\n  LARGE: 'large',\r\n  XLARGE: 'xlarge'\r\n};\r\n\r\nconst MODAL_POSITIONS = {\r\n  CENTER: 'center',\r\n  SMART: 'smart'\r\n};\r\n\r\nclass ModalSystem {\r\n  constructor() {\r\n    this.activeModals = new Map();\r\n    this.zIndexCounter = 1000;\r\n    this.dragState = {\r\n      isDragging: false,\r\n      startX: 0,\r\n      startY: 0,\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n      element: null\r\n    };\r\n    \r\n    // âœ… NOUVEAU: Configuration pour le positionnement intelligent\r\n    this.positionConfig = {\r\n      maxHeightPercent: 0.82, // 82vh maximum\r\n      paddingTop: '3vh',\r\n      paddingSides: '20px',\r\n      mobileMaxHeight: 0.88, // 88vh sur mobile\r\n      mobilePadding: '10px'\r\n    };\r\n\r\n    this.boundHandleDragMove = this.handleDragMove.bind(this);\r\n    this.boundHandleDragEnd = this.handleDragEnd.bind(this);\r\n\r\n    document.addEventListener('mousemove', this.boundHandleDragMove);\r\n    document.addEventListener('mouseup', this.boundHandleDragEnd);\r\n    \r\n    this.initializePositionSystem();\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Initialiser le systÃ¨me de positionnement\r\n   */\r\n  initializePositionSystem() {\r\n    // Ã‰couter les changements de taille de fenÃªtre\r\n    window.addEventListener('resize', this.handleResize.bind(this));\r\n    window.addEventListener('orientationchange', () => {\r\n      setTimeout(() => this.handleResize(), 100);\r\n    });\r\n    \r\n    log.info('ðŸŽ¯ SystÃ¨me de positionnement intelligent initialisÃ©');\r\n  }\r\n\r\n  /**\r\n   * âœ… AMÃ‰LIORÃ‰: Calculer la position optimale avec corrections\r\n   */\r\n  calculateOptimalPosition(anchorRef, modalSize, config = {}) {\r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      isMobile: window.innerWidth <= 768,\r\n      isTablet: window.innerWidth > 768 && window.innerWidth <= 1024,\r\n      isShortScreen: window.innerHeight <= 600\r\n    };\r\n    \r\n    // âœ… CORRECTION: Ajuster la taille selon les contraintes\r\n    const maxHeight = viewport.height * (viewport.isMobile ? \r\n      this.positionConfig.mobileMaxHeight : \r\n      this.positionConfig.maxHeightPercent\r\n    );\r\n    \r\n    const adjustedModalSize = {\r\n      width: Math.min(modalSize.width || 600, viewport.width * 0.9),\r\n      height: Math.min(modalSize.height || 400, maxHeight)\r\n    };\r\n    \r\n    // âœ… POSITION CENTRÃ‰E AMÃ‰LIORÃ‰E (par dÃ©faut)\r\n    const paddingTop = viewport.isShortScreen ? \r\n      viewport.height * 0.02 : \r\n      parseInt(this.positionConfig.paddingTop) * viewport.height / 100;\r\n    \r\n    const paddingSides = viewport.isMobile ? \r\n      parseInt(this.positionConfig.mobilePadding) : \r\n      parseInt(this.positionConfig.paddingSides);\r\n    \r\n    let position = {\r\n      top: paddingTop,\r\n      left: Math.max(paddingSides, (viewport.width - adjustedModalSize.width) / 2),\r\n      width: adjustedModalSize.width,\r\n      height: adjustedModalSize.height,\r\n      maxHeight: maxHeight,\r\n      strategy: 'center-improved',\r\n      needsScrollInside: adjustedModalSize.height >= maxHeight\r\n    };\r\n    \r\n    // âœ… POSITIONNEMENT INTELLIGENT PAR ANCRE (si demandÃ© et possible)\r\n    if (anchorRef && anchorRef.current && config.position === 'smart' && !viewport.isMobile) {\r\n      try {\r\n        const smartPosition = this.calculateSmartPosition(anchorRef, adjustedModalSize, viewport);\r\n        \r\n        // Utiliser la position intelligente si elle est valide\r\n        if (smartPosition && this.isPositionValid(smartPosition, adjustedModalSize, viewport)) {\r\n          position = {\r\n            ...smartPosition,\r\n            width: adjustedModalSize.width,\r\n            height: adjustedModalSize.height,\r\n            maxHeight: maxHeight,\r\n            needsScrollInside: adjustedModalSize.height >= maxHeight\r\n          };\r\n        }\r\n      } catch (error) {\r\n        log.warn('âš ï¸ Erreur calcul position intelligente, fallback centrÃ©:', error);\r\n      }\r\n    }\r\n    \r\n    log.debug('ðŸ“ Position calculÃ©e:', {\r\n      strategy: position.strategy,\r\n      top: position.top,\r\n      left: position.left,\r\n      width: position.width,\r\n      height: position.height,\r\n      maxHeight: position.maxHeight,\r\n      needsScrollInside: position.needsScrollInside,\r\n      viewport: viewport\r\n    });\r\n    \r\n    return position;\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Calcul de position intelligente par rapport Ã  l'ancre\r\n   */\r\n  calculateSmartPosition(anchorRef, modalSize, viewport) {\r\n    const rect = anchorRef.current.getBoundingClientRect();\r\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n    const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\r\n    \r\n    const anchorPos = {\r\n      top: rect.top + scrollTop,\r\n      left: rect.left + scrollLeft,\r\n      right: rect.right + scrollLeft,\r\n      bottom: rect.bottom + scrollTop,\r\n      width: rect.width,\r\n      height: rect.height,\r\n      centerX: rect.left + scrollLeft + rect.width / 2,\r\n      centerY: rect.top + scrollTop + rect.height / 2\r\n    };\r\n    \r\n    const gap = 10;\r\n    const positions = [\r\n      // Ã€ droite de l'Ã©lÃ©ment\r\n      {\r\n        top: Math.max(20, anchorPos.centerY - modalSize.height / 2),\r\n        left: anchorPos.right + gap,\r\n        strategy: 'smart-right'\r\n      },\r\n      // En dessous de l'Ã©lÃ©ment\r\n      {\r\n        top: anchorPos.bottom + gap,\r\n        left: Math.max(20, anchorPos.centerX - modalSize.width / 2),\r\n        strategy: 'smart-below'\r\n      },\r\n      // Ã€ gauche de l'Ã©lÃ©ment\r\n      {\r\n        top: Math.max(20, anchorPos.centerY - modalSize.height / 2),\r\n        left: anchorPos.left - modalSize.width - gap,\r\n        strategy: 'smart-left'\r\n      },\r\n      // Au dessus de l'Ã©lÃ©ment\r\n      {\r\n        top: anchorPos.top - modalSize.height - gap,\r\n        left: Math.max(20, anchorPos.centerX - modalSize.width / 2),\r\n        strategy: 'smart-above'\r\n      }\r\n    ];\r\n    \r\n    // Tester chaque position\r\n    for (const pos of positions) {\r\n      if (this.isPositionValid(pos, modalSize, viewport)) {\r\n        return pos;\r\n      }\r\n    }\r\n    \r\n    return null; // Aucune position intelligente trouvÃ©e\r\n  }\r\n\r\n  /**\r\n   * âœ… AMÃ‰LIORÃ‰: Appliquer la position avec corrections CSS\r\n   */\r\n  applyPosition(overlay, container, position) {\r\n    // âœ… APPLIQUER LES CORRECTIONS CSS\r\n    if (position.strategy === 'center-improved') {\r\n      // Position centrÃ©e amÃ©liorÃ©e\r\n      overlay.style.alignItems = 'flex-start';\r\n      overlay.style.justifyContent = 'center';\r\n      overlay.style.padding = `${position.top}px ${this.positionConfig.paddingSides} 20px ${this.positionConfig.paddingSides}`;\r\n      overlay.style.boxSizing = 'border-box';\r\n      overlay.style.overflowY = 'auto';\r\n      \r\n      container.style.position = 'relative';\r\n      container.style.margin = '0 auto';\r\n    } else {\r\n      // Position intelligente\r\n      overlay.style.alignItems = 'flex-start';\r\n      overlay.style.justifyContent = 'flex-start';\r\n      overlay.style.padding = '0';\r\n      overlay.classList.add('smart-positioned');\r\n      \r\n      container.style.position = 'absolute';\r\n      container.style.left = `${position.left}px`;\r\n      container.style.top = `${position.top}px`;\r\n      container.style.margin = '0';\r\n      container.classList.add('positioned');\r\n    }\r\n    \r\n    // âœ… APPLIQUER LES HAUTEURS MAXIMALES\r\n    container.style.maxHeight = `${position.maxHeight}px`;\r\n    container.style.width = `${position.width}px`;\r\n    \r\n    // âœ… ASSURER LE SCROLL INTERNE SI NÃ‰CESSAIRE\r\n    if (position.needsScrollInside) {\r\n      container.classList.add('height-constrained');\r\n      this.enableInternalScroll(container, position.maxHeight);\r\n    }\r\n    \r\n    log.debug('ðŸŽ¨ Styles appliquÃ©s:', {\r\n      strategy: position.strategy,\r\n      overlayPadding: overlay.style.padding,\r\n      containerPosition: container.style.position,\r\n      containerMaxHeight: container.style.maxHeight,\r\n      hasInternalScroll: position.needsScrollInside\r\n    });\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Activer le scroll interne\r\n   */\r\n  enableInternalScroll(container, maxHeight) {\r\n    const modalForm = container.querySelector('.modal-form');\r\n    if (!modalForm) return;\r\n    \r\n    // Calculer la hauteur disponible pour le contenu\r\n    const header = container.querySelector('.unified-modal-header');\r\n    const footer = container.querySelector('.modal-actions');\r\n    const headerHeight = header ? header.offsetHeight : 54;\r\n    const footerHeight = footer ? footer.offsetHeight : 54;\r\n    const availableHeight = maxHeight - headerHeight - footerHeight - 30; // 30px pour marges\r\n    \r\n    // Appliquer les styles de scroll\r\n    modalForm.style.overflowY = 'auto';\r\n    modalForm.style.overflowX = 'hidden';\r\n    modalForm.style.flex = '1';\r\n    modalForm.style.minHeight = '0';\r\n    modalForm.style.maxHeight = `${availableHeight}px`;\r\n    \r\n    // Assurer que le footer reste visible\r\n    if (footer) {\r\n      footer.style.flexShrink = '0';\r\n      footer.style.position = 'sticky';\r\n      footer.style.bottom = '0';\r\n      footer.style.zIndex = '10';\r\n      footer.style.minHeight = '54px';\r\n      footer.style.alignItems = 'center';\r\n      footer.style.boxSizing = 'border-box';\r\n    }\r\n    \r\n    // DÃ©tecter le scroll et ajouter les indicateurs\r\n    setTimeout(() => {\r\n      this.detectAndHandleScroll(modalForm, container);\r\n    }, 100);\r\n    \r\n    log.debug('ðŸ“ Scroll interne activÃ©:', {\r\n      availableHeight,\r\n      headerHeight,\r\n      footerHeight,\r\n      maxContentHeight: availableHeight\r\n    });\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: DÃ©tecter et gÃ©rer le scroll\r\n   */\r\n  detectAndHandleScroll(modalForm, container) {\r\n    const hasScroll = modalForm.scrollHeight > modalForm.clientHeight;\r\n    \r\n    container.classList.toggle('has-scrollable-content', hasScroll);\r\n    modalForm.classList.toggle('has-scroll', hasScroll);\r\n    \r\n    if (hasScroll) {\r\n      modalForm.setAttribute('tabindex', '0');\r\n      modalForm.setAttribute('aria-label', 'Contenu scrollable');\r\n      this.addScrollIndicator(container);\r\n    }\r\n    \r\n    log.debug('ðŸ“Š Scroll dÃ©tectÃ©:', {\r\n      hasScroll,\r\n      scrollHeight: modalForm.scrollHeight,\r\n      clientHeight: modalForm.clientHeight\r\n    });\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Ajouter indicateur de scroll\r\n   */\r\n  addScrollIndicator(container) {\r\n    const footer = container.querySelector('.modal-actions');\r\n    if (!footer || footer.querySelector('.scroll-indicator')) return;\r\n    \r\n    const indicator = document.createElement('div');\r\n    indicator.className = 'scroll-indicator';\r\n    indicator.style.cssText = `\r\n      position: absolute;\r\n      top: -12px;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      font-size: 9px;\r\n      color: #666;\r\n      background: rgba(255, 255, 255, 0.95);\r\n      padding: 1px 6px;\r\n      border-radius: 6px;\r\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n      opacity: 0.8;\r\n      white-space: nowrap;\r\n      pointer-events: none;\r\n      z-index: 11;\r\n    `;\r\n    indicator.textContent = 'â†‘ Contenu scrollable ci-dessus â†‘';\r\n    \r\n    footer.style.position = 'relative';\r\n    footer.appendChild(indicator);\r\n    \r\n    // Animation subtile\r\n    this.animateScrollIndicator(indicator);\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Animer l'indicateur de scroll\r\n   */\r\n  animateScrollIndicator(indicator) {\r\n    let opacity = 0.8;\r\n    let direction = 1;\r\n    \r\n    const animate = () => {\r\n      opacity += direction * 0.1;\r\n      if (opacity >= 1) direction = -1;\r\n      if (opacity <= 0.7) direction = 1;\r\n      indicator.style.opacity = opacity;\r\n    };\r\n    \r\n    const interval = setInterval(animate, 2000);\r\n    \r\n    // Nettoyer aprÃ¨s 10 secondes\r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n    }, 10000);\r\n  }\r\n\r\n  /**\r\n   * âœ… AMÃ‰LIORÃ‰: Ajustement post-rendu avec corrections\r\n   */\r\n  adjustModalAfterRender(container, originalPosition) {\r\n    const rect = container.getBoundingClientRect();\r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      isMobile: window.innerWidth <= 768\r\n    };\r\n    \r\n    let wasAdjusted = false;\r\n    \r\n    // âœ… VÃ©rifier si la modal dÃ©passe en bas\r\n    if (rect.bottom > viewport.height - 20) {\r\n      const newTop = Math.max(20, viewport.height - rect.height - 20);\r\n      container.style.top = `${newTop}px`;\r\n      wasAdjusted = true;\r\n      \r\n      // Si elle dÃ©passe encore, forcer le scroll interne\r\n      if (rect.height > viewport.height - 40) {\r\n        const maxHeight = viewport.height - 40;\r\n        container.style.maxHeight = `${maxHeight}px`;\r\n        this.enableInternalScroll(container, maxHeight);\r\n        wasAdjusted = true;\r\n      }\r\n    }\r\n    \r\n    // âœ… VÃ©rifier si la modal dÃ©passe Ã  droite\r\n    if (rect.right > viewport.width - 20) {\r\n      const newLeft = Math.max(20, viewport.width - rect.width - 20);\r\n      container.style.left = `${newLeft}px`;\r\n      wasAdjusted = true;\r\n    }\r\n    \r\n    // âœ… Sur mobile, forcer les corrections\r\n    if (viewport.isMobile) {\r\n      this.applyMobileCorrections(container);\r\n      wasAdjusted = true;\r\n    }\r\n    \r\n    // âœ… Ajouter un indicateur si repositionnÃ©e\r\n    if (wasAdjusted && originalPosition.strategy !== 'center-improved') {\r\n      this.addRepositionIndicator(container);\r\n    }\r\n    \r\n    log.debug('ðŸ”§ Ajustement post-rendu:', {\r\n      wasAdjusted,\r\n      finalRect: container.getBoundingClientRect(),\r\n      strategy: originalPosition.strategy\r\n    });\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: Appliquer les corrections mobiles\r\n   */\r\n  applyMobileCorrections(container) {\r\n    const overlay = container.closest('.unified-modal-overlay');\r\n    \r\n    if (overlay) {\r\n      overlay.style.padding = this.positionConfig.mobilePadding;\r\n    }\r\n    \r\n    container.style.width = `calc(100vw - ${parseInt(this.positionConfig.mobilePadding) * 2}px)`;\r\n    container.style.maxWidth = 'none';\r\n    container.style.maxHeight = `${window.innerHeight * this.positionConfig.mobileMaxHeight}px`;\r\n    \r\n    const modalForm = container.querySelector('.modal-form');\r\n    if (modalForm) {\r\n      modalForm.style.maxHeight = `calc(${window.innerHeight * this.positionConfig.mobileMaxHeight}px - 96px)`;\r\n      modalForm.style.padding = '12px';\r\n    }\r\n    \r\n    const header = container.querySelector('.unified-modal-header');\r\n    if (header) {\r\n      header.style.minHeight = '48px';\r\n      header.style.padding = '12px 15px';\r\n    }\r\n    \r\n    const footer = container.querySelector('.modal-actions');\r\n    if (footer) {\r\n      footer.style.minHeight = '48px';\r\n      footer.style.padding = '10px 15px';\r\n      footer.style.justifyContent = 'center';\r\n    }\r\n    \r\n    log.debug('ðŸ“± Corrections mobiles appliquÃ©es');\r\n  }\r\n\r\n  /**\r\n   * âœ… NOUVEAU: GÃ©rer le redimensionnement\r\n   */\r\n  handleResize() {\r\n    clearTimeout(this.resizeTimeout);\r\n    this.resizeTimeout = setTimeout(() => {\r\n      log.info('ðŸ“ Redimensionnement dÃ©tectÃ©, repositionnement des modales...');\r\n      \r\n      this.activeModals.forEach((modal, modalId) => {\r\n        const { container, config } = modal;\r\n        \r\n        if (container && container.isConnected) {\r\n          // Recalculer et appliquer la position\r\n          const estimatedSize = this.estimateModalSize(config);\r\n          const newPosition = this.calculateOptimalPosition(\r\n            config.anchorRef,\r\n            estimatedSize,\r\n            { position: config.position || 'smart' }\r\n          );\r\n          \r\n          this.applyPosition(modal.overlay, container, newPosition);\r\n          this.adjustModalAfterRender(container, newPosition);\r\n        }\r\n      });\r\n    }, 250);\r\n  }\r\n\r\n  /**\r\n   * âœ… MAINTENU: MÃ©thodes drag & drop existantes (inchangÃ©es)\r\n   */\r\n  initializeDragAndDrop(container) {\r\n    // âœ… Ne pas activer le drag sur mobile pour Ã©viter les conflits\r\n    if (window.innerWidth <= 768) {\r\n      log.info('ðŸ“± Drag & drop dÃ©sactivÃ© sur mobile');\r\n      return;\r\n    }\r\n    \r\n    const header = container.querySelector('.unified-modal-header');\r\n    if (!header) return;\r\n    \r\n    header.style.cursor = 'move';\r\n    header.style.userSelect = 'none';\r\n    \r\n    const dragIndicator = document.createElement('div');\r\n    dragIndicator.className = 'modal-drag-indicator';\r\n    dragIndicator.innerHTML = 'â‹®â‹®';\r\n    dragIndicator.style.cssText = `\r\n      position: absolute;\r\n      left: 10px;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      color: rgba(255, 255, 255, 0.7);\r\n      font-size: 12px;\r\n      letter-spacing: 2px;\r\n      pointer-events: none;\r\n    `;\r\n    header.appendChild(dragIndicator);\r\n    \r\n    // âœ… IMPORTANT: Attachement correct des Ã©vÃ©nements\r\n    const boundDragStart = this.handleDragStart.bind(this);\r\n    const boundDragMove = this.handleDragMove.bind(this);\r\n    const boundDragEnd = this.handleDragEnd.bind(this);\r\n    \r\n    header.addEventListener('mousedown', boundDragStart);\r\n    \r\n    // âœ… NOUVEAU: Stocker les rÃ©fÃ©rences pour pouvoir les nettoyer\r\n    container._dragHandlers = {\r\n      boundDragStart,\r\n      boundDragMove,\r\n      boundDragEnd\r\n    };\r\n    \r\n    // âœ… Les Ã©vÃ©nements mousemove et mouseup sont dÃ©jÃ  attachÃ©s globalement dans le constructeur\r\n    // Pas besoin de les rÃ©attacher ici\r\n    \r\n    log.info('ðŸ–±ï¸ Drag & drop initialisÃ© pour la modal');\r\n  }\r\n\r\n  // âœ… Les mÃ©thodes de drag existantes restent inchangÃ©es\r\n  handleDragStart(e) {\r\n    if (e.button !== 0) return;\r\n    \r\n    const container = e.target.closest('.unified-modal-container');\r\n    if (!container) return;\r\n    \r\n    e.preventDefault();\r\n    e.stopPropagation(); // âœ… AJOUT: EmpÃªcher la propagation\r\n    \r\n    const rect = container.getBoundingClientRect();\r\n    \r\n    this.dragState = {\r\n      isDragging: true,\r\n      startX: e.clientX,\r\n      startY: e.clientY,\r\n      offsetX: e.clientX - rect.left,\r\n      offsetY: e.clientY - rect.top,\r\n      element: container,\r\n      hasMoved: false // âœ… NOUVEAU: Tracker si la modal a bougÃ©\r\n    };\r\n    \r\n    container.style.transition = 'none';\r\n    container.style.zIndex = (this.zIndexCounter + 100).toString();\r\n    document.body.style.userSelect = 'none';\r\n    container.classList.add('dragging');\r\n    \r\n    log.debug('ðŸ–±ï¸ DÃ©but du drag dÃ©tectÃ©');\r\n  }\r\n\r\n  handleDragMove(e) {\r\n    if (!this.dragState.isDragging || !this.dragState.element) return;\r\n    \r\n    e.preventDefault();\r\n    e.stopPropagation(); // âœ… AJOUT: EmpÃªcher la propagation\r\n    \r\n    // âœ… NOUVEAU: DÃ©tecter si on a vraiment bougÃ©\r\n    const moveThreshold = 5; // pixels\r\n    const deltaX = Math.abs(e.clientX - this.dragState.startX);\r\n    const deltaY = Math.abs(e.clientY - this.dragState.startY);\r\n    \r\n    if (deltaX > moveThreshold || deltaY > moveThreshold) {\r\n      this.dragState.hasMoved = true;\r\n    }\r\n    \r\n    const newX = e.clientX - this.dragState.offsetX;\r\n    const newY = e.clientY - this.dragState.offsetY;\r\n    \r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight\r\n    };\r\n    \r\n    const rect = this.dragState.element.getBoundingClientRect();\r\n    const margin = 10;\r\n    \r\n    const constrainedX = Math.max(margin, Math.min(newX, viewport.width - rect.width - margin));\r\n    const constrainedY = Math.max(margin, Math.min(newY, viewport.height - rect.height - margin));\r\n    \r\n    this.dragState.element.style.left = `${constrainedX}px`;\r\n    this.dragState.element.style.top = `${constrainedY}px`;\r\n    this.dragState.element.style.transform = 'none';\r\n  }\r\n\r\n  handleDragEnd(e) {\r\n    if (!this.dragState.isDragging) return;\r\n    \r\n    const hasMoved = this.dragState.hasMoved; // âœ… SAUVEGARDER avant reset\r\n    const element = this.dragState.element;\r\n    \r\n    if (element) {\r\n      element.style.transition = '';\r\n      element.classList.remove('dragging');\r\n    }\r\n    \r\n    document.body.style.userSelect = '';\r\n    \r\n    // âœ… NOUVEAU: Si on a bougÃ©, empÃªcher les clics pendant un court moment\r\n    if (hasMoved && element) {\r\n      log.debug('ðŸš« Drag terminÃ© avec mouvement - dÃ©sactivation temporaire des clics');\r\n      \r\n      // DÃ©sactiver temporairement les Ã©vÃ©nements de clic\r\n      element.style.pointerEvents = 'none';\r\n      \r\n      // RÃ©activer aprÃ¨s un dÃ©lai court\r\n      setTimeout(() => {\r\n        if (element && element.isConnected) {\r\n          element.style.pointerEvents = '';\r\n          log.debug('âœ… Clics rÃ©activÃ©s aprÃ¨s drag');\r\n        }\r\n      }, 100);\r\n    }\r\n    \r\n    // âœ… RESET du state\r\n    this.dragState = {\r\n      isDragging: false,\r\n      startX: 0,\r\n      startY: 0,\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n      element: null,\r\n      hasMoved: false\r\n    };\r\n    \r\n    log.debug('ðŸ Drag terminÃ©, hasMoved:', hasMoved);\r\n  }\r\n\r\n\r\n  /**\r\n   * âœ… MAINTENU: Estimation de taille (inchangÃ©e mais amÃ©liorÃ©e)\r\n   */\r\n  estimateModalSize(config) {\r\n    const sizeMap = {\r\n      small: { width: 400, height: 300 },\r\n      medium: { width: 600, height: 400 },\r\n      large: { width: 800, height: 500 },\r\n      xlarge: { width: 1000, height: 600 }\r\n    };\r\n    \r\n    const baseSize = { ...sizeMap[config.size] || sizeMap.medium };\r\n    \r\n    // âœ… Ajustements selon le contenu\r\n    if (config.inputs && config.inputs.length > 3) {\r\n      baseSize.height += config.inputs.length * 60;\r\n    }\r\n    \r\n    if (config.details && Object.keys(config.details).length > 5) {\r\n      baseSize.height += Object.keys(config.details).length * 30;\r\n    }\r\n    \r\n    if (config.content && config.content.length > 500) {\r\n      baseSize.height += Math.min(200, config.content.length / 3);\r\n    }\r\n    \r\n    // âœ… Contraintes de taille selon le viewport\r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n      isMobile: window.innerWidth <= 768\r\n    };\r\n    \r\n    if (viewport.isMobile) {\r\n      baseSize.width = Math.min(baseSize.width, viewport.width * 0.95);\r\n      baseSize.height = Math.min(baseSize.height, viewport.height * this.positionConfig.mobileMaxHeight);\r\n    } else {\r\n      baseSize.width = Math.min(baseSize.width, viewport.width * 0.9);\r\n      baseSize.height = Math.min(baseSize.height, viewport.height * this.positionConfig.maxHeightPercent);\r\n    }\r\n    \r\n    return baseSize;\r\n  }\r\n\r\n  /**\r\n   * âœ… MAINTENU: MÃ©thodes HTML et utilitaires (inchangÃ©es)\r\n   */\r\n  // [Toutes les mÃ©thodes generateModalHTML, generateInputsHTML, etc. restent identiques]\r\n  generateModalHTML(config) {\r\n\r\n    // âœ… MODIFICATION: Ajouter un indicateur ðŸŽ¯ en dÃ©veloppement uniquement\r\n    const isDev = process.env.NODE_ENV === 'development';\r\n    const unifiedBadge = isDev ? 'ðŸŽ¯ ' : '';\r\n\r\n    let html = `\r\n      <div class=\"unified-modal-header\">\r\n        <h3 class=\"unified-modal-title\">${unifiedBadge}${config.title || ''}</h3>\r\n        <button class=\"unified-modal-close\" data-action=\"close\">Ã—</button>\r\n      </div>\r\n      <div class=\"modal-form\">\r\n    `;\r\n\r\n    if (config.type === MODAL_TYPES.INFO || config.type === MODAL_TYPES.ERROR || \r\n        config.type === MODAL_TYPES.SUCCESS || config.type === MODAL_TYPES.WARNING) {\r\n      \r\n      const notificationClass = this.getNotificationClass(config.type);\r\n      html += `\r\n        <div class=\"${notificationClass}\" style=\"margin-bottom: 15px; text-align: center;\">\r\n          ${config.content || ''}\r\n        </div>\r\n      `;\r\n    } else if (config.type === MODAL_TYPES.INPUT) {\r\n      html += `\r\n        <div style=\"margin-bottom: 15px;\">${config.content || ''}</div>\r\n        <form id=\"modalForm\">\r\n          ${this.generateInputsHTML(config.inputs || [])}\r\n        </form>\r\n      `;\r\n    } else if (config.type === MODAL_TYPES.CONFIRMATION) {\r\n      html += `<div class=\"fc-intro\">${config.content || ''}</div>`;\r\n    } else {\r\n      html += config.content || '';\r\n    }\r\n\r\n    if (config.details) {\r\n      html += `<div class=\"details-container\">${this.generateDetailsHTML(config.details)}</div>`;\r\n    }\r\n\r\n    html += `</div>`;\r\n\r\n    if (config.buttons && config.buttons.length > 0) {\r\n      html += `<div class=\"modal-actions\">`;\r\n      \r\n      config.buttons.forEach(button => {\r\n        let buttonClass = this.getStandardButtonClass(button.className);\r\n        \r\n        html += `\r\n          <button \r\n            class=\"${buttonClass}\" \r\n            data-action=\"${button.action}\"\r\n            ${button.disabled ? 'disabled' : ''}\r\n          >\r\n            ${button.text}\r\n          </button>\r\n        `;\r\n      });\r\n      html += `</div>`;\r\n    }\r\n\r\n    return html;\r\n  }\r\n\r\n  getStandardButtonClass(oldClassName) {\r\n    if (!oldClassName) return 'btn-primary';\r\n    \r\n    const classMapping = {\r\n      'primary': 'btn-primary',\r\n      'secondary': 'btn-secondary', \r\n      'danger': 'btn-danger',\r\n      'success': 'btn-success',\r\n      'modal-action-primary': 'btn-primary',\r\n      'modal-action-secondary': 'btn-secondary',\r\n      'modal-action-danger': 'btn-danger',\r\n      'modal-action-success': 'btn-success'\r\n    };\r\n    \r\n    for (const [oldClass, newClass] of Object.entries(classMapping)) {\r\n      if (oldClassName.includes(oldClass)) {\r\n        return newClass;\r\n      }\r\n    }\r\n    \r\n    return 'btn-primary';\r\n  }\r\n\r\n  getNotificationClass(type) {\r\n    switch (type) {\r\n      case 'success': return 'modal-success';\r\n      case 'error': return 'modal-error';\r\n      case 'warning': return 'notification warning';\r\n      case 'info':\r\n      default: return 'notification info';\r\n    }\r\n  }\r\n\r\n  generateInputsHTML(inputs) {\r\n    return inputs.map(input => {\r\n      const { type = 'text', name, label, value = '', required = false, placeholder = '' } = input;\r\n      \r\n      let inputElement;\r\n      let inputGroupClass = 'input-group';\r\n      \r\n      if (type === 'date') {\r\n        inputGroupClass = 'input-group date-input';\r\n      }\r\n      \r\n      if (type === 'textarea') {\r\n        inputElement = `\r\n          <textarea \r\n            name=\"${name}\" \r\n            id=\"${name}\"\r\n            placeholder=\" \"\r\n            ${required ? 'required' : ''}\r\n          >${value}</textarea>\r\n        `;\r\n      } else if (type === 'select' && input.options) {\r\n        inputElement = `\r\n          <select \r\n            name=\"${name}\" \r\n            id=\"${name}\"\r\n            ${required ? 'required' : ''}\r\n          >\r\n            <option value=\"\">${placeholder || 'Choisissez...'}</option>\r\n            ${input.options.map(option => `\r\n              <option value=\"${option.value}\" ${option.value === value ? 'selected' : ''}>\r\n                ${option.label}\r\n              </option>\r\n            `).join('')}\r\n          </select>\r\n        `;\r\n      } else {\r\n        inputElement = `\r\n          <input \r\n            type=\"${type}\" \r\n            name=\"${name}\" \r\n            id=\"${name}\"\r\n            value=\"${value}\"\r\n            placeholder=\" \"\r\n            ${required ? 'required' : ''}\r\n            ${type === 'number' ? 'step=\"0.01\"' : ''}\r\n          />\r\n        `;\r\n      }\r\n      \r\n      return `\r\n        <div class=\"${inputGroupClass}\">\r\n          ${inputElement}\r\n          ${label ? `<label for=\"${name}\" ${required ? 'class=\"required\"' : ''}>${label}</label>` : ''}\r\n          ${type === 'date' ? '<span class=\"calendar-icon\">ðŸ“…</span>' : ''}\r\n        </div>\r\n      `;\r\n    }).join('');\r\n  }\r\n\r\n  generateDetailsHTML(details) {\r\n    if (typeof details === 'string') {\r\n      return `<p>${details}</p>`;\r\n    }\r\n    \r\n    let html = '';\r\n    Object.entries(details).forEach(([key, value]) => {\r\n      html += `\r\n        <div class=\"info-row\">\r\n          <div class=\"info-label\">${key}:</div>\r\n          <div class=\"info-value\">${value}</div>\r\n        </div>\r\n      `;\r\n    });\r\n    \r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * âœ… AMÃ‰LIORÃ‰: MÃ©thode principale show avec positionnement intelligent\r\n   */\r\n  show(config) {\r\n    return new Promise((resolve) => {\r\n      const modalId = `modal-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n      \r\n      log.info('ðŸŽ­ Ouverture modal:', {\r\n        id: modalId,\r\n        type: config.type,\r\n        size: config.size,\r\n        position: config.position,\r\n        hasAnchor: !!config.anchorRef\r\n      });\r\n      \r\n      // âœ… CrÃ©er l'overlay avec les bonnes classes\r\n      const overlay = document.createElement('div');\r\n      overlay.className = 'unified-modal-overlay';\r\n      overlay.dataset.modalId = modalId;\r\n      \r\n      // âœ… Estimation de la taille avec les nouvelles contraintes\r\n      const estimatedSize = this.estimateModalSize(config);\r\n      \r\n      // âœ… Calculer la position optimale avec corrections\r\n      const position = this.calculateOptimalPosition(\r\n        config.anchorRef, \r\n        estimatedSize, \r\n        { position: config.position || 'center' }\r\n      );\r\n      \r\n      // âœ… CrÃ©er le conteneur avec les bonnes classes\r\n      const container = document.createElement('div');\r\n      container.className = `unified-modal-container ${config.size || 'medium'}`;\r\n      container.dataset.modalId = modalId;\r\n      \r\n      // âœ… Marquer si c'est une modal contrainte\r\n      if (position.needsScrollInside) {\r\n        container.classList.add('height-constrained');\r\n      }\r\n      \r\n      // âœ… GÃ©nÃ©rer le HTML\r\n      container.innerHTML = this.generateModalHTML(config);\r\n      overlay.appendChild(container);\r\n      \r\n      // âœ… Ajouter au DOM\r\n      document.body.appendChild(overlay);\r\n      \r\n      // âœ… Appliquer la position calculÃ©e APRÃˆS ajout au DOM\r\n      this.applyPosition(overlay, container, position);\r\n      \r\n      // âœ… Initialiser le drag & drop (si pas mobile)\r\n      this.initializeDragAndDrop(container);\r\n      \r\n      // âœ… Ajustements post-rendu\r\n      requestAnimationFrame(() => {\r\n        this.adjustModalAfterRender(container, position);\r\n      });\r\n      \r\n      // âœ… Stocker dans la map avec config\r\n      this.activeModals.set(modalId, {\r\n        overlay,\r\n        container,\r\n        resolve,\r\n        config: {\r\n          ...config,\r\n          position: position.strategy // Sauvegarder la stratÃ©gie utilisÃ©e\r\n        }\r\n      });\r\n      \r\n      // âœ… Event listeners\r\n      this.attachEventListeners(modalId, config);\r\n      \r\n      // âœ… Animations d'apparition\r\n      requestAnimationFrame(() => {\r\n        overlay.classList.add('show');\r\n        container.classList.add('show');\r\n        \r\n        // Focus management aprÃ¨s animation\r\n        setTimeout(() => {\r\n          this.manageFocus(container);\r\n        }, 100);\r\n      });\r\n      \r\n      log.info('âœ… Modal crÃ©Ã©e avec succÃ¨s:', {\r\n        id: modalId,\r\n        position: position.strategy,\r\n        size: estimatedSize,\r\n        hasScrollInside: position.needsScrollInside\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * âœ… MAINTENU: Event listeners (avec amÃ©liorations mineures)\r\n   */\r\n  attachEventListeners(modalId, config) {\r\n    const modal = this.activeModals.get(modalId);\r\n    if (!modal) return;\r\n\r\n    const { overlay, container } = modal; // âœ… SUPPRIMÃ‰: resolve (non utilisÃ©)\r\n\r\n    // âœ… Gestionnaire de boutons AMÃ‰LIORÃ‰ avec protection drag\r\n    const handleButtonClick = (e) => {\r\n      const action = e.target.dataset.action;\r\n      \r\n      if (!action || !e.target.matches('button[data-action]')) {\r\n        return;\r\n      }\r\n\r\n      // âœ… VÃ©rifier si on vient de terminer un drag\r\n      if (this.dragState.isDragging || container.style.pointerEvents === 'none') {\r\n        log.debug('ðŸš« Clic ignorÃ© - drag en cours ou rÃ©cemment terminÃ©');\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        return;\r\n      }\r\n\r\n      log.info('ðŸ”˜ Action modal:', action, 'sur modal:', modalId);\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      const executeAction = () => {\r\n        if (action === 'close') {\r\n          this.close(modalId, { action: 'close' });\r\n          return;\r\n        }\r\n\r\n        // Collecter les donnÃ©es du formulaire\r\n        const form = container.querySelector('#modalForm, #emailForm, #paymentForm, form');\r\n        let formData = {};\r\n        \r\n        if (form) {\r\n          const formDataObj = new FormData(form);\r\n          for (let [key, value] of formDataObj.entries()) {\r\n            formData[key] = value;\r\n          }\r\n        }\r\n\r\n        this.close(modalId, { action, data: formData });\r\n      };\r\n\r\n      if (action === 'close' || action === 'cancel') {\r\n        executeAction();\r\n      } else {\r\n        setTimeout(executeAction, 50);\r\n      }\r\n    };\r\n\r\n    // âœ… Fermeture par Escape\r\n    const handleEscape = (e) => {\r\n      if (e.key === 'Escape' && config.closeOnEscape !== false) {\r\n        const activeModal = document.querySelector('.unified-modal-overlay:last-child');\r\n        if (activeModal && activeModal.dataset.modalId === modalId) {\r\n          this.close(modalId, { action: 'escape' });\r\n        }\r\n      }\r\n    };\r\n\r\n    // âœ… Fermeture par overlay AMÃ‰LIORÃ‰E\r\n    const handleOverlayClick = (e) => {\r\n      // Ne pas fermer si on vient de draguer\r\n      if (this.dragState.isDragging || container.style.pointerEvents === 'none') {\r\n        log.debug('ðŸš« Clic overlay ignorÃ© - drag en cours');\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        return;\r\n      }\r\n      \r\n      if (e.target === overlay && config.closeOnOverlayClick !== false) {\r\n        setTimeout(() => {\r\n          if (e.target === overlay) {\r\n            this.close(modalId, { action: 'overlay' });\r\n          }\r\n        }, 50);\r\n      }\r\n    };\r\n\r\n    // âœ… Attachement des Ã©vÃ©nements avec capture pour les boutons\r\n    container.addEventListener('click', handleButtonClick, true);\r\n    document.addEventListener('keydown', handleEscape);\r\n    overlay.addEventListener('click', handleOverlayClick);\r\n\r\n    // Stocker les handlers\r\n    modal.eventHandlers = {\r\n      handleButtonClick,\r\n      handleEscape,\r\n      handleOverlayClick\r\n    };\r\n\r\n    // âœ… Appeler onMount avec dÃ©lai\r\n    if (config.onMount && typeof config.onMount === 'function') {\r\n      setTimeout(() => {\r\n        try {\r\n          config.onMount(container);\r\n        } catch (error) {\r\n          log.error('âŒ Erreur dans onMount:', error);\r\n        }\r\n      }, 150);\r\n    }\r\n  }\r\n\r\n    /**\r\n     * âœ… MAINTENU: Gestion du focus (inchangÃ©e)\r\n     */\r\n    manageFocus(container) {\r\n      const focusableElements = container.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      );\r\n      \r\n      if (focusableElements.length > 0) {\r\n        focusableElements[0].focus();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * âœ… MAINTENU: Fermeture (avec nettoyage amÃ©liorÃ©)\r\n     */\r\n    close(modalId, result = {}) {\r\n      const modal = this.activeModals.get(modalId);\r\n      if (!modal) return;\r\n\r\n      const { overlay, container, resolve, eventHandlers } = modal;\r\n\r\n      log.debug('ðŸšª Fermeture modal:', modalId, 'avec rÃ©sultat:', result);\r\n\r\n      // âœ… Supprimer les event listeners\r\n      if (eventHandlers) {\r\n        container.removeEventListener('click', eventHandlers.handleButtonClick, true);\r\n        document.removeEventListener('keydown', eventHandlers.handleEscape);\r\n        overlay.removeEventListener('click', eventHandlers.handleOverlayClick);\r\n      }\r\n\r\n      // âœ… Animation de fermeture\r\n      overlay.classList.add('closing');\r\n      container.classList.add('closing');\r\n\r\n      setTimeout(() => {\r\n        if (overlay.parentNode) {\r\n          overlay.parentNode.removeChild(overlay);\r\n        }\r\n        this.activeModals.delete(modalId);\r\n        resolve(result);\r\n      }, 200);\r\n    }\r\n\r\n    /**\r\n     * âœ… MAINTENU: Utilitaires (inchangÃ©s)\r\n     */\r\n    isPositionValid(position, modal, viewport) {\r\n      const margin = 20;\r\n      \r\n      return (\r\n        position.left >= margin &&\r\n        position.top >= margin &&\r\n        position.left + modal.width <= viewport.width - margin &&\r\n        position.top + modal.height <= viewport.height - margin\r\n      );\r\n    }\r\n\r\n    addRepositionIndicator(container) {\r\n      const indicator = document.createElement('div');\r\n      indicator.className = 'modal-reposition-indicator';\r\n      indicator.innerHTML = `\r\n        <span style=\"\r\n          position: absolute;\r\n          top: -5px;\r\n          right: 30px;\r\n          background: rgba(255, 193, 7, 0.9);\r\n          color: #000;\r\n          font-size: 11px;\r\n          padding: 2px 6px;\r\n          border-radius: 3px;\r\n          font-weight: 500;\r\n          z-index: 1;\r\n        \">RepositionnÃ©e</span>\r\n      `;\r\n      \r\n      container.appendChild(indicator);\r\n      \r\n      setTimeout(() => {\r\n        if (indicator.parentNode) {\r\n          indicator.parentNode.removeChild(indicator);\r\n        }\r\n      }, 3000);\r\n    }\r\n\r\n    closeAll() {\r\n      const modalIds = Array.from(this.activeModals.keys());\r\n      modalIds.forEach(id => this.close(id, { action: 'closeAll' }));\r\n    }\r\n\r\n    /**\r\n     * âœ… MAINTENU: MÃ©thodes de convenance (inchangÃ©es)\r\n     */\r\n    custom(config) {\r\n      return this.show({\r\n        type: MODAL_TYPES.CUSTOM,\r\n        ...config\r\n      });\r\n    }\r\n\r\n    confirm(options = {}) {\r\n      const {\r\n        title = 'Confirmation',\r\n        message,\r\n        confirmText = 'Confirmer',\r\n        cancelText = 'Annuler',\r\n        type = 'warning',\r\n        anchorRef = null,\r\n        position = MODAL_POSITIONS.SMART,\r\n        details = null,\r\n        size = MODAL_SIZES.MEDIUM\r\n      } = options;\r\n\r\n      return this.show({\r\n        type: MODAL_TYPES.CONFIRMATION,\r\n        title,\r\n        content: message,\r\n        size,\r\n        anchorRef,\r\n        position,\r\n        buttons: [\r\n          {\r\n            text: cancelText,\r\n            action: 'cancel',\r\n            className: 'secondary'\r\n          },\r\n          {\r\n            text: confirmText,\r\n            action: 'confirm',\r\n            className: type === 'danger' ? 'danger' : 'primary'\r\n          }\r\n        ],\r\n        details,\r\n        modalClass: `modal-${type}`\r\n      });\r\n    }\r\n\r\n    info(message, title = 'Information', anchorRef = null) {\r\n      return this.show({\r\n        type: MODAL_TYPES.INFO,\r\n        title,\r\n        content: message,\r\n        anchorRef,\r\n        size: MODAL_SIZES.MEDIUM,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n            action: 'ok',\r\n            className: 'primary'\r\n          }\r\n        ]\r\n      });\r\n    }\r\n\r\n    success(message, title = 'SuccÃ¨s', anchorRef = null) {\r\n      return this.show({\r\n        type: MODAL_TYPES.SUCCESS,\r\n        title,\r\n        content: message,\r\n        anchorRef,\r\n        size: MODAL_SIZES.MEDIUM,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n            action: 'ok',\r\n            className: 'primary'\r\n          }\r\n        ]\r\n      });\r\n    }\r\n\r\n    error(message, title = 'Erreur', anchorRef = null) {\r\n      return this.show({\r\n        type: MODAL_TYPES.ERROR,\r\n        title,\r\n        content: message,\r\n        anchorRef,\r\n        size: MODAL_SIZES.MEDIUM,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n            action: 'ok',\r\n            className: 'primary'\r\n          }\r\n        ]\r\n      });\r\n    }\r\n\r\n    warning(message, title = 'Attention', anchorRef = null) {\r\n      return this.show({\r\n        type: MODAL_TYPES.WARNING,\r\n        title,\r\n        content: message,\r\n        anchorRef,\r\n        size: MODAL_SIZES.MEDIUM,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n            action: 'ok',\r\n            className: 'primary'\r\n          }\r\n        ]\r\n      });\r\n    }\r\n\r\n    prompt(options = {}) {\r\n      const {\r\n        title = 'Saisie',\r\n        message,\r\n        inputs = [],\r\n        confirmText = 'Valider',\r\n        cancelText = 'Annuler',\r\n        anchorRef = null,\r\n        position = MODAL_POSITIONS.SMART,\r\n        size = MODAL_SIZES.MEDIUM\r\n      } = options;\r\n\r\n      return this.show({\r\n        type: MODAL_TYPES.INPUT,\r\n        title,\r\n        content: message,\r\n        inputs,\r\n        size,\r\n        anchorRef,\r\n        position,\r\n        buttons: [\r\n          {\r\n            text: cancelText,\r\n            action: 'cancel',\r\n            className: 'secondary'\r\n          },\r\n          {\r\n            text: confirmText,\r\n            action: 'submit',\r\n            className: 'primary'\r\n          }\r\n        ]\r\n      });\r\n    }\r\n\r\n    /**\r\n     * âœ… AMÃ‰LIORÃ‰: Modale de chargement avec positionnement\r\n     */\r\n    async showLoading(config, asyncTask) {\r\n      // let loadingModalPromise = null;\r\n      \r\n      try {\r\n        // âœ… Configuration de loading avec positionnement intelligent\r\n        const loadingConfig = {\r\n          type: MODAL_TYPES.CUSTOM,\r\n          title: config.title || \"Chargement...\",\r\n          content: config.content || this.createLoadingContent(),\r\n          size: config.size || MODAL_SIZES.SMALL,\r\n          position: config.position || MODAL_POSITIONS.CENTER, // CentrÃ© pour loading\r\n          anchorRef: config.anchorRef || null,\r\n          buttons: [],\r\n          closeOnEscape: false,\r\n          closeOnOverlayClick: false,\r\n          ...config\r\n        };\r\n        \r\n        // Afficher la modale de chargement\r\n        this.show(loadingConfig);\r\n        \r\n        // ExÃ©cuter la tÃ¢che async\r\n        const result = await asyncTask();\r\n        \r\n        // Fermer toutes les modales de chargement\r\n        this.closeAll();\r\n        \r\n        // DÃ©lai pour Ã©viter les conflits visuels\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        \r\n        return result;\r\n        \r\n      } catch (error) {\r\n        this.closeAll();\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * âœ… NOUVEAU: CrÃ©er le contenu de loading\r\n     */\r\n    createLoadingContent(message = \"OpÃ©ration en cours...\") {\r\n      return `\r\n        <div class=\"unified-modal-loading\">\r\n          <div class=\"unified-modal-spinner\"></div>\r\n          <div class=\"unified-modal-loading-text\">${message}</div>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    /**\r\n     * âœ… NOUVEAUX: MÃ©thodes utilitaires pour debug et configuration\r\n     */\r\n    getActiveModalsInfo() {\r\n      const info = [];\r\n      this.activeModals.forEach((modal, id) => {\r\n        const rect = modal.container.getBoundingClientRect();\r\n        info.push({\r\n          id,\r\n          type: modal.config.type,\r\n          size: modal.config.size,\r\n          position: modal.config.position,\r\n          rect: {\r\n            width: rect.width,\r\n            height: rect.height,\r\n            top: rect.top,\r\n            left: rect.left\r\n          },\r\n          hasScroll: modal.container.classList.contains('has-scrollable-content')\r\n        });\r\n      });\r\n      return info;\r\n    }\r\n\r\n    updatePositionConfig(newConfig) {\r\n      this.positionConfig = {\r\n        ...this.positionConfig,\r\n        ...newConfig\r\n      };\r\n      log.debug('âš™ï¸ Configuration positionnement mise Ã  jour:', this.positionConfig);\r\n    }\r\n\r\n    // âœ… MÃ‰THODE DE TEST pour vÃ©rifier le positionnement\r\n    testPositioning() {\r\n      const info = {\r\n        viewport: {\r\n          width: window.innerWidth,\r\n          height: window.innerHeight,\r\n          isMobile: window.innerWidth <= 768\r\n        },\r\n        config: this.positionConfig,\r\n        activeModals: this.getActiveModalsInfo(),\r\n        tests: []\r\n      };\r\n\r\n      // Test 1: VÃ©rifier que les modales actives ont la bonne hauteur\r\n      this.activeModals.forEach((modal, id) => {\r\n        const rect = modal.container.getBoundingClientRect();\r\n        const maxHeight = window.innerHeight * (window.innerWidth <= 768 ? \r\n          this.positionConfig.mobileMaxHeight : \r\n          this.positionConfig.maxHeightPercent\r\n        );\r\n        \r\n        info.tests.push({\r\n          modalId: id,\r\n          test: 'Hauteur respectÃ©e',\r\n          passed: rect.height <= maxHeight + 10, // 10px de tolÃ©rance\r\n          details: `${Math.round(rect.height)}px / max ${Math.round(maxHeight)}px`\r\n        });\r\n\r\n        // Test 2: VÃ©rifier que les boutons sont visibles\r\n        const footer = modal.container.querySelector('.modal-actions');\r\n        if (footer) {\r\n          const footerRect = footer.getBoundingClientRect();\r\n          const isVisible = footerRect.bottom <= window.innerHeight;\r\n          \r\n          info.tests.push({\r\n            modalId: id,\r\n            test: 'Boutons visibles',\r\n            passed: isVisible,\r\n            details: `Footer bottom: ${Math.round(footerRect.bottom)}px / viewport: ${window.innerHeight}px`\r\n          });\r\n        }\r\n      });\r\n\r\n      log.debug('ðŸ§ª Test de positionnement:', info);\r\n      return info;\r\n    }\r\n  }\r\n\r\n// âœ… Instance globale\r\nconst modalSystem = new ModalSystem();\r\n\r\n// âœ… EXPORTS - Maintenant avec les amÃ©liorations\r\nexport const showCustom = (config) => modalSystem.custom(config);\r\nexport const showConfirm = (options) => modalSystem.confirm(options);\r\nexport const showInfo = (message, title, anchorRef) => modalSystem.info(message, title, anchorRef);\r\nexport const showSuccess = (message, title, anchorRef) => modalSystem.success(message, title, anchorRef);\r\nexport const showError = (message, title, anchorRef) => modalSystem.error(message, title, anchorRef);\r\nexport const showWarning = (message, title, anchorRef) => modalSystem.warning(message, title, anchorRef);\r\nexport const showPrompt = (options) => modalSystem.prompt(options);\r\nexport const showLoading = (config, asyncTask) => modalSystem.showLoading(config, asyncTask);\r\n\r\n// âœ… NOUVEAUX EXPORTS pour debug et contrÃ´le\r\nexport const testModalPositioning = () => modalSystem.testPositioning();\r\nexport const getActiveModalsInfo = () => modalSystem.getActiveModalsInfo();\r\nexport const updateModalConfig = (config) => modalSystem.updatePositionConfig(config);\r\nexport const closeAllModals = () => modalSystem.closeAll();\r\n\r\n// Export des constantes\r\nexport { MODAL_TYPES, MODAL_SIZES, MODAL_POSITIONS, ModalSystem };\r\n\r\n// Export par dÃ©faut\r\nexport default modalSystem;"],"mappings":"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","ignoreList":[]}