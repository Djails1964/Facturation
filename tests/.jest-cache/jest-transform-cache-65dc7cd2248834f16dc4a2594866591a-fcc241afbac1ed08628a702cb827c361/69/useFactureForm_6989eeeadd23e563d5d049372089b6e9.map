{"version":3,"names":["_react","require","_factureConstants","useFactureForm","mode","idFacture","facture","setFacture","useState","numeroFacture","dateFacture","idClient","montantTotal","ristourne","totalAvecRistourne","lignes","etat","documentPath","date_annulation","date_paiement","isLoading","setIsLoading","isSubmitting","setIsSubmitting","error","setError","clientData","setClientData","clientLoading","setClientLoading","isLignesValid","setIsLignesValid","isReadOnly","FORM_MODES","VIEW","isFormValid","length","getFormData","useCallback","exports","_default","default"],"sources":["useFactureForm.js"],"sourcesContent":["// src/components/factures/hooks/useFactureForm.js\r\n// ✅ VERSION REFACTORISÉE - Ne crée plus de services en interne\r\n// ✅ Les appels API passent par useFactureActions et useTarifActions\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { FORM_MODES } from '../../../constants/factureConstants';\r\n\r\n/**\r\n * Hook principal pour la gestion de l'état du formulaire de facture\r\n * ✅ REFACTORISÉ: Ne crée plus de services en interne\r\n * ✅ Les composants utilisent useFactureFormActions pour les opérations API\r\n * \r\n * @param {string} mode - Mode du formulaire (VIEW, CREATE, EDIT)\r\n * @param {string|number} idFacture - ID de la facture (null pour création)\r\n * @returns {Object} État et fonctions du formulaire\r\n */\r\nexport const useFactureForm = (mode, idFacture) => {\r\n  // États principaux\r\n  const [facture, setFacture] = useState({\r\n    idFacture: '',\r\n    numeroFacture: '',\r\n    dateFacture: '',\r\n    idClient: null,\r\n    montantTotal: 0,\r\n    ristourne: 0,\r\n    totalAvecRistourne: 0,\r\n    lignes: [],\r\n    etat: '',\r\n    documentPath: null,\r\n    date_annulation: null,\r\n    date_paiement: null\r\n  });\r\n\r\n  const [isLoading, setIsLoading] = useState(idFacture !== null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [clientData, setClientData] = useState(null);\r\n  const [clientLoading, setClientLoading] = useState(false);\r\n  const [isLignesValid, setIsLignesValid] = useState(false);\r\n\r\n  // Utilitaires\r\n  const isReadOnly = mode === FORM_MODES.VIEW;\r\n  const isFormValid = mode === FORM_MODES.VIEW ||\r\n    (facture.numeroFacture &&\r\n      facture.idClient &&\r\n      facture.lignes &&\r\n      facture.lignes.length > 0 &&\r\n      isLignesValid);\r\n\r\n  // Fonction pour obtenir les données du formulaire avec mémorisation\r\n  const getFormData = useCallback(() => {\r\n    return {\r\n      numeroFacture: facture.numeroFacture,\r\n      dateFacture: facture.dateFacture,\r\n      idClient: facture.idClient,\r\n      lignes: facture.lignes,\r\n      ristourne: facture.ristourne,\r\n      montantTotal: facture.montantTotal,\r\n      totalAvecRistourne: facture.totalAvecRistourne\r\n    };\r\n  }, [facture]);\r\n\r\n  return {\r\n    // États\r\n    facture,\r\n    setFacture,\r\n    isLoading,\r\n    setIsLoading,\r\n    isSubmitting,\r\n    setIsSubmitting,\r\n    error,\r\n    setError,\r\n    clientData,\r\n    setClientData,\r\n    clientLoading,\r\n    setClientLoading,\r\n    isLignesValid,\r\n    setIsLignesValid,\r\n    \r\n    // ✅ Plus de services retournés - utiliser useFactureFormActions\r\n    \r\n    // Utilitaires\r\n    isReadOnly,\r\n    isFormValid,\r\n    getFormData\r\n  };\r\n};\r\n\r\nexport default useFactureForm;"],"mappings":";;;;;;AAIA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AALA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAME,cAAc,GAAGA,CAACC,IAAI,EAAEC,SAAS,KAAK;EACjD;EACA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG,IAAAC,eAAQ,EAAC;IACrCH,SAAS,EAAE,EAAE;IACbI,aAAa,EAAE,EAAE;IACjBC,WAAW,EAAE,EAAE;IACfC,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE,CAAC;IACfC,SAAS,EAAE,CAAC;IACZC,kBAAkB,EAAE,CAAC;IACrBC,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE,EAAE;IACRC,YAAY,EAAE,IAAI;IAClBC,eAAe,EAAE,IAAI;IACrBC,aAAa,EAAE;EACjB,CAAC,CAAC;EAEF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAb,eAAQ,EAACH,SAAS,KAAK,IAAI,CAAC;EAC9D,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAG,IAAAf,eAAQ,EAAC,KAAK,CAAC;EACvD,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAG,IAAAjB,eAAQ,EAAC,IAAI,CAAC;EACxC,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAG,IAAAnB,eAAQ,EAAC,IAAI,CAAC;EAClD,MAAM,CAACoB,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAArB,eAAQ,EAAC,KAAK,CAAC;EACzD,MAAM,CAACsB,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAAvB,eAAQ,EAAC,KAAK,CAAC;;EAEzD;EACA,MAAMwB,UAAU,GAAG5B,IAAI,KAAK6B,4BAAU,CAACC,IAAI;EAC3C,MAAMC,WAAW,GAAG/B,IAAI,KAAK6B,4BAAU,CAACC,IAAI,IACzC5B,OAAO,CAACG,aAAa,IACpBH,OAAO,CAACK,QAAQ,IAChBL,OAAO,CAACS,MAAM,IACdT,OAAO,CAACS,MAAM,CAACqB,MAAM,GAAG,CAAC,IACzBN,aAAc;;EAElB;EACA,MAAMO,WAAW,GAAG,IAAAC,kBAAW,EAAC,MAAM;IACpC,OAAO;MACL7B,aAAa,EAAEH,OAAO,CAACG,aAAa;MACpCC,WAAW,EAAEJ,OAAO,CAACI,WAAW;MAChCC,QAAQ,EAAEL,OAAO,CAACK,QAAQ;MAC1BI,MAAM,EAAET,OAAO,CAACS,MAAM;MACtBF,SAAS,EAAEP,OAAO,CAACO,SAAS;MAC5BD,YAAY,EAAEN,OAAO,CAACM,YAAY;MAClCE,kBAAkB,EAAER,OAAO,CAACQ;IAC9B,CAAC;EACH,CAAC,EAAE,CAACR,OAAO,CAAC,CAAC;EAEb,OAAO;IACL;IACAA,OAAO;IACPC,UAAU;IACVa,SAAS;IACTC,YAAY;IACZC,YAAY;IACZC,eAAe;IACfC,KAAK;IACLC,QAAQ;IACRC,UAAU;IACVC,aAAa;IACbC,aAAa;IACbC,gBAAgB;IAChBC,aAAa;IACbC,gBAAgB;IAEhB;;IAEA;IACAC,UAAU;IACVG,WAAW;IACXE;EACF,CAAC;AACH,CAAC;AAACE,OAAA,CAAApC,cAAA,GAAAA,cAAA;AAAA,IAAAqC,QAAA,GAAAD,OAAA,CAAAE,OAAA,GAEatC,cAAc","ignoreList":[]}