87e13c6863f83a7f8d3bcfe063925507
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _FacturesListe = _interopRequireDefault(require("./FacturesListe"));
var _FactureForm = _interopRequireDefault(require("./FactureForm"));
var _factureConstants = require("../../constants/factureConstants");
var _useClientActions = require("../clients/hooks/useClientActions");
var _createLogger = require("../../utils/createLogger");
var _NotificationService = require("../../services/NotificationService");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
// src/components/factures/FactureGestion.jsx
// ‚úÖ REFACTORIS√â : Utilise useClientActions au lieu de ClientService direct

function FactureGestion({
  section = 'liste',
  idFacture = null,
  onFactureCreated = null,
  onSectionChange = null,
  initialFilter = {},
  onRetour = null,
  navigationSource = 'liste'
}) {
  const log = (0, _createLogger.createLogger)("FactureGestion");

  // Hook du NotificationService
  const {
    showSuccess,
    showError
  } = (0, _NotificationService.useNotifications)();

  // ‚úÖ MODIFI√â : Utilise useClientActions au lieu de ClientService
  const {
    chargerClients: chargerClientsApi
  } = (0, _useClientActions.useClientActions)();

  // √âtats pour g√©rer la navigation entre les diff√©rentes vues
  const [activeView, setActiveView] = (0, _react.useState)(section);
  const [selectedFactureId, setSelectedFactureId] = (0, _react.useState)(idFacture);

  // √âtats pour la gestion des clients
  const [clients, setClients] = (0, _react.useState)([]);
  const [clientsLoading, setClientsLoading] = (0, _react.useState)(false);
  const [clientError, setClientError] = (0, _react.useState)(null);

  // ‚úÖ Ref pour √©viter les appels multiples
  const isLoadingClientsRef = _react.default.useRef(false);

  // Effet pour mettre √† jour la vue active quand la prop section change
  (0, _react.useEffect)(() => {
    setActiveView(section);
  }, [section]);

  // Effet pour mettre √† jour l'ID de la facture s√©lectionn√©e
  (0, _react.useEffect)(() => {
    if (idFacture !== null && idFacture !== undefined) {
      log.debug('üìå FactureGestion - idFacture re√ßue de parent:', idFacture);
      setSelectedFactureId(idFacture);
      setActiveView('afficher');
    }
  }, [idFacture]);

  // Effet pour notifier le parent du changement de section
  (0, _react.useEffect)(() => {
    if (onSectionChange) {
      onSectionChange(activeView);
    }
  }, [activeView, onSectionChange]);

  // ‚úÖ MODIFI√â : Charger la liste des clients via useClientActions
  const chargerClients = (0, _react.useCallback)(async () => {
    // ‚úÖ Protection contre les appels multiples
    if (isLoadingClientsRef.current) {
      log.debug('‚è≥ Chargement des clients d√©j√† en cours, ignor√©');
      return;
    }
    isLoadingClientsRef.current = true;
    setClientsLoading(true);
    setClientError(null);
    try {
      log.debug('üì• Chargement des clients via useClientActions');
      const clientsData = await chargerClientsApi();
      setClients(clientsData || []);
      log.debug('‚úÖ Clients charg√©s:', clientsData?.length || 0);
    } catch (error) {
      log.error('‚ùå Erreur lors du chargement des clients:', error);
      setClientError('Une erreur est survenue lors du chargement des clients: ' + error.message);
    } finally {
      setClientsLoading(false);
      isLoadingClientsRef.current = false;
    }
  }, [chargerClientsApi, log]);

  // Charger les clients au montage du composant uniquement
  (0, _react.useEffect)(() => {
    chargerClients();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  // Gestion du retour √† la liste
  const handleRetourListe = (0, _react.useCallback)((idFacture = null, modified = false, message = '', type = '') => {
    if (idFacture) {
      setSelectedFactureId(idFacture);
    }
    if (message) {
      if (type === 'success') {
        showSuccess(message);
      } else if (type === 'error') {
        showError(message);
      }
    }

    // Si on vient du dashboard, appeler onRetour pour revenir au dashboard
    if (navigationSource === 'dashboard' && onRetour) {
      log.debug('üîô Retour au dashboard');
      onRetour(idFacture, modified, message, type);
    } else {
      log.debug('üîô Retour √† la liste des factures');
      setActiveView('liste');
    }
  }, [navigationSource, onRetour, showSuccess, showError, log]);

  // Gestion de la cr√©ation de facture
  const handleFactureCreated = (0, _react.useCallback)((idFacture, message = 'Facture cr√©√©e avec succ√®s') => {
    setSelectedFactureId(idFacture);
    showSuccess(message);
    setActiveView('liste');
    if (onFactureCreated) {
      onFactureCreated(idFacture);
    }
  }, [showSuccess, onFactureCreated]);

  // Gestion de la modification de facture
  const handleModifierFacture = (0, _react.useCallback)(idFacture => {
    setSelectedFactureId(idFacture);
    setActiveView('modifier');
  }, []);

  // Gestion de l'affichage de facture
  const handleAfficherFacture = (0, _react.useCallback)(idFacture => {
    log.debug('üîç FactureGestion.handleAfficherFacture - ID re√ßu:', idFacture);
    log.debug('üîç FactureGestion.handleAfficherFacture - Type:', typeof idFacture);
    setSelectedFactureId(idFacture);
    log.debug('üîç FactureGestion - selectedFactureId d√©fini √†:', idFacture);
    setActiveView('afficher');
    log.debug('üîç FactureGestion - activeView d√©fini √†: afficher');
  }, [log]);

  // Passer √† la vue de cr√©ation
  const handleNouvelleFacture = (0, _react.useCallback)(() => {
    setActiveView('nouveau');
  }, []);

  // Gestion de la suppression de facture
  const handleFactureSupprimee = (0, _react.useCallback)((message = 'Facture supprim√©e avec succ√®s') => {
    showSuccess(message);
  }, [showSuccess]);

  // Gestion des notifications depuis FacturesListe
  const handleSetNotification = (0, _react.useCallback)((message, type) => {
    if (type === 'success') {
      showSuccess(message);
    } else if (type === 'error') {
      showError(message);
    }
  }, [showSuccess, showError]);

  // Rendu conditionnel selon la vue active
  const renderContent = () => {
    switch (activeView) {
      case 'nouveau':
        return /*#__PURE__*/_react.default.createElement(_FactureForm.default, {
          mode: _factureConstants.FORM_MODES.CREATE,
          onRetourListe: handleRetourListe,
          onFactureCreated: handleFactureCreated,
          clients: clients,
          clientsLoading: clientsLoading,
          onRechargerClients: chargerClients
        });
      case 'modifier':
        return /*#__PURE__*/_react.default.createElement(_FactureForm.default, {
          mode: _factureConstants.FORM_MODES.EDIT,
          idFacture: selectedFactureId,
          onRetourListe: handleRetourListe,
          clients: clients,
          clientsLoading: clientsLoading,
          onRechargerClients: chargerClients
        });
      case 'afficher':
        log.debug('üîç FactureGestion RENDU afficher - selectedFactureId:', selectedFactureId);
        return /*#__PURE__*/_react.default.createElement(_FactureForm.default, {
          mode: _factureConstants.FORM_MODES.VIEW,
          idFacture: selectedFactureId,
          onRetourListe: handleRetourListe,
          clients: clients,
          clientsLoading: clientsLoading,
          onRechargerClients: chargerClients
        });
      case 'liste':
      default:
        return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, onRetour && /*#__PURE__*/_react.default.createElement("div", {
          className: "retour-button-container"
        }, /*#__PURE__*/_react.default.createElement("button", {
          className: "btn-retour",
          onClick: onRetour
        }, "\u2190 Retour")), /*#__PURE__*/_react.default.createElement(_FacturesListe.default, {
          nouvelleFactureId: selectedFactureId,
          onModifierFacture: handleModifierFacture,
          onAfficherFacture: handleAfficherFacture,
          onNouvelleFacture: handleNouvelleFacture,
          onFactureSupprimee: handleFactureSupprimee,
          onSetNotification: handleSetNotification,
          initialFilter: initialFilter
        }));
    }
  };
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "paiement-gestion-container"
  }, renderContent(), activeView === 'liste' && section !== 'nouvelle' && /*#__PURE__*/_react.default.createElement("div", {
    className: "floating-button",
    onClick: handleNouvelleFacture
  }, /*#__PURE__*/_react.default.createElement("span", null, "+"), /*#__PURE__*/_react.default.createElement("div", {
    className: "floating-tooltip"
  }, "Nouvelle facture")));
}
var _default = exports.default = FactureGestion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfRmFjdHVyZXNMaXN0ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfRmFjdHVyZUZvcm0iLCJfZmFjdHVyZUNvbnN0YW50cyIsIl91c2VDbGllbnRBY3Rpb25zIiwiX2NyZWF0ZUxvZ2dlciIsIl9Ob3RpZmljYXRpb25TZXJ2aWNlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidCIsIldlYWtNYXAiLCJyIiwibiIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRmFjdHVyZUdlc3Rpb24iLCJzZWN0aW9uIiwiaWRGYWN0dXJlIiwib25GYWN0dXJlQ3JlYXRlZCIsIm9uU2VjdGlvbkNoYW5nZSIsImluaXRpYWxGaWx0ZXIiLCJvblJldG91ciIsIm5hdmlnYXRpb25Tb3VyY2UiLCJsb2ciLCJjcmVhdGVMb2dnZXIiLCJzaG93U3VjY2VzcyIsInNob3dFcnJvciIsInVzZU5vdGlmaWNhdGlvbnMiLCJjaGFyZ2VyQ2xpZW50cyIsImNoYXJnZXJDbGllbnRzQXBpIiwidXNlQ2xpZW50QWN0aW9ucyIsImFjdGl2ZVZpZXciLCJzZXRBY3RpdmVWaWV3IiwidXNlU3RhdGUiLCJzZWxlY3RlZEZhY3R1cmVJZCIsInNldFNlbGVjdGVkRmFjdHVyZUlkIiwiY2xpZW50cyIsInNldENsaWVudHMiLCJjbGllbnRzTG9hZGluZyIsInNldENsaWVudHNMb2FkaW5nIiwiY2xpZW50RXJyb3IiLCJzZXRDbGllbnRFcnJvciIsImlzTG9hZGluZ0NsaWVudHNSZWYiLCJSZWFjdCIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVuZGVmaW5lZCIsImRlYnVnIiwidXNlQ2FsbGJhY2siLCJjdXJyZW50IiwiY2xpZW50c0RhdGEiLCJsZW5ndGgiLCJlcnJvciIsIm1lc3NhZ2UiLCJoYW5kbGVSZXRvdXJMaXN0ZSIsIm1vZGlmaWVkIiwidHlwZSIsImhhbmRsZUZhY3R1cmVDcmVhdGVkIiwiaGFuZGxlTW9kaWZpZXJGYWN0dXJlIiwiaGFuZGxlQWZmaWNoZXJGYWN0dXJlIiwiaGFuZGxlTm91dmVsbGVGYWN0dXJlIiwiaGFuZGxlRmFjdHVyZVN1cHByaW1lZSIsImhhbmRsZVNldE5vdGlmaWNhdGlvbiIsInJlbmRlckNvbnRlbnQiLCJjcmVhdGVFbGVtZW50IiwibW9kZSIsIkZPUk1fTU9ERVMiLCJDUkVBVEUiLCJvblJldG91ckxpc3RlIiwib25SZWNoYXJnZXJDbGllbnRzIiwiRURJVCIsIlZJRVciLCJGcmFnbWVudCIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJub3V2ZWxsZUZhY3R1cmVJZCIsIm9uTW9kaWZpZXJGYWN0dXJlIiwib25BZmZpY2hlckZhY3R1cmUiLCJvbk5vdXZlbGxlRmFjdHVyZSIsIm9uRmFjdHVyZVN1cHByaW1lZSIsIm9uU2V0Tm90aWZpY2F0aW9uIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRmFjdHVyZUdlc3Rpb24uanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2ZhY3R1cmVzL0ZhY3R1cmVHZXN0aW9uLmpzeFxyXG4vLyDinIUgUkVGQUNUT1JJU8OJIDogVXRpbGlzZSB1c2VDbGllbnRBY3Rpb25zIGF1IGxpZXUgZGUgQ2xpZW50U2VydmljZSBkaXJlY3RcclxuXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZhY3R1cmVzTGlzdGUgZnJvbSAnLi9GYWN0dXJlc0xpc3RlJztcclxuaW1wb3J0IEZhY3R1cmVGb3JtIGZyb20gJy4vRmFjdHVyZUZvcm0nO1xyXG5pbXBvcnQgeyBGT1JNX01PREVTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2ZhY3R1cmVDb25zdGFudHMnO1xyXG5pbXBvcnQgeyB1c2VDbGllbnRBY3Rpb25zIH0gZnJvbSAnLi4vY2xpZW50cy9ob29rcy91c2VDbGllbnRBY3Rpb25zJztcclxuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3JlYXRlTG9nZ2VyJztcclxuaW1wb3J0IHsgdXNlTm90aWZpY2F0aW9ucyB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL05vdGlmaWNhdGlvblNlcnZpY2UnO1xyXG5cclxuZnVuY3Rpb24gRmFjdHVyZUdlc3Rpb24oeyBcclxuICAgIHNlY3Rpb24gPSAnbGlzdGUnLCBcclxuICAgIGlkRmFjdHVyZSA9IG51bGwsIFxyXG4gICAgb25GYWN0dXJlQ3JlYXRlZCA9IG51bGwsIFxyXG4gICAgb25TZWN0aW9uQ2hhbmdlID0gbnVsbCxcclxuICAgIGluaXRpYWxGaWx0ZXIgPSB7fSwgXHJcbiAgICBvblJldG91ciA9IG51bGwsXHJcbiAgICBuYXZpZ2F0aW9uU291cmNlID0gJ2xpc3RlJ1xyXG59KSB7XHJcbiAgICBcclxuICAgIGNvbnN0IGxvZyA9IGNyZWF0ZUxvZ2dlcihcIkZhY3R1cmVHZXN0aW9uXCIpO1xyXG5cclxuICAgIC8vIEhvb2sgZHUgTm90aWZpY2F0aW9uU2VydmljZVxyXG4gICAgY29uc3QgeyBzaG93U3VjY2Vzcywgc2hvd0Vycm9yIH0gPSB1c2VOb3RpZmljYXRpb25zKCk7XHJcbiAgICBcclxuICAgIC8vIOKchSBNT0RJRknDiSA6IFV0aWxpc2UgdXNlQ2xpZW50QWN0aW9ucyBhdSBsaWV1IGRlIENsaWVudFNlcnZpY2VcclxuICAgIGNvbnN0IHsgY2hhcmdlckNsaWVudHM6IGNoYXJnZXJDbGllbnRzQXBpIH0gPSB1c2VDbGllbnRBY3Rpb25zKCk7XHJcbiAgICBcclxuICAgIC8vIMOJdGF0cyBwb3VyIGfDqXJlciBsYSBuYXZpZ2F0aW9uIGVudHJlIGxlcyBkaWZmw6lyZW50ZXMgdnVlc1xyXG4gICAgY29uc3QgW2FjdGl2ZVZpZXcsIHNldEFjdGl2ZVZpZXddID0gdXNlU3RhdGUoc2VjdGlvbik7XHJcbiAgICBjb25zdCBbc2VsZWN0ZWRGYWN0dXJlSWQsIHNldFNlbGVjdGVkRmFjdHVyZUlkXSA9IHVzZVN0YXRlKGlkRmFjdHVyZSk7XHJcbiAgICBcclxuICAgIC8vIMOJdGF0cyBwb3VyIGxhIGdlc3Rpb24gZGVzIGNsaWVudHNcclxuICAgIGNvbnN0IFtjbGllbnRzLCBzZXRDbGllbnRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtjbGllbnRzTG9hZGluZywgc2V0Q2xpZW50c0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgW2NsaWVudEVycm9yLCBzZXRDbGllbnRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIFxyXG4gICAgLy8g4pyFIFJlZiBwb3VyIMOpdml0ZXIgbGVzIGFwcGVscyBtdWx0aXBsZXNcclxuICAgIGNvbnN0IGlzTG9hZGluZ0NsaWVudHNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpO1xyXG5cclxuICAgIC8vIEVmZmV0IHBvdXIgbWV0dHJlIMOgIGpvdXIgbGEgdnVlIGFjdGl2ZSBxdWFuZCBsYSBwcm9wIHNlY3Rpb24gY2hhbmdlXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIHNldEFjdGl2ZVZpZXcoc2VjdGlvbik7XHJcbiAgICB9LCBbc2VjdGlvbl0pO1xyXG5cclxuICAgIC8vIEVmZmV0IHBvdXIgbWV0dHJlIMOgIGpvdXIgbCdJRCBkZSBsYSBmYWN0dXJlIHPDqWxlY3Rpb25uw6llXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmIChpZEZhY3R1cmUgIT09IG51bGwgJiYgaWRGYWN0dXJlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbG9nLmRlYnVnKCfwn5OMIEZhY3R1cmVHZXN0aW9uIC0gaWRGYWN0dXJlIHJlw6d1ZSBkZSBwYXJlbnQ6JywgaWRGYWN0dXJlKTtcclxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRGYWN0dXJlSWQoaWRGYWN0dXJlKTtcclxuICAgICAgICAgICAgc2V0QWN0aXZlVmlldygnYWZmaWNoZXInKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbaWRGYWN0dXJlXSk7XHJcblxyXG4gICAgLy8gRWZmZXQgcG91ciBub3RpZmllciBsZSBwYXJlbnQgZHUgY2hhbmdlbWVudCBkZSBzZWN0aW9uXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmIChvblNlY3Rpb25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgb25TZWN0aW9uQ2hhbmdlKGFjdGl2ZVZpZXcpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFthY3RpdmVWaWV3LCBvblNlY3Rpb25DaGFuZ2VdKTtcclxuXHJcbiAgICAvLyDinIUgTU9ESUZJw4kgOiBDaGFyZ2VyIGxhIGxpc3RlIGRlcyBjbGllbnRzIHZpYSB1c2VDbGllbnRBY3Rpb25zXHJcbiAgICBjb25zdCBjaGFyZ2VyQ2xpZW50cyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAvLyDinIUgUHJvdGVjdGlvbiBjb250cmUgbGVzIGFwcGVscyBtdWx0aXBsZXNcclxuICAgICAgICBpZiAoaXNMb2FkaW5nQ2xpZW50c1JlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1Zygn4o+zIENoYXJnZW1lbnQgZGVzIGNsaWVudHMgZMOpasOgIGVuIGNvdXJzLCBpZ25vcsOpJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaXNMb2FkaW5nQ2xpZW50c1JlZi5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICBzZXRDbGllbnRzTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBzZXRDbGllbnRFcnJvcihudWxsKTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsb2cuZGVidWcoJ/Cfk6UgQ2hhcmdlbWVudCBkZXMgY2xpZW50cyB2aWEgdXNlQ2xpZW50QWN0aW9ucycpO1xyXG4gICAgICAgICAgICBjb25zdCBjbGllbnRzRGF0YSA9IGF3YWl0IGNoYXJnZXJDbGllbnRzQXBpKCk7XHJcbiAgICAgICAgICAgIHNldENsaWVudHMoY2xpZW50c0RhdGEgfHwgW10pO1xyXG4gICAgICAgICAgICBsb2cuZGVidWcoJ+KchSBDbGllbnRzIGNoYXJnw6lzOicsIGNsaWVudHNEYXRhPy5sZW5ndGggfHwgMCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nLmVycm9yKCfinYwgRXJyZXVyIGxvcnMgZHUgY2hhcmdlbWVudCBkZXMgY2xpZW50czonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHNldENsaWVudEVycm9yKCdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGR1IGNoYXJnZW1lbnQgZGVzIGNsaWVudHM6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBzZXRDbGllbnRzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGlzTG9hZGluZ0NsaWVudHNSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtjaGFyZ2VyQ2xpZW50c0FwaSwgbG9nXSk7XHJcblxyXG4gICAgLy8gQ2hhcmdlciBsZXMgY2xpZW50cyBhdSBtb250YWdlIGR1IGNvbXBvc2FudCB1bmlxdWVtZW50XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNoYXJnZXJDbGllbnRzKCk7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIC8vIEdlc3Rpb24gZHUgcmV0b3VyIMOgIGxhIGxpc3RlXHJcbiAgICBjb25zdCBoYW5kbGVSZXRvdXJMaXN0ZSA9IHVzZUNhbGxiYWNrKChpZEZhY3R1cmUgPSBudWxsLCBtb2RpZmllZCA9IGZhbHNlLCBtZXNzYWdlID0gJycsIHR5cGUgPSAnJykgPT4ge1xyXG4gICAgICAgIGlmIChpZEZhY3R1cmUpIHtcclxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRGYWN0dXJlSWQoaWRGYWN0dXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgc2hvd1N1Y2Nlc3MobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNpIG9uIHZpZW50IGR1IGRhc2hib2FyZCwgYXBwZWxlciBvblJldG91ciBwb3VyIHJldmVuaXIgYXUgZGFzaGJvYXJkXHJcbiAgICAgICAgaWYgKG5hdmlnYXRpb25Tb3VyY2UgPT09ICdkYXNoYm9hcmQnICYmIG9uUmV0b3VyKSB7XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1Zygn8J+UmSBSZXRvdXIgYXUgZGFzaGJvYXJkJyk7XHJcbiAgICAgICAgICAgIG9uUmV0b3VyKGlkRmFjdHVyZSwgbW9kaWZpZWQsIG1lc3NhZ2UsIHR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1Zygn8J+UmSBSZXRvdXIgw6AgbGEgbGlzdGUgZGVzIGZhY3R1cmVzJyk7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVZpZXcoJ2xpc3RlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW25hdmlnYXRpb25Tb3VyY2UsIG9uUmV0b3VyLCBzaG93U3VjY2Vzcywgc2hvd0Vycm9yLCBsb2ddKTtcclxuXHJcbiAgICAvLyBHZXN0aW9uIGRlIGxhIGNyw6lhdGlvbiBkZSBmYWN0dXJlXHJcbiAgICBjb25zdCBoYW5kbGVGYWN0dXJlQ3JlYXRlZCA9IHVzZUNhbGxiYWNrKChpZEZhY3R1cmUsIG1lc3NhZ2UgPSAnRmFjdHVyZSBjcsOpw6llIGF2ZWMgc3VjY8OocycpID0+IHtcclxuICAgICAgICBzZXRTZWxlY3RlZEZhY3R1cmVJZChpZEZhY3R1cmUpO1xyXG4gICAgICAgIHNob3dTdWNjZXNzKG1lc3NhZ2UpO1xyXG4gICAgICAgIHNldEFjdGl2ZVZpZXcoJ2xpc3RlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG9uRmFjdHVyZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgb25GYWN0dXJlQ3JlYXRlZChpZEZhY3R1cmUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtzaG93U3VjY2Vzcywgb25GYWN0dXJlQ3JlYXRlZF0pO1xyXG5cclxuICAgIC8vIEdlc3Rpb24gZGUgbGEgbW9kaWZpY2F0aW9uIGRlIGZhY3R1cmVcclxuICAgIGNvbnN0IGhhbmRsZU1vZGlmaWVyRmFjdHVyZSA9IHVzZUNhbGxiYWNrKChpZEZhY3R1cmUpID0+IHtcclxuICAgICAgICBzZXRTZWxlY3RlZEZhY3R1cmVJZChpZEZhY3R1cmUpO1xyXG4gICAgICAgIHNldEFjdGl2ZVZpZXcoJ21vZGlmaWVyJyk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgLy8gR2VzdGlvbiBkZSBsJ2FmZmljaGFnZSBkZSBmYWN0dXJlXHJcbiAgICBjb25zdCBoYW5kbGVBZmZpY2hlckZhY3R1cmUgPSB1c2VDYWxsYmFjaygoaWRGYWN0dXJlKSA9PiB7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5SNIEZhY3R1cmVHZXN0aW9uLmhhbmRsZUFmZmljaGVyRmFjdHVyZSAtIElEIHJlw6d1OicsIGlkRmFjdHVyZSk7XHJcbiAgICAgICAgbG9nLmRlYnVnKCfwn5SNIEZhY3R1cmVHZXN0aW9uLmhhbmRsZUFmZmljaGVyRmFjdHVyZSAtIFR5cGU6JywgdHlwZW9mIGlkRmFjdHVyZSk7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWRGYWN0dXJlSWQoaWRGYWN0dXJlKTtcclxuICAgICAgICBsb2cuZGVidWcoJ/CflI0gRmFjdHVyZUdlc3Rpb24gLSBzZWxlY3RlZEZhY3R1cmVJZCBkw6lmaW5pIMOgOicsIGlkRmFjdHVyZSk7XHJcbiAgICAgICAgc2V0QWN0aXZlVmlldygnYWZmaWNoZXInKTtcclxuICAgICAgICBsb2cuZGVidWcoJ/CflI0gRmFjdHVyZUdlc3Rpb24gLSBhY3RpdmVWaWV3IGTDqWZpbmkgw6A6IGFmZmljaGVyJyk7XHJcbiAgICB9LCBbbG9nXSk7XHJcblxyXG4gICAgLy8gUGFzc2VyIMOgIGxhIHZ1ZSBkZSBjcsOpYXRpb25cclxuICAgIGNvbnN0IGhhbmRsZU5vdXZlbGxlRmFjdHVyZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgICAgICBzZXRBY3RpdmVWaWV3KCdub3V2ZWF1Jyk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgLy8gR2VzdGlvbiBkZSBsYSBzdXBwcmVzc2lvbiBkZSBmYWN0dXJlXHJcbiAgICBjb25zdCBoYW5kbGVGYWN0dXJlU3VwcHJpbWVlID0gdXNlQ2FsbGJhY2soKG1lc3NhZ2UgPSAnRmFjdHVyZSBzdXBwcmltw6llIGF2ZWMgc3VjY8OocycpID0+IHtcclxuICAgICAgICBzaG93U3VjY2VzcyhtZXNzYWdlKTtcclxuICAgIH0sIFtzaG93U3VjY2Vzc10pO1xyXG5cclxuICAgIC8vIEdlc3Rpb24gZGVzIG5vdGlmaWNhdGlvbnMgZGVwdWlzIEZhY3R1cmVzTGlzdGVcclxuICAgIGNvbnN0IGhhbmRsZVNldE5vdGlmaWNhdGlvbiA9IHVzZUNhbGxiYWNrKChtZXNzYWdlLCB0eXBlKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICBzaG93U3VjY2VzcyhtZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcclxuICAgICAgICAgICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtzaG93U3VjY2Vzcywgc2hvd0Vycm9yXSk7XHJcblxyXG4gICAgLy8gUmVuZHUgY29uZGl0aW9ubmVsIHNlbG9uIGxhIHZ1ZSBhY3RpdmVcclxuICAgIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChhY3RpdmVWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ25vdXZlYXUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8RmFjdHVyZUZvcm0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU9e0ZPUk1fTU9ERVMuQ1JFQVRFfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJldG91ckxpc3RlPXtoYW5kbGVSZXRvdXJMaXN0ZX0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFjdHVyZUNyZWF0ZWQ9e2hhbmRsZUZhY3R1cmVDcmVhdGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzPXtjbGllbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzTG9hZGluZz17Y2xpZW50c0xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVjaGFyZ2VyQ2xpZW50cz17Y2hhcmdlckNsaWVudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vZGlmaWVyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEZhY3R1cmVGb3JtIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlPXtGT1JNX01PREVTLkVESVR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkRmFjdHVyZT17c2VsZWN0ZWRGYWN0dXJlSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmV0b3VyTGlzdGU9e2hhbmRsZVJldG91ckxpc3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzPXtjbGllbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzTG9hZGluZz17Y2xpZW50c0xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVjaGFyZ2VyQ2xpZW50cz17Y2hhcmdlckNsaWVudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FmZmljaGVyJzpcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1Zygn8J+UjSBGYWN0dXJlR2VzdGlvbiBSRU5EVSBhZmZpY2hlciAtIHNlbGVjdGVkRmFjdHVyZUlkOicsIHNlbGVjdGVkRmFjdHVyZUlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEZhY3R1cmVGb3JtIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlPXtGT1JNX01PREVTLlZJRVd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkRmFjdHVyZT17c2VsZWN0ZWRGYWN0dXJlSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmV0b3VyTGlzdGU9e2hhbmRsZVJldG91ckxpc3RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzPXtjbGllbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzTG9hZGluZz17Y2xpZW50c0xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVjaGFyZ2VyQ2xpZW50cz17Y2hhcmdlckNsaWVudHN9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpc3RlJzpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICAgICAge29uUmV0b3VyICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmV0b3VyLWJ1dHRvbi1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0bi1yZXRvdXJcIiBvbkNsaWNrPXtvblJldG91cn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKGkCBSZXRvdXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8RmFjdHVyZXNMaXN0ZSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdXZlbGxlRmFjdHVyZUlkPXtzZWxlY3RlZEZhY3R1cmVJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW9kaWZpZXJGYWN0dXJlPXtoYW5kbGVNb2RpZmllckZhY3R1cmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFmZmljaGVyRmFjdHVyZT17aGFuZGxlQWZmaWNoZXJGYWN0dXJlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ob3V2ZWxsZUZhY3R1cmU9e2hhbmRsZU5vdXZlbGxlRmFjdHVyZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFjdHVyZVN1cHByaW1lZT17aGFuZGxlRmFjdHVyZVN1cHByaW1lZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0Tm90aWZpY2F0aW9uPXtoYW5kbGVTZXROb3RpZmljYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsRmlsdGVyPXtpbml0aWFsRmlsdGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWllbWVudC1nZXN0aW9uLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICB7cmVuZGVyQ29udGVudCgpfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIEJvdXRvbiBmbG90dGFudCBwb3VyIGFqb3V0ZXIgdW5lIG5vdXZlbGxlIGZhY3R1cmUgKHZpc2libGUgdW5pcXVlbWVudCBzaSBvbiBlc3QgZGFucyBsYSB2dWUgbGlzdGUpICovfVxyXG4gICAgICAgICAgICB7YWN0aXZlVmlldyA9PT0gJ2xpc3RlJyAmJiBzZWN0aW9uICE9PSAnbm91dmVsbGUnICYmIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctYnV0dG9uXCIgb25DbGljaz17aGFuZGxlTm91dmVsbGVGYWN0dXJlfT5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj4rPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctdG9vbHRpcFwiPk5vdXZlbGxlIGZhY3R1cmU8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmFjdHVyZUdlc3Rpb247Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFELHNCQUFBLENB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